import{d as re,e as be,f as ye,i as ke,r as L,w as te,o as Se,j as _,k as R,l as c,b as i,t as G,z as K,s as p,q as o,y as N,A as W,F as ae,B as le,n as B,C as Ce,v as _e,a as ne,m as ve,D as Be,u as oe,p as ue,I as ie,E as Ve,G as je,H as Xe,J as T,K as Qe,L as Je,M as Ze,N as Q,O as ce,P as et,x as Ee,Q as De,R as tt,S as at,T as lt,U as it,V as X,W as st}from"./index-c756926d.js";import{_ as Oe,V as me,e as w,a as se,d as q,b as xe,g as Ae,h as we,i as Te,j as ge,k as nt,l as ot,n as ct,o as ut,p as dt,q as rt,r as vt,s as mt,t as ft,R as ht,u as gt,v as pt,w as Ne,x as bt,y as yt,z as kt,A as St,B as Ct,C as _t,D as Vt,L as xt,E as At,F as wt,G as Lt,H as Mt,I as It,J as Dt,K as Tt,M as Re,N as Pe,O as Rt,P as Ue,Q as j,S as Ge}from"./VSelect-a6bbfe30.js";const Pt={class:"container"},$t={class:"left-column"},Ht={class:"flex-center"},zt={class:"row-spread"},Bt={class:"user-counter"},Et=c("i",{class:"icon-users users"},null,-1),Ot={class:"video-grid"},Nt={class:"right-column"},Ut={class:"settings-menu-in-call"},Gt={class:"basic-flex"},Yt={class:"basic-flex"},Ft={class:"basic-flex"},Kt={class:"chat-container"},Wt=c("div",{class:"chat-header"},[c("h2",{class:"margin"},"Chat")],-1),qt={class:"chat-body"},jt={class:"chat-footer"},Xt=re({__name:"InCall",setup(t){const e=be(),u=ye(),l=ke("liveSwitch");let C=null,m=null;const r=e.state.localMedia;let s=L({});const v=L(1);let b=L("100%");const f=L("");let M=L([]);te(v,function(){const S=Math.ceil(Math.sqrt(v.value)),g=100/S;b.value="calc("+g+"% - "+S*5+"px)"});async function h(){await l.disconnectFromMeeting(s.value,C,r),r.destroy(),e.commit("resetStore"),u.push("/")}async function x(S){const g=Object.keys(s.value)[0],k=s.value[g],E=await l.getAudioSink(S,k);l.updateSpeaker(s.value,E)}function $(S){s.value[S.getId()].remoteMedia.destroy(),delete s.value[S.getId()],v.value--}function P(){f.value.length!==0&&(l.sendChat(m,e.state.displayName,f.value),f.value="")}function I(S,g){let k=S.getRemoteConnectionInfo().getUserAlias();s.value[S.getId()]={connection:S,remoteMedia:g,index:v.value++,displayName:k},A(g),l.createDownStreamCloseHandler(S,$)}function H(S){var g=JSON.parse(S);M.value.push({user:g.from,message:g.text})}function A(S){e.state.speakerList.length===0&&e.commit("populateSpeakerList",S)}return Se(async()=>{C=await l.registerClient(e.state.displayName,e.state.channelId),m=await l.getChannel(C),l.openSfuUpstreamConnection(e.state.localMedia,m),l.createDownStreamOpenHandler(m,I),e.commit("setLocalMedia",r),e.commit("populateCameraList"),e.commit("populateMicrophoneList"),e.commit("setActiveVideoDevice",r.getVideoSourceInput().getId()),e.commit("setActiveAudioDevice",r.getAudioSourceInput().getId()),e.commit("setVideoMuted",r.getVideoMuted()),e.commit("setAudioMuted",r.getAudioMuted()),l.addIncomingChatHandler(m,H)}),(S,g)=>(_(),R("div",Pt,[c("div",$t,[c("div",Ht,[i(me,{src:Oe,class:"logo-in-call"})]),c("div",zt,[c("div",Bt,[Et,G(" "+K(v.value),1)]),i(w,{class:"leave-button liveswitch",onClick:h},{default:p(()=>[G("Leave Call")]),_:1})]),c("div",Ot,[o(e).state.localMedia?(_(),N(se,{key:0,class:"video","local-video":o(e).state.localMedia,userName:"Me",askHeight:o(b),askWidth:o(b)},null,8,["local-video","askHeight","askWidth"])):W("",!0),o(s)?(_(!0),R(ae,{key:1},le(o(s),k=>(_(),N(se,{class:"video",remoteVideo:k.remoteMedia,index:k.index,userName:k.displayName,connection:k.connection,askHeight:o(b),askWidth:o(b)},null,8,["remoteVideo","index","userName","connection","askHeight","askWidth"]))),256)):W("",!0)])]),c("div",Nt,[c("div",Ut,[c("div",Gt,[i(q,{label:"Camera",class:"margin input liveswitch","hide-details":"auto",items:o(e).state.cameraList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeVideoDevice,"onUpdate:modelValue":[g[0]||(g[0]=k=>o(e).state.activeVideoDevice=k),g[1]||(g[1]=k=>o(e).commit("changeCamera"))]},null,8,["items","modelValue"]),i(w,{class:"margin button liveswitch",icon:"",onClick:g[2]||(g[2]=k=>o(e).commit("toggleLocalVideoMute"))},{default:p(()=>[c("i",{class:B(["center",o(e).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1})]),c("div",Yt,[i(q,{label:"Microphone",class:"margin input liveswitch","hide-details":"auto",items:o(e).state.microphoneList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeAudioDevice,"onUpdate:modelValue":[g[3]||(g[3]=k=>o(e).state.activeAudioDevice=k),g[4]||(g[4]=k=>o(e).commit("changeMicrophone"))]},null,8,["items","modelValue"]),i(w,{class:"margin button liveswitch",icon:"",onClick:g[5]||(g[5]=k=>o(e).commit("toggleLocalAudioMute"))},{default:p(()=>[c("i",{class:B(["center",o(e).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),c("div",Ft,[o(e).state.speakerList.length>0?(_(),N(q,{key:0,label:"Speaker",class:"margin input liveswitch","hide-details":"auto",items:o(e).state.speakerList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeSpeakerDevice,"onUpdate:modelValue":[g[6]||(g[6]=k=>o(e).state.activeSpeakerDevice=k),x]},null,8,["items","modelValue"])):W("",!0)])]),c("div",Kt,[Wt,c("div",qt,[(_(!0),R(ae,null,le(o(M),k=>(_(),R("div",null,[c("div",{class:B(["chat-message",k.user===o(e).state.displayName?"my-chat":"other-chat"])},K(k.user)+": "+K(k.message),3)]))),256))]),c("div",jt,[i(xe,{label:"Chat Message",clearable:"",class:"margin chat-input liveswitch","hide-details":"auto",modelValue:f.value,"onUpdate:modelValue":g[7]||(g[7]=k=>f.value=k),onKeydown:Ce(_e(P,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),i(w,{class:"chat-button liveswitch",onClick:P},{default:p(()=>[G(" Send ")]),_:1})])])])]))}});const Qt=ne()({name:"VCardActions",props:ve(),setup(t,e){let{slots:u}=e;return Be({VBtn:{variant:"text"}}),oe(()=>{var l;return i("div",{class:["v-card-actions",t.class],style:t.style},[(l=u.default)==null?void 0:l.call(u)])}),{}}}),Jt=Ae("v-card-subtitle"),Zt=Ae("v-card-title"),ea=ue({appendAvatar:String,appendIcon:ie,prependAvatar:String,prependIcon:ie,subtitle:String,title:String,...ve(),...we()},"VCardItem"),ta=ne()({name:"VCardItem",props:ea(),setup(t,e){let{slots:u}=e;return oe(()=>{var b;const l=!!(t.prependAvatar||t.prependIcon),C=!!(l||u.prepend),m=!!(t.appendAvatar||t.appendIcon),r=!!(m||u.append),s=!!(t.title||u.title),v=!!(t.subtitle||u.subtitle);return i("div",{class:["v-card-item",t.class],style:t.style},[C&&i("div",{key:"prepend",class:"v-card-item__prepend"},[u.prepend?i(ge,{key:"prepend-defaults",disabled:!l,defaults:{VAvatar:{density:t.density,icon:t.prependIcon,image:t.prependAvatar}}},u.prepend):l&&i(Te,{key:"prepend-avatar",density:t.density,icon:t.prependIcon,image:t.prependAvatar},null)]),i("div",{class:"v-card-item__content"},[s&&i(Zt,{key:"title"},{default:()=>{var f;return[((f=u.title)==null?void 0:f.call(u))??t.title]}}),v&&i(Jt,{key:"subtitle"},{default:()=>{var f;return[((f=u.subtitle)==null?void 0:f.call(u))??t.subtitle]}}),(b=u.default)==null?void 0:b.call(u)]),r&&i("div",{key:"append",class:"v-card-item__append"},[u.append?i(ge,{key:"append-defaults",disabled:!m,defaults:{VAvatar:{density:t.density,icon:t.appendIcon,image:t.appendAvatar}}},u.append):m&&i(Te,{key:"append-avatar",density:t.density,icon:t.appendIcon,image:t.appendAvatar},null)])])}),{}}}),aa=Ae("v-card-text"),la=ue({appendAvatar:String,appendIcon:ie,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:ie,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...nt(),...ve(),...we(),...ot(),...ct(),...ut(),...dt(),...rt(),...vt(),...mt(),...Ve(),...je(),...ft({variant:"elevated"})},"VCard"),Ye=ne()({name:"VCard",directives:{Ripple:ht},props:la(),setup(t,e){let{attrs:u,slots:l}=e;const{themeClasses:C}=Xe(t),{borderClasses:m}=gt(t),{colorClasses:r,colorStyles:s,variantClasses:v}=pt(t),{densityClasses:b}=Ne(t),{dimensionStyles:f}=bt(t),{elevationClasses:M}=yt(t),{loaderClasses:h}=kt(t),{locationStyles:x}=St(t),{positionClasses:$}=Ct(t),{roundedClasses:P}=_t(t),I=Vt(t,u),H=T(()=>t.link!==!1&&I.isLink.value),A=T(()=>!t.disabled&&t.link!==!1&&(t.link||I.isClickable.value));return oe(()=>{const S=H.value?"a":t.tag,g=!!(l.title||t.title),k=!!(l.subtitle||t.subtitle),E=g||k,D=!!(l.append||t.appendAvatar||t.appendIcon),O=!!(l.prepend||t.prependAvatar||t.prependIcon),Y=!!(l.image||t.image),z=E||O||D,d=!!(l.text||t.text);return Qe(i(S,{class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":A.value},C.value,m.value,r.value,b.value,M.value,h.value,$.value,P.value,v.value,t.class],style:[s.value,f.value,x.value,t.style],href:I.href.value,onClick:A.value&&I.navigate,tabindex:t.disabled?-1:void 0},{default:()=>{var n;return[Y&&i("div",{key:"image",class:"v-card__image"},[l.image?i(ge,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},l.image):i(me,{key:"image-img",cover:!0,src:t.image},null)]),i(xt,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:l.loader}),z&&i(ta,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:l.item,prepend:l.prepend,title:l.title,subtitle:l.subtitle,append:l.append}),d&&i(aa,{key:"text"},{default:()=>{var a;return[((a=l.text)==null?void 0:a.call(l))??t.text]}}),(n=l.default)==null?void 0:n.call(l),l.actions&&i(Qt,null,{default:l.actions}),At(A.value,"v-card")]}}),[[Je("ripple"),A.value&&t.ripple]])}),{}}});const Fe=Symbol.for("vuetify:v-tabs"),ia=ue({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Ze(wt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),pe=ne()({name:"VTab",props:ia(),setup(t,e){let{slots:u,attrs:l}=e;const{textColorClasses:C,textColorStyles:m}=Lt(t,"sliderColor"),r=T(()=>t.direction==="horizontal"),s=Q(!1),v=L(),b=L();function f(M){var x,$;let{value:h}=M;if(s.value=h,h){const P=($=(x=v.value)==null?void 0:x.$el.parentElement)==null?void 0:$.querySelector(".v-tab--selected .v-tab__slider"),I=b.value;if(!P||!I)return;const H=getComputedStyle(P).color,A=P.getBoundingClientRect(),S=I.getBoundingClientRect(),g=r.value?"x":"y",k=r.value?"X":"Y",E=r.value?"right":"bottom",D=r.value?"width":"height",O=A[g],Y=S[g],z=O>Y?A[E]-S[E]:A[g]-S[g],d=Math.sign(z)>0?r.value?"right":"bottom":Math.sign(z)<0?r.value?"left":"top":"center",a=(Math.abs(z)+(Math.sign(z)<0?A[D]:S[D]))/Math.max(A[D],S[D])||0,F=A[D]/S[D]||0,de=1.5;Mt(I,{backgroundColor:[H,"currentcolor"],transform:[`translate${k}(${z}px) scale${k}(${F})`,`translate${k}(${z/de}px) scale${k}(${(a-1)/de+1})`,"none"],transformOrigin:Array(3).fill(d)},{duration:225,easing:It})}}return oe(()=>{const[M]=w.filterProps(t);return i(w,ce({symbol:Fe,ref:v,class:["v-tab",t.class],style:t.style,tabindex:s.value?0:-1,role:"tab","aria-selected":String(s.value),active:!1},M,l,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":f}),{default:()=>{var h;return[((h=u.default)==null?void 0:h.call(u))??t.text,!t.hideSlider&&i("div",{ref:b,class:["v-tab__slider",C.value],style:m.value},null)]}})}),{}}});function $e(t){const u=Math.abs(t);return Math.sign(t)*(u/((1/.501-2)*(1-u)+1))}function He(t){let{selectedElement:e,containerSize:u,contentSize:l,isRtl:C,currentScrollOffset:m,isHorizontal:r}=t;const s=r?e.clientWidth:e.clientHeight,v=r?e.offsetLeft:e.offsetTop,b=C&&r?l-v-s:v,f=u+m,M=s+b,h=s*.4;return b<=m?m=Math.max(b-h,0):f<=M&&(m=Math.min(m-(f-M-h),l-u)),m}function sa(t){let{selectedElement:e,containerSize:u,contentSize:l,isRtl:C,isHorizontal:m}=t;const r=m?e.clientWidth:e.clientHeight,s=m?e.offsetLeft:e.offsetTop,v=C&&m?l-s-r/2-u/2:s+r/2-u/2;return Math.min(l-u,Math.max(0,v))}const na=Symbol.for("vuetify:v-slide-group"),Ke=ue({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:na},nextIcon:{type:ie,default:"$next"},prevIcon:{type:ie,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...ve(),...Ve(),...Dt({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),ze=ne()({name:"VSlideGroup",props:Ke(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:u}=e;const{isRtl:l}=et(),{mobile:C}=Ee(),m=Tt(t,t.symbol),r=Q(!1),s=Q(0),v=Q(0),b=Q(0),f=T(()=>t.direction==="horizontal"),{resizeRef:M,contentRect:h}=De(),{resizeRef:x,contentRect:$}=De(),P=T(()=>m.selected.value.length?m.items.value.findIndex(y=>y.id===m.selected.value[0]):-1),I=T(()=>m.selected.value.length?m.items.value.findIndex(y=>y.id===m.selected.value[m.selected.value.length-1]):-1);if(tt){let y=-1;te(()=>[m.selected.value,h.value,$.value,f.value],()=>{cancelAnimationFrame(y),y=requestAnimationFrame(()=>{if(h.value&&$.value){const V=f.value?"width":"height";v.value=h.value[V],b.value=$.value[V],r.value=v.value+1<b.value}if(P.value>=0&&x.value){const V=x.value.children[I.value];P.value===0||!r.value?s.value=0:t.centerActive?s.value=sa({selectedElement:V,containerSize:v.value,contentSize:b.value,isRtl:l.value,isHorizontal:f.value}):r.value&&(s.value=He({selectedElement:V,containerSize:v.value,contentSize:b.value,isRtl:l.value,currentScrollOffset:s.value,isHorizontal:f.value}))}})})}const H=Q(!1);let A=0,S=0;function g(y){const V=f.value?"clientX":"clientY";S=(l.value&&f.value?-1:1)*s.value,A=y.touches[0][V],H.value=!0}function k(y){if(!r.value)return;const V=f.value?"clientX":"clientY",U=l.value&&f.value?-1:1;s.value=U*(S+A-y.touches[0][V])}function E(y){const V=b.value-v.value;s.value<0||!r.value?s.value=0:s.value>=V&&(s.value=V),H.value=!1}function D(){M.value&&(M.value[f.value?"scrollLeft":"scrollTop"]=0)}const O=Q(!1);function Y(y){if(O.value=!0,!(!r.value||!x.value)){for(const V of y.composedPath())for(const U of x.value.children)if(U===V){s.value=He({selectedElement:U,containerSize:v.value,contentSize:b.value,isRtl:l.value,currentScrollOffset:s.value,isHorizontal:f.value});return}}}function z(y){O.value=!1}function d(y){var V;!O.value&&!(y.relatedTarget&&((V=x.value)!=null&&V.contains(y.relatedTarget)))&&a()}function n(y){x.value&&(f.value?y.key==="ArrowRight"?a(l.value?"prev":"next"):y.key==="ArrowLeft"&&a(l.value?"next":"prev"):y.key==="ArrowDown"?a("next"):y.key==="ArrowUp"&&a("prev"),y.key==="Home"?a("first"):y.key==="End"&&a("last"))}function a(y){var V,U,Le,Me,Ie;if(x.value)if(!y)(V=at(x.value)[0])==null||V.focus();else if(y==="next"){const J=(U=x.value.querySelector(":focus"))==null?void 0:U.nextElementSibling;J?J.focus():a("first")}else if(y==="prev"){const J=(Le=x.value.querySelector(":focus"))==null?void 0:Le.previousElementSibling;J?J.focus():a("last")}else y==="first"?(Me=x.value.firstElementChild)==null||Me.focus():y==="last"&&((Ie=x.value.lastElementChild)==null||Ie.focus())}function F(y){const V=s.value+(y==="prev"?-1:1)*v.value;s.value=lt(V,0,b.value-v.value)}const de=T(()=>{let y=s.value>b.value-v.value?-(b.value-v.value)+$e(b.value-v.value-s.value):-s.value;s.value<=0&&(y=$e(-s.value));const V=l.value&&f.value?-1:1;return{transform:`translate${f.value?"X":"Y"}(${V*y}px)`,transition:H.value?"none":"",willChange:H.value?"transform":""}}),fe=T(()=>({next:m.next,prev:m.prev,select:m.select,isSelected:m.isSelected})),he=T(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!C.value;case!0:return r.value||Math.abs(s.value)>0;case"mobile":return C.value||r.value||Math.abs(s.value)>0;default:return!C.value&&(r.value||Math.abs(s.value)>0)}}),We=T(()=>Math.abs(s.value)>0),qe=T(()=>b.value>Math.abs(s.value)+v.value);return oe(()=>i(t.tag,{class:["v-slide-group",{"v-slide-group--vertical":!f.value,"v-slide-group--has-affixes":he.value,"v-slide-group--is-overflowing":r.value},t.class],style:t.style,tabindex:O.value||m.selected.value.length?-1:0,onFocus:d},{default:()=>{var y,V,U;return[he.value&&i("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!We.value}],onClick:()=>F("prev")},[((y=u.prev)==null?void 0:y.call(u,fe.value))??i(Re,null,{default:()=>[i(Pe,{icon:l.value?t.nextIcon:t.prevIcon},null)]})]),i("div",{key:"container",ref:M,class:"v-slide-group__container",onScroll:D},[i("div",{ref:x,class:"v-slide-group__content",style:de.value,onTouchstartPassive:g,onTouchmovePassive:k,onTouchendPassive:E,onFocusin:Y,onFocusout:z,onKeydown:n},[(V=u.default)==null?void 0:V.call(u,fe.value)])]),he.value&&i("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!qe.value}],onClick:()=>F("next")},[((U=u.next)==null?void 0:U.call(u,fe.value))??i(Re,null,{default:()=>[i(Pe,{icon:l.value?t.prevIcon:t.nextIcon},null)]})])]}})),{selected:m.selected,scrollTo:F,scrollOffset:s,focus:a}}});function oa(t){return t?t.map(e=>typeof e=="string"?{title:e,value:e}:e):[]}const ca=ue({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ke({mandatory:"force"}),...we(),...Ve()},"VTabs"),ua=ne()({name:"VTabs",props:ca(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:u}=e;const l=it(t,"modelValue"),C=T(()=>oa(t.items)),{densityClasses:m}=Ne(t),{backgroundColorClasses:r,backgroundColorStyles:s}=Rt(X(t,"bgColor"));return Be({VTab:{color:X(t,"color"),direction:X(t,"direction"),stacked:X(t,"stacked"),fixed:X(t,"fixedTabs"),sliderColor:X(t,"sliderColor"),hideSlider:X(t,"hideSlider")}}),oe(()=>{const[v]=ze.filterProps(t);return i(ze,ce(v,{modelValue:l.value,"onUpdate:modelValue":b=>l.value=b,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},m.value,r.value,t.class],style:[{"--v-tabs-height":st(t.height)},s.value,t.style],role:"tablist",symbol:Fe}),{default:()=>[u.default?u.default():C.value.map(b=>i(pe,ce(b,{key:b.title}),null))]})}),{}}}),da={class:"container"},ra={class:"column"},va={class:"margin spread"},ma={class:"row-in-call"},fa=c("i",{class:"center icon-cog-gear"},null,-1),ha=c("h3",null,"Settings",-1),ga={class:"users-container"},pa=c("i",{class:"icon-users users"},null,-1),ba={class:"button-wrapper"},ya={class:"tab-container"},ka={key:0},Sa={class:"basic-flex"},Ca={class:"even-spacing"},_a={class:"video-container"},Va={class:"video-container"},xa={class:"controls-container"},Aa=c("i",{class:"center icon-caret-left-md"},null,-1),wa={class:"row-center"},La=c("i",{class:"center icon-caret-right-md"},null,-1),Ma={key:1,class:"chat-container"},Ia=c("div",{class:"chat-header"},[c("h3",null,"Chat")],-1),Da={class:"chat-body"},Ta={class:"chat-footer"},Ra={class:"tab-buttons"},Z=2,Pa=re({__name:"InCallPortrait",setup(t){const e=be(),u=ye(),l=ke("liveSwitch");let C=null,m=null;const r=e.state.localMedia;let s=L({});const v=L(1);let b=L("100%");const f=L("");let M=L([]);const h=L(1),x=L("GALLERY"),$=T(()=>e.state.pinLocal||h.value===1),P=T(()=>e.state.pinLocal?v.value-1:Math.ceil(v.value/Z));te(e.state.pinLocal,A);function I(){h.value*Z-1<v.value&&(h.value++,A())}function H(){h.value>1&&(h.value--,A())}function A(){let d=new Array;if(e.state.pinLocal||h.value===1)for(let n in s.value){let a=s.value[n];a.index===h.value&&d.push(a)}else for(let n in s.value){let a=s.value[n];(a.index===h.value*Z-Z||a.index===h.value*Z-1)&&d.push(a)}e.commit("setVideoList",d)}function S(d){x.value=d.target.innerText}te(v,function(){const d=Math.ceil(Math.sqrt(v.value)),n=100/d;b.value="calc("+n+"% - "+d*5+"px)"});async function g(){await l.disconnectFromMeeting(s.value,C,r),r.destroy(),e.commit("resetStore"),u.push("/")}async function k(d){const n=Object.keys(s.value)[0],a=s.value[n],F=await l.getAudioSink(d,a);l.updateSpeaker(s.value,F)}function E(d){s.value[d.getId()].remoteMedia.destroy(),delete s.value[d.getId()],v.value--}function D(){f.value.length!==0&&(l.sendChat(m,e.state.displayName,f.value),f.value="")}function O(d,n){let a=d.getRemoteConnectionInfo().getUserAlias();v.value===1&&e.commit("setVideoList",[{connection:d,media:n,index:v.value,displayName:a}]),s.value[d.getId()]={connection:d,remoteMedia:n,index:v.value++,displayName:a},z(n),l.createDownStreamCloseHandler(d,E)}function Y(d){var n=JSON.parse(d);M.value.push({user:n.from,message:n.text})}function z(d){e.state.speakerList.length===0&&e.commit("populateSpeakerList",d)}return Se(async()=>{C=await l.registerClient(e.state.displayName,e.state.channelId),m=await l.getChannel(C),l.openSfuUpstreamConnection(e.state.localMedia,m),l.createDownStreamOpenHandler(m,O),e.commit("setLocalMedia",r),e.commit("populateCameraList"),e.commit("populateMicrophoneList"),e.commit("setActiveVideoDevice",r.getVideoSourceInput().getId()),e.commit("setActiveAudioDevice",r.getAudioSourceInput().getId()),e.commit("setVideoMuted",r.getVideoMuted()),e.commit("setAudioMuted",r.getAudioMuted()),l.addIncomingChatHandler(m,Y)}),(d,n)=>(_(),R("div",da,[c("div",ra,[i(me,{src:Oe,class:"logo-in-call liveswitch"}),c("div",va,[c("div",ma,[i(Ge,{"close-on-content-click":!1,location:"bottom"},{activator:p(({props:a})=>[i(w,ce(a,{icon:"",class:"icon liveswitch",flat:""}),{default:p(()=>[fa]),_:2},1040)]),default:p(()=>[i(Ye,{class:"settings-menu-in-call"},{default:p(()=>[i(Ue,null,{default:p(()=>[i(j,null,{default:p(()=>[ha]),_:1}),i(j,null,{default:p(()=>[i(q,{label:"Camera",class:"margin input-in-call liveswitch","hide-details":"auto",items:o(e).state.cameraList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeVideoDevice,"onUpdate:modelValue":[n[0]||(n[0]=a=>o(e).state.activeVideoDevice=a),n[1]||(n[1]=a=>o(e).commit("changeCamera"))]},null,8,["items","modelValue"])]),_:1}),i(j,null,{default:p(()=>[i(q,{label:"Microphone",class:"margin input-in-call liveswitch","hide-details":"auto",items:o(e).state.microphoneList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeAudioDevice,"onUpdate:modelValue":[n[2]||(n[2]=a=>o(e).state.activeAudioDevice=a),n[3]||(n[3]=a=>o(e).commit("changeMicrophone"))]},null,8,["items","modelValue"])]),_:1}),i(j,null,{default:p(()=>[o(e).state.speakerList.length>0?(_(),N(q,{key:0,label:"Speaker",class:"margin input-in-call liveswitch","hide-details":"auto",items:o(e).state.speakerList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeSpeakerDevice,"onUpdate:modelValue":[n[4]||(n[4]=a=>o(e).state.activeSpeakerDevice=a),k]},null,8,["items","modelValue"])):W("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),c("div",ga,[pa,G(" "+K(v.value),1)])]),c("div",ba,[i(w,{class:"leave-button liveswitch",onClick:g},{default:p(()=>[G("Leave")]),_:1})])]),c("div",ya,[x.value==="GALLERY"?(_(),R("div",ka,[c("div",Sa,[c("div",Ca,[c("div",_a,[o(e).state.localMedia&&$.value?(_(),N(se,{key:0,"ask-height":"235px","ask-width":"320px",maxLabelLength:7,"local-video":o(e).state.localMedia,userName:"Me"},null,8,["local-video"])):W("",!0)]),c("div",Va,[o(e).state.videoList?(_(!0),R(ae,{key:0},le(o(e).state.videoList,a=>(_(),N(se,{remoteVideo:a.media,index:a.index,userName:a.displayName,connection:a.connection,maxLabelLength:7,"ask-height":"235px","ask-width":"320px",maxIndex:Z},null,8,["remoteVideo","index","userName","connection"]))),256)):W("",!0)])])]),c("div",xa,[i(w,{class:B(["margin align-left liveswitch",h.value===1?"inactive-button":"active-button"]),icon:"",onClick:H},{default:p(()=>[Aa]),_:1},8,["class"]),c("div",wa,[i(w,{class:"margin active-button liveswitch",icon:"",onClick:n[5]||(n[5]=a=>o(e).commit("toggleLocalVideoMute"))},{default:p(()=>[c("i",{class:B(["center",o(e).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1}),i(w,{class:"margin active-button liveswitch",icon:"",onClick:n[6]||(n[6]=a=>o(e).commit("toggleLocalAudioMute"))},{default:p(()=>[c("i",{class:B(["center",o(e).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),i(w,{class:B(["margin active-button align-right liveswitch",h.value===P.value?"inactive-button":"active-button"]),icon:"",onClick:I},{default:p(()=>[La]),_:1},8,["class"])])])):(_(),R("div",Ma,[Ia,c("div",Da,[(_(!0),R(ae,null,le(o(M),a=>(_(),R("div",null,[c("div",{class:B(["chat-message",a.user===o(e).state.displayName?"my-chat":"other-chat"])},K(a.user)+": "+K(a.message),3)]))),256))]),c("div",Ta,[i(xe,{label:"Chat Message",clearable:"",class:"margin chat-input liveswitch","hide-details":"auto",modelValue:f.value,"onUpdate:modelValue":n[7]||(n[7]=a=>f.value=a),onKeydown:Ce(_e(D,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),i(w,{class:"chat-button liveswitch",onClick:D},{default:p(()=>[G("Send")]),_:1})])]))]),c("div",Ra,[i(ua,{"fixed-tabs":"","selected-class":"activeTab",class:"tabs",onClick:S},{default:p(()=>[i(pe,{value:"gallery"},{default:p(()=>[G("Gallery")]),_:1}),i(pe,{value:"chat"},{default:p(()=>[G("Chat")]),_:1})]),_:1})])])]))}}),$a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATLSURBVHgBzVrtcdw2EH3U+L/jCkKlgERxA6bVQKQKxLgB0S4goSqQ1EBySgGR3UDCVCC5gYgd+FwBjMclxY8jsCB5N3dvBpwTAQJ8u4vdxVIRDgGZ4fU7RLiAwZn9fVL9LXis2x1uosI1RYR9Q0j8zl9oX96Ff217ZwmVw479ERECx7b9DdFAKIx9619xHd11b+6HSEviH9tiTMcGmTAimaHE2Na2FVa1a8xFOIkb264g5pZCzK+LL7a9bszsBdwLcoJL9G13bR98hWWg8P6An8SVXSd/XjMzJPTGtqQz5lU9zyn/OBqdJjOxvT7YlqO/AUssQbuxE8+opw6JLj6P3EtqgY8QERL0DvHIg/NNSkCTuvT0k+k7x/3PjmdSXsY0kmPeBgwBteFzsaUvVoyAZvojf/SJiDYusAvoc9MTXXn6XQKIeRlqJMHukKsjDP7z9L709G0Q0QJTjPl4o/R/GovYNWhCP3me3SCipQhx4yUmITNn8AuBZvURfriE/JWXIZEQrzQlnWig7bv1MOV4hrjsGG5BVN5sSOQROs4wBbLJtWc0bSSO+9Qk490GEW1C4mKieSVKP0X+l6ef++M3z9OVg+gTkRyqgB8kkSEcl0q/O3aIWSVwm9Vz3jcWEH2+vH05MRk/ZIy2pz55+nzaoFk976tNIiKdW/hBrdxDh6Y541xLtJHCbZpl10EcOQbl0Df+iV3sT2XML0p/MRo72lTfp42e5YwTEbs7h57tpnbR+9HNn5kEeuy4c/RpqX45dNcujaCW1FvoZOhaH0b2TAoNYylJZhoSieMpHqhOhzfdRAgh8zPglFyDGDxH0NRaQppZ9VMSmlNmmsNS6nhG0vxFxYfMcONeIizfKuCPH/0zt+wJan/KybGHacUHkXaO5an+k20/QF46qedLPONpTh8siZVrwDQiDbZHKARMQWhOXi86j0gDIZRAl+gc0HPeukxpiO3VtVpS19CPAz4UVUpvqhJpcI0g8rwYXyZGm2Ks61Y6D0BC5gnhKOs56YZpOh/n1sxeDF6kW0hOnE9lZl0vzBcoOklfSEryGiKMpRWZHqLOy1HyzJ9iTEeJ1uXGnnGU+Dl2ANGIpBMkMde2Y4RE8ggr7AiRUpBrUKBNVTiu+/0iFDSnY+wI1EgOX3IGG4HHDj6ixRThsURLcxaBGqGXiR3955aE//grGmU6n8CP0q6WO4sMC0EiBq6FQ03BL4whnF+dloDZr8sNhrnHzKSY5umYHA4z5cUgEZeqT9SFxGVfYx5S8GPPe7OVfI1EbuCW/r2TzHvDlJ5m4q+u+zV7bEPkyq7x/1LtSECUs4ZPsis78tEuyvIktUApau6Xkf9tPU5z7+06cuYoMRHdyJ5j8zvdXDBrzTpzxxBBhVYpV5hIqJ80hgVHH0q44o7Mn2OasFYQoail3MixYIppZ4yiSj+0GCFHWtYA+G09Rjge7Py3VbHCoaVIWZj2nUD2xfedxUtIOX966t1W13PMO2GW9brdb4ovt3ewmgohlGM7+/Jhf0SI5f8BQXCSD/sl0kCKcvRqWuV+DEyPTg+DCCHaoXsmoTjwKak6Wq92hEPBTSVTZtoMoiEZcqWJxjUfjka6aD/wpJDSazeLGK2yHCaRLpr/rmPzRPpvTn6IoHFFRiQAAAAASUVORK5CYII=",Ha={class:"container"},za={key:0,class:"tab-container"},Ba={class:"video-container"},Ea={class:"basic-flex"},Oa={class:"controls-container"},Na=c("i",{class:"center icon-caret-left-md"},null,-1),Ua={class:"row-center"},Ga=c("i",{class:"center icon-caret-right-md"},null,-1),Ya={key:1},Fa={class:"chat-container"},Ka=c("div",{class:"chat-header"},[c("h3",null,"Chat")],-1),Wa={class:"chat-body"},qa={class:"basic-flex"},ja={class:"right-column"},Xa={class:"center users-container"},Qa=c("i",{class:"icon-users users"},null,-1),Ja=c("i",{class:"center icon-cog-gear"},null,-1),Za=c("h3",null,"Settings",-1),el=c("i",{class:"center icon-chat"},null,-1),tl=c("i",{class:"center icon-video"},null,-1),ee=2,al=re({__name:"InCallLandscape",setup(t){const e=be(),u=ye(),l=ke("liveSwitch");let C=null,m=null;const r=e.state.localMedia;let s=L({});const v=L(1);let b=L("100%");const f=L("");let M=L([]);const h=L(1),x=L("GALLERY"),$=T(()=>e.state.pinLocal||h.value===1),P=T(()=>e.state.pinLocal?v.value-1:Math.ceil(v.value/ee));te(e.state.pinLocal,A);function I(){h.value*ee-1<v.value&&(h.value++,A())}function H(){h.value>1&&(h.value--,A())}function A(){let d=new Array;if(e.state.pinLocal||h.value===1)for(let n in s.value){let a=s.value[n];a.index===h.value&&d.push(a)}else for(let n in s.value){let a=s.value[n];(a.index===h.value*ee-ee||a.index===h.value*ee-1)&&d.push(a)}e.commit("setVideoList",d)}function S(d){x.value=d}te(v,function(){const d=Math.ceil(Math.sqrt(v.value)),n=100/d;b.value="calc("+n+"% - "+d*5+"px)"});async function g(){await l.disconnectFromMeeting(s.value,C,r),r.destroy(),e.commit("resetStore"),u.push("/")}async function k(d){const n=Object.keys(s.value)[0],a=s.value[n],F=await l.getAudioSink(d,a);l.updateSpeaker(s.value,F)}function E(d){s.value[d.getId()].remoteMedia.destroy(),delete s.value[d.getId()],v.value--}function D(){f.value.length!==0&&(l.sendChat(m,e.state.displayName,f.value),f.value="")}function O(d,n){let a=d.getRemoteConnectionInfo().getUserAlias();v.value===1&&e.commit("setVideoList",[{connection:d,media:n,index:v.value,displayName:a}]),s.value[d.getId()]={connection:d,remoteMedia:n,index:v.value++,displayName:a},z(n),l.createDownStreamCloseHandler(d,E)}function Y(d){var n=JSON.parse(d);M.value.push({user:n.from,message:n.text})}function z(d){e.state.speakerList.length===0&&e.commit("populateSpeakerList",d)}return Se(async()=>{C=await l.registerClient(e.state.displayName,e.state.channelId),m=await l.getChannel(C),l.openSfuUpstreamConnection(e.state.localMedia,m),l.createDownStreamOpenHandler(m,O),e.commit("setLocalMedia",r),e.commit("populateCameraList"),e.commit("populateMicrophoneList"),e.commit("setActiveVideoDevice",r.getVideoSourceInput().getId()),e.commit("setActiveAudioDevice",r.getAudioSourceInput().getId()),e.commit("setVideoMuted",r.getVideoMuted()),e.commit("setAudioMuted",r.getAudioMuted()),l.addIncomingChatHandler(m,Y)}),(d,n)=>(_(),R("div",Ha,[c("div",null,[x.value=="GALLERY"?(_(),R("div",za,[c("div",Ba,[c("div",null,[o(e).state.localMedia&&$.value?(_(),N(se,{key:0,"ask-height":"265px","ask-width":"280px",maxLabelLength:5,"local-video":o(e).state.localMedia,userName:"Me"},null,8,["local-video"])):W("",!0)]),c("div",Ea,[o(e).state.videoList?(_(!0),R(ae,{key:0},le(o(e).state.videoList,a=>(_(),N(se,{remoteVideo:a.media,index:a.index,userName:a.displayName,connection:a.connection,"ask-height":"265px","ask-width":"280px",maxLabelLength:5,maxIndex:ee},null,8,["remoteVideo","index","userName","connection"]))),256)):W("",!0)])]),c("div",Oa,[i(w,{class:B(["margin align-left liveswitch",h.value===1?"inactive-button":"active-button"]),icon:"",onClick:H},{default:p(()=>[Na]),_:1},8,["class"]),c("div",Ua,[i(w,{class:"margin active-button liveswitch",icon:"",onClick:n[0]||(n[0]=a=>o(e).commit("toggleLocalVideoMute"))},{default:p(()=>[c("i",{class:B(["center",o(e).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1}),i(w,{class:"margin active-button liveswitch",icon:"",onClick:n[1]||(n[1]=a=>o(e).commit("toggleLocalAudioMute"))},{default:p(()=>[c("i",{class:B(["center",o(e).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),i(w,{class:B(["margin align-right liveswitch",h.value===P.value?"inactive-button":"active-button"]),icon:"",onClick:I},{default:p(()=>[Ga]),_:1},8,["class"])])])):(_(),R("div",Ya,[c("div",Fa,[Ka,c("div",Wa,[(_(!0),R(ae,null,le(o(M),a=>(_(),R("div",null,[c("div",{class:B(["chat-message",a.user===o(e).state.displayName?"my-chat":"other-chat"])},K(a.user)+": "+K(a.message),3)]))),256))]),c("div",qa,[i(xe,{label:"Chat Message",clearable:"",class:"chat-input liveswitch","hide-details":"auto",modelValue:f.value,"onUpdate:modelValue":n[2]||(n[2]=a=>f.value=a),onKeydown:Ce(_e(D,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),i(w,{class:"chat-button liveswitch",onClick:D},{default:p(()=>[G("Send")]),_:1})])])]))]),c("div",ja,[i(me,{src:$a,class:"logo-in-call liveswitch"}),c("span",Xa,[Qa,G(" "+K(v.value),1)]),i(Ge,{"close-on-content-click":!1,location:"left"},{activator:p(({props:a})=>[i(w,ce({class:"margin center icon liveswitch"},a,{icon:"",flat:""}),{default:p(()=>[Ja]),_:2},1040)]),default:p(()=>[i(Ye,{class:"settings-menu-in-call"},{default:p(()=>[i(Ue,null,{default:p(()=>[i(j,null,{default:p(()=>[Za]),_:1}),i(j,null,{default:p(()=>[i(q,{label:"Camera",class:"margin input-in-call liveswitch","hide-details":"auto",items:o(e).state.cameraList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeVideoDevice,"onUpdate:modelValue":[n[3]||(n[3]=a=>o(e).state.activeVideoDevice=a),n[4]||(n[4]=a=>o(e).commit("changeCamera"))]},null,8,["items","modelValue"])]),_:1}),i(j,null,{default:p(()=>[i(q,{label:"Microphone",class:"margin input-in-call liveswitch","hide-details":"auto",items:o(e).state.microphoneList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeAudioDevice,"onUpdate:modelValue":[n[5]||(n[5]=a=>o(e).state.activeAudioDevice=a),n[6]||(n[6]=a=>o(e).commit("changeMicrophone"))]},null,8,["items","modelValue"])]),_:1}),i(j,null,{default:p(()=>[o(e).state.speakerList.length>0?(_(),N(q,{key:0,label:"Speaker",class:"margin input-in-call liveswitch","hide-details":"auto",items:o(e).state.speakerList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeSpeakerDevice,"onUpdate:modelValue":[n[7]||(n[7]=a=>o(e).state.activeSpeakerDevice=a),k]},null,8,["items","modelValue"])):W("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),i(w,{icon:"",class:"center icon liveswitch",flat:"",onClick:n[8]||(n[8]=a=>S("CHAT"))},{default:p(()=>[el]),_:1}),i(w,{icon:"",class:"center icon liveswitch",flat:"",onClick:n[9]||(n[9]=a=>S("GALLERY"))},{default:p(()=>[tl]),_:1}),i(w,{class:"center leave-button liveswitch",onClick:g},{default:p(()=>[G("Leave")]),_:1})])]))}}),sl=re({__name:"InCall",setup(t){const{mobile:e}=Ee(),u=L(e&&window.innerHeight>window.innerWidth);return(l,C)=>o(e)?u.value?(_(),N(Pa,{key:1})):(_(),N(al,{key:2})):(_(),N(Xt,{key:0}))}});export{sl as default};
