import{d as re,e as be,f as ke,i as ye,r as w,w as te,o as Se,j as _,k as T,l as c,b as n,t as G,z as W,s as p,q as o,y as N,A as q,F as ae,B as le,n as B,C as qe,v as je,a as ie,m as ve,D as He,u as oe,p as ue,I as ne,E as Ce,G as Xe,H as Ke,J as D,K as Qe,L as Je,M as Ze,N as Q,O as ce,P as et,x as ze,Q as Ie,R as tt,S as at,T as lt,U as nt,V as K,W as st}from"./index-dddd36ca.js";import{_ as Be,V as me,e as M,a as se,d as j,b as _e,g as Ve,h as xe,i as Le,j as he,k as it,l as ot,n as ct,o as ut,p as dt,q as rt,r as vt,s as mt,t as ft,R as gt,u as ht,v as pt,w as Ee,x as bt,y as kt,z as yt,A as St,B as Ct,C as _t,D as Vt,L as xt,E as At,F as Mt,G as wt,H as It,I as Lt,J as Dt,K as Tt,M as De,N as Te,O as Rt,P as Oe,Q as X,S as Ne}from"./VSelect-90b3b833.js";const Pt={class:"container"},$t={class:"left-column"},Ht={class:"flex-center"},zt={class:"row-spread"},Bt={class:"user-counter"},Et=c("i",{class:"icon-users users"},null,-1),Ot={class:"video-grid"},Nt={class:"right-column"},Ut={class:"settings-menu-in-call"},Gt={class:"basic-flex"},Yt={class:"basic-flex"},Ft={class:"basic-flex"},Wt={class:"chat-container"},qt=c("div",{class:"chat-header"},[c("h2",{class:"margin"},"Chat")],-1),jt={class:"chat-body"},Xt={class:"chat-footer"},Kt=re({__name:"InCall",setup(t){const e=be(),u=ke(),a=ye("liveSwitch");let C=null,r=null;const d=e.state.localMedia;let s=w({});const m=w(1);let b=w("100%");const f=w("");let I=w([]);te(m,function(){const S=Math.ceil(Math.sqrt(m.value)),h=100/S;b.value="calc("+h+"% - "+S*5+"px)"});async function g(){await a.disconnectFromMeeting(s.value,C,d),d.destroy(),e.commit("resetStore"),u.push("/")}async function x(S){const h=Object.keys(s.value)[0],y=s.value[h],E=await a.getAudioSink(S,y);a.updateSpeaker(s.value,E)}function P(S){s.value[S.getId()].remoteMedia.destroy(),delete s.value[S.getId()],m.value--}function R(){f.value.length!==0&&(a.sendChat(r,e.state.displayName,f.value),f.value="")}function L(S,h){let y=S.getRemoteConnectionInfo().getUserAlias();s.value[S.getId()]={connection:S,remoteMedia:h,index:m.value++,displayName:y},A(h),a.createDownStreamCloseHandler(S,P)}function $(S){var h=JSON.parse(S);I.value.push({user:h.from,message:h.text})}function A(S){e.state.speakerList.length===0&&e.commit("populateSpeakerList",S)}return Se(async()=>{C=await a.registerClient(e.state.displayName,e.state.channelId),r=await a.getChannel(C),a.openSfuUpstreamConnection(e.state.localMedia,r),a.createDownStreamOpenHandler(r,L),e.commit("setLocalMedia",d),e.commit("populateCameraList"),e.commit("populateMicrophoneList"),e.commit("setActiveVideoDevice",d.getVideoSourceInput().getId()),e.commit("setActiveAudioDevice",d.getAudioSourceInput().getId()),e.commit("setVideoMuted",d.getVideoMuted()),e.commit("setAudioMuted",d.getAudioMuted()),a.addIncomingChatHandler(r,$)}),(S,h)=>(_(),T("div",Pt,[c("div",$t,[c("div",Ht,[n(me,{src:Be,class:"logo-in-call"})]),c("div",zt,[c("div",Bt,[Et,G(" "+W(m.value),1)]),n(M,{class:"leave-button liveswitch",onClick:g},{default:p(()=>[G("Leave Call")]),_:1})]),c("div",Ot,[o(e).state.localMedia?(_(),N(se,{key:0,class:"video","local-video":o(e).state.localMedia,userName:"Me",askHeight:o(b),askWidth:o(b)},null,8,["local-video","askHeight","askWidth"])):q("",!0),o(s)?(_(!0),T(ae,{key:1},le(o(s),y=>(_(),N(se,{class:"video",remoteVideo:y.remoteMedia,index:y.index,userName:y.displayName,connection:y.connection,askHeight:o(b),askWidth:o(b)},null,8,["remoteVideo","index","userName","connection","askHeight","askWidth"]))),256)):q("",!0)])]),c("div",Nt,[c("div",Ut,[c("div",Gt,[n(j,{label:"Camera",class:"margin input liveswitch","hide-details":"auto",items:o(e).state.cameraList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeVideoDevice,"onUpdate:modelValue":[h[0]||(h[0]=y=>o(e).state.activeVideoDevice=y),h[1]||(h[1]=y=>o(e).commit("changeCamera"))]},null,8,["items","modelValue"]),n(M,{class:"margin button liveswitch",icon:"",onClick:h[2]||(h[2]=y=>o(e).commit("toggleLocalVideoMute"))},{default:p(()=>[c("i",{class:B(["center",o(e).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1})]),c("div",Yt,[n(j,{label:"Microphone",class:"margin input liveswitch","hide-details":"auto",items:o(e).state.microphoneList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeAudioDevice,"onUpdate:modelValue":[h[3]||(h[3]=y=>o(e).state.activeAudioDevice=y),h[4]||(h[4]=y=>o(e).commit("changeMicrophone"))]},null,8,["items","modelValue"]),n(M,{class:"margin button liveswitch",icon:"",onClick:h[5]||(h[5]=y=>o(e).commit("toggleLocalAudioMute"))},{default:p(()=>[c("i",{class:B(["center",o(e).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),c("div",Ft,[o(e).state.speakerList.length>0?(_(),N(j,{key:0,label:"Speaker",class:"margin input liveswitch","hide-details":"auto",items:o(e).state.speakerList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeSpeakerDevice,"onUpdate:modelValue":[h[6]||(h[6]=y=>o(e).state.activeSpeakerDevice=y),x]},null,8,["items","modelValue"])):q("",!0)])]),c("div",Wt,[qt,c("div",jt,[(_(!0),T(ae,null,le(o(I),y=>(_(),T("div",null,[c("div",{class:B(["chat-message",y.user===o(e).state.displayName?"my-chat":"other-chat"])},W(y.user)+": "+W(y.message),3)]))),256))]),c("div",Xt,[n(_e,{label:"Chat Message",clearable:"",class:"margin chat-input liveswitch","hide-details":"auto",modelValue:f.value,"onUpdate:modelValue":h[7]||(h[7]=y=>f.value=y),onKeydown:qe(je(R,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),n(M,{class:"chat-button liveswitch",onClick:R},{default:p(()=>[G(" Send ")]),_:1})])])])]))}});const Qt=ie()({name:"VCardActions",props:ve(),setup(t,e){let{slots:u}=e;return He({VBtn:{variant:"text"}}),oe(()=>{var a;return n("div",{class:["v-card-actions",t.class],style:t.style},[(a=u.default)==null?void 0:a.call(u)])}),{}}}),Jt=Ve("v-card-subtitle"),Zt=Ve("v-card-title"),ea=ue({appendAvatar:String,appendIcon:ne,prependAvatar:String,prependIcon:ne,subtitle:String,title:String,...ve(),...xe()},"VCardItem"),ta=ie()({name:"VCardItem",props:ea(),setup(t,e){let{slots:u}=e;return oe(()=>{var b;const a=!!(t.prependAvatar||t.prependIcon),C=!!(a||u.prepend),r=!!(t.appendAvatar||t.appendIcon),d=!!(r||u.append),s=!!(t.title||u.title),m=!!(t.subtitle||u.subtitle);return n("div",{class:["v-card-item",t.class],style:t.style},[C&&n("div",{key:"prepend",class:"v-card-item__prepend"},[u.prepend?n(he,{key:"prepend-defaults",disabled:!a,defaults:{VAvatar:{density:t.density,icon:t.prependIcon,image:t.prependAvatar}}},u.prepend):a&&n(Le,{key:"prepend-avatar",density:t.density,icon:t.prependIcon,image:t.prependAvatar},null)]),n("div",{class:"v-card-item__content"},[s&&n(Zt,{key:"title"},{default:()=>{var f;return[((f=u.title)==null?void 0:f.call(u))??t.title]}}),m&&n(Jt,{key:"subtitle"},{default:()=>{var f;return[((f=u.subtitle)==null?void 0:f.call(u))??t.subtitle]}}),(b=u.default)==null?void 0:b.call(u)]),d&&n("div",{key:"append",class:"v-card-item__append"},[u.append?n(he,{key:"append-defaults",disabled:!r,defaults:{VAvatar:{density:t.density,icon:t.appendIcon,image:t.appendAvatar}}},u.append):r&&n(Le,{key:"append-avatar",density:t.density,icon:t.appendIcon,image:t.appendAvatar},null)])])}),{}}}),aa=Ve("v-card-text"),la=ue({appendAvatar:String,appendIcon:ne,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:ne,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...it(),...ve(),...xe(),...ot(),...ct(),...ut(),...dt(),...rt(),...vt(),...mt(),...Ce(),...Xe(),...ft({variant:"elevated"})},"VCard"),Ue=ie()({name:"VCard",directives:{Ripple:gt},props:la(),setup(t,e){let{attrs:u,slots:a}=e;const{themeClasses:C}=Ke(t),{borderClasses:r}=ht(t),{colorClasses:d,colorStyles:s,variantClasses:m}=pt(t),{densityClasses:b}=Ee(t),{dimensionStyles:f}=bt(t),{elevationClasses:I}=kt(t),{loaderClasses:g}=yt(t),{locationStyles:x}=St(t),{positionClasses:P}=Ct(t),{roundedClasses:R}=_t(t),L=Vt(t,u),$=D(()=>t.link!==!1&&L.isLink.value),A=D(()=>!t.disabled&&t.link!==!1&&(t.link||L.isClickable.value));return oe(()=>{const S=$.value?"a":t.tag,h=!!(a.title||t.title),y=!!(a.subtitle||t.subtitle),E=h||y,H=!!(a.append||t.appendAvatar||t.appendIcon),O=!!(a.prepend||t.prependAvatar||t.prependIcon),Y=!!(a.image||t.image),z=E||O||H,v=!!(a.text||t.text);return Qe(n(S,{class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":A.value},C.value,r.value,d.value,b.value,I.value,g.value,P.value,R.value,m.value,t.class],style:[s.value,f.value,x.value,t.style],href:L.href.value,onClick:A.value&&L.navigate,tabindex:t.disabled?-1:void 0},{default:()=>{var i;return[Y&&n("div",{key:"image",class:"v-card__image"},[a.image?n(he,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},a.image):n(me,{key:"image-img",cover:!0,src:t.image},null)]),n(xt,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:a.loader}),z&&n(ta,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:a.item,prepend:a.prepend,title:a.title,subtitle:a.subtitle,append:a.append}),v&&n(aa,{key:"text"},{default:()=>{var l;return[((l=a.text)==null?void 0:l.call(a))??t.text]}}),(i=a.default)==null?void 0:i.call(a),a.actions&&n(Qt,null,{default:a.actions}),At(A.value,"v-card")]}}),[[Je("ripple"),A.value&&t.ripple]])}),{}}});const Ge=Symbol.for("vuetify:v-tabs"),na=ue({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Ze(Mt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),pe=ie()({name:"VTab",props:na(),setup(t,e){let{slots:u,attrs:a}=e;const{textColorClasses:C,textColorStyles:r}=wt(t,"sliderColor"),d=D(()=>t.direction==="horizontal"),s=Q(!1),m=w(),b=w();function f(I){var x,P;let{value:g}=I;if(s.value=g,g){const R=(P=(x=m.value)==null?void 0:x.$el.parentElement)==null?void 0:P.querySelector(".v-tab--selected .v-tab__slider"),L=b.value;if(!R||!L)return;const $=getComputedStyle(R).color,A=R.getBoundingClientRect(),S=L.getBoundingClientRect(),h=d.value?"x":"y",y=d.value?"X":"Y",E=d.value?"right":"bottom",H=d.value?"width":"height",O=A[h],Y=S[h],z=O>Y?A[E]-S[E]:A[h]-S[h],v=Math.sign(z)>0?d.value?"right":"bottom":Math.sign(z)<0?d.value?"left":"top":"center",l=(Math.abs(z)+(Math.sign(z)<0?A[H]:S[H]))/Math.max(A[H],S[H])||0,F=A[H]/S[H]||0,de=1.5;It(L,{backgroundColor:[$,"currentcolor"],transform:[`translate${y}(${z}px) scale${y}(${F})`,`translate${y}(${z/de}px) scale${y}(${(l-1)/de+1})`,"none"],transformOrigin:Array(3).fill(v)},{duration:225,easing:Lt})}}return oe(()=>{const[I]=M.filterProps(t);return n(M,ce({symbol:Ge,ref:m,class:["v-tab",t.class],style:t.style,tabindex:s.value?0:-1,role:"tab","aria-selected":String(s.value),active:!1},I,a,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":f}),{default:()=>{var g;return[((g=u.default)==null?void 0:g.call(u))??t.text,!t.hideSlider&&n("div",{ref:b,class:["v-tab__slider",C.value],style:r.value},null)]}})}),{}}});function Re(t){const u=Math.abs(t);return Math.sign(t)*(u/((1/.501-2)*(1-u)+1))}function Pe(t){let{selectedElement:e,containerSize:u,contentSize:a,isRtl:C,currentScrollOffset:r,isHorizontal:d}=t;const s=d?e.clientWidth:e.clientHeight,m=d?e.offsetLeft:e.offsetTop,b=C&&d?a-m-s:m,f=u+r,I=s+b,g=s*.4;return b<=r?r=Math.max(b-g,0):f<=I&&(r=Math.min(r-(f-I-g),a-u)),r}function sa(t){let{selectedElement:e,containerSize:u,contentSize:a,isRtl:C,isHorizontal:r}=t;const d=r?e.clientWidth:e.clientHeight,s=r?e.offsetLeft:e.offsetTop,m=C&&r?a-s-d/2-u/2:s+d/2-u/2;return Math.min(a-u,Math.max(0,m))}const ia=Symbol.for("vuetify:v-slide-group"),Ye=ue({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:ia},nextIcon:{type:ne,default:"$next"},prevIcon:{type:ne,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...ve(),...Ce(),...Dt({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),$e=ie()({name:"VSlideGroup",props:Ye(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:u}=e;const{isRtl:a}=et(),{mobile:C}=ze(),r=Tt(t,t.symbol),d=Q(!1),s=Q(0),m=Q(0),b=Q(0),f=D(()=>t.direction==="horizontal"),{resizeRef:I,contentRect:g}=Ie(),{resizeRef:x,contentRect:P}=Ie(),R=D(()=>r.selected.value.length?r.items.value.findIndex(k=>k.id===r.selected.value[0]):-1),L=D(()=>r.selected.value.length?r.items.value.findIndex(k=>k.id===r.selected.value[r.selected.value.length-1]):-1);if(tt){let k=-1;te(()=>[r.selected.value,g.value,P.value,f.value],()=>{cancelAnimationFrame(k),k=requestAnimationFrame(()=>{if(g.value&&P.value){const V=f.value?"width":"height";m.value=g.value[V],b.value=P.value[V],d.value=m.value+1<b.value}if(R.value>=0&&x.value){const V=x.value.children[L.value];R.value===0||!d.value?s.value=0:t.centerActive?s.value=sa({selectedElement:V,containerSize:m.value,contentSize:b.value,isRtl:a.value,isHorizontal:f.value}):d.value&&(s.value=Pe({selectedElement:V,containerSize:m.value,contentSize:b.value,isRtl:a.value,currentScrollOffset:s.value,isHorizontal:f.value}))}})})}const $=Q(!1);let A=0,S=0;function h(k){const V=f.value?"clientX":"clientY";S=(a.value&&f.value?-1:1)*s.value,A=k.touches[0][V],$.value=!0}function y(k){if(!d.value)return;const V=f.value?"clientX":"clientY",U=a.value&&f.value?-1:1;s.value=U*(S+A-k.touches[0][V])}function E(k){const V=b.value-m.value;s.value<0||!d.value?s.value=0:s.value>=V&&(s.value=V),$.value=!1}function H(){I.value&&(I.value[f.value?"scrollLeft":"scrollTop"]=0)}const O=Q(!1);function Y(k){if(O.value=!0,!(!d.value||!x.value)){for(const V of k.composedPath())for(const U of x.value.children)if(U===V){s.value=Pe({selectedElement:U,containerSize:m.value,contentSize:b.value,isRtl:a.value,currentScrollOffset:s.value,isHorizontal:f.value});return}}}function z(k){O.value=!1}function v(k){var V;!O.value&&!(k.relatedTarget&&((V=x.value)!=null&&V.contains(k.relatedTarget)))&&l()}function i(k){x.value&&(f.value?k.key==="ArrowRight"?l(a.value?"prev":"next"):k.key==="ArrowLeft"&&l(a.value?"next":"prev"):k.key==="ArrowDown"?l("next"):k.key==="ArrowUp"&&l("prev"),k.key==="Home"?l("first"):k.key==="End"&&l("last"))}function l(k){var V,U,Ae,Me,we;if(x.value)if(!k)(V=at(x.value)[0])==null||V.focus();else if(k==="next"){const J=(U=x.value.querySelector(":focus"))==null?void 0:U.nextElementSibling;J?J.focus():l("first")}else if(k==="prev"){const J=(Ae=x.value.querySelector(":focus"))==null?void 0:Ae.previousElementSibling;J?J.focus():l("last")}else k==="first"?(Me=x.value.firstElementChild)==null||Me.focus():k==="last"&&((we=x.value.lastElementChild)==null||we.focus())}function F(k){const V=s.value+(k==="prev"?-1:1)*m.value;s.value=lt(V,0,b.value-m.value)}const de=D(()=>{let k=s.value>b.value-m.value?-(b.value-m.value)+Re(b.value-m.value-s.value):-s.value;s.value<=0&&(k=Re(-s.value));const V=a.value&&f.value?-1:1;return{transform:`translate${f.value?"X":"Y"}(${V*k}px)`,transition:$.value?"none":"",willChange:$.value?"transform":""}}),fe=D(()=>({next:r.next,prev:r.prev,select:r.select,isSelected:r.isSelected})),ge=D(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!C.value;case!0:return d.value||Math.abs(s.value)>0;case"mobile":return C.value||d.value||Math.abs(s.value)>0;default:return!C.value&&(d.value||Math.abs(s.value)>0)}}),Fe=D(()=>Math.abs(s.value)>0),We=D(()=>b.value>Math.abs(s.value)+m.value);return oe(()=>n(t.tag,{class:["v-slide-group",{"v-slide-group--vertical":!f.value,"v-slide-group--has-affixes":ge.value,"v-slide-group--is-overflowing":d.value},t.class],style:t.style,tabindex:O.value||r.selected.value.length?-1:0,onFocus:v},{default:()=>{var k,V,U;return[ge.value&&n("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!Fe.value}],onClick:()=>F("prev")},[((k=u.prev)==null?void 0:k.call(u,fe.value))??n(De,null,{default:()=>[n(Te,{icon:a.value?t.nextIcon:t.prevIcon},null)]})]),n("div",{key:"container",ref:I,class:"v-slide-group__container",onScroll:H},[n("div",{ref:x,class:"v-slide-group__content",style:de.value,onTouchstartPassive:h,onTouchmovePassive:y,onTouchendPassive:E,onFocusin:Y,onFocusout:z,onKeydown:i},[(V=u.default)==null?void 0:V.call(u,fe.value)])]),ge.value&&n("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!We.value}],onClick:()=>F("next")},[((U=u.next)==null?void 0:U.call(u,fe.value))??n(De,null,{default:()=>[n(Te,{icon:a.value?t.prevIcon:t.nextIcon},null)]})])]}})),{selected:r.selected,scrollTo:F,scrollOffset:s,focus:l}}});function oa(t){return t?t.map(e=>typeof e=="string"?{title:e,value:e}:e):[]}const ca=ue({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ye({mandatory:"force"}),...xe(),...Ce()},"VTabs"),ua=ie()({name:"VTabs",props:ca(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:u}=e;const a=nt(t,"modelValue"),C=D(()=>oa(t.items)),{densityClasses:r}=Ee(t),{backgroundColorClasses:d,backgroundColorStyles:s}=Rt(K(t,"bgColor"));return He({VTab:{color:K(t,"color"),direction:K(t,"direction"),stacked:K(t,"stacked"),fixed:K(t,"fixedTabs"),sliderColor:K(t,"sliderColor"),hideSlider:K(t,"hideSlider")}}),oe(()=>{const[m]=$e.filterProps(t);return n($e,ce(m,{modelValue:a.value,"onUpdate:modelValue":b=>a.value=b,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},r.value,d.value,t.class],style:[{"--v-tabs-height":st(t.height)},s.value,t.style],role:"tablist",symbol:Ge}),{default:()=>[u.default?u.default():C.value.map(b=>n(pe,ce(b,{key:b.title}),null))]})}),{}}}),da={class:"container"},ra={class:"column"},va={class:"margin spread"},ma={class:"row-in-call"},fa=c("i",{class:"center icon-cog-gear"},null,-1),ga=c("h3",null,"Settings",-1),ha={class:"users-container"},pa=c("i",{class:"icon-users users"},null,-1),ba={class:"button-wrapper"},ka={class:"tab-container"},ya={key:0},Sa={class:"basic-flex"},Ca={class:"even-spacing"},_a={class:"video-container"},Va={class:"video-container"},xa={class:"controls-container"},Aa=c("i",{class:"center icon-caret-left-md"},null,-1),Ma={class:"row-center"},wa=c("i",{class:"center icon-caret-right-md"},null,-1),Ia={key:1,class:"chat-container"},La=c("div",{class:"chat-header"},[c("h3",null,"Chat")],-1),Da={class:"chat-body"},Ta={class:"chat-footer"},Ra={class:"tab-buttons"},Z=2,Pa=re({__name:"InCallPortrait",setup(t){const e=be(),u=ke(),a=ye("liveSwitch");let C=null,r=null;const d=e.state.localMedia;let s=w({});const m=w(1);let b=w("100%");const f=w("");let I=w([]);const g=w(1),x=w("GALLERY"),P=D(()=>e.state.pinLocal||g.value===1),R=D(()=>e.state.pinLocal?m.value-1:Math.ceil(m.value/Z));te(e.state.pinLocal,A);function L(){g.value*Z-1<m.value&&(g.value++,A())}function $(){g.value>1&&(g.value--,A())}function A(){let v=new Array;if(e.state.pinLocal||g.value===1)for(let i in s.value){let l=s.value[i];l.index===g.value&&v.push(l)}else for(let i in s.value){let l=s.value[i];(l.index===g.value*Z-Z||l.index===g.value*Z-1)&&v.push(l)}e.commit("setVideoList",v)}function S(v){x.value=v.target.innerText}te(m,function(){const v=Math.ceil(Math.sqrt(m.value)),i=100/v;b.value="calc("+i+"% - "+v*5+"px)"});async function h(){await a.disconnectFromMeeting(s.value,C,d),d.destroy(),e.commit("resetStore"),u.push("/")}async function y(v){const i=Object.keys(s.value)[0],l=s.value[i],F=await a.getAudioSink(v,l);a.updateSpeaker(s.value,F)}function E(v){s.value[v.getId()].remoteMedia.destroy(),delete s.value[v.getId()],m.value--}function H(){f.value.length!==0&&(a.sendChat(r,e.state.displayName,f.value),f.value="")}function O(v,i){let l=v.getRemoteConnectionInfo().getUserAlias();s.value[v.getId()]={connection:v,remoteMedia:i,index:m.value++,displayName:l},z(i),a.createDownStreamCloseHandler(v,E)}function Y(v){var i=JSON.parse(v);I.value.push({user:i.from,message:i.text})}function z(v){e.state.speakerList.length===0&&e.commit("populateSpeakerList",v)}return Se(async()=>{C=await a.registerClient(e.state.displayName,e.state.channelId),r=await a.getChannel(C),a.openSfuUpstreamConnection(e.state.localMedia,r),a.createDownStreamOpenHandler(r,O),e.commit("setLocalMedia",d),e.commit("populateCameraList"),e.commit("populateMicrophoneList"),e.commit("setActiveVideoDevice",d.getVideoSourceInput().getId()),e.commit("setActiveAudioDevice",d.getAudioSourceInput().getId()),e.commit("setVideoMuted",d.getVideoMuted()),e.commit("setAudioMuted",d.getAudioMuted()),a.addIncomingChatHandler(r,Y)}),(v,i)=>(_(),T("div",da,[c("div",ra,[n(me,{src:Be,class:"logo-in-call"}),c("div",va,[c("div",ma,[n(Ne,{"close-on-content-click":!1,location:"bottom"},{activator:p(({props:l})=>[n(M,ce(l,{icon:"",class:"icon",flat:""}),{default:p(()=>[fa]),_:2},1040)]),default:p(()=>[n(Ue,{class:"settings-menu-in-call"},{default:p(()=>[n(Oe,null,{default:p(()=>[n(X,null,{default:p(()=>[ga]),_:1}),n(X,null,{default:p(()=>[n(j,{label:"Camera",class:"margin input-in-call","hide-details":"auto",items:o(e).state.cameraList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeVideoDevice,"onUpdate:modelValue":[i[0]||(i[0]=l=>o(e).state.activeVideoDevice=l),i[1]||(i[1]=l=>o(e).commit("changeCamera"))]},null,8,["items","modelValue"])]),_:1}),n(X,null,{default:p(()=>[n(j,{label:"Microphone",class:"margin input-in-call","hide-details":"auto",items:o(e).state.microphoneList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeAudioDevice,"onUpdate:modelValue":[i[2]||(i[2]=l=>o(e).state.activeAudioDevice=l),i[3]||(i[3]=l=>o(e).commit("changeMicrophone"))]},null,8,["items","modelValue"])]),_:1}),n(X,null,{default:p(()=>[o(e).state.speakerList.length>0?(_(),N(j,{key:0,label:"Speaker",class:"margin input-in-call","hide-details":"auto",items:o(e).state.speakerList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeSpeakerDevice,"onUpdate:modelValue":[i[4]||(i[4]=l=>o(e).state.activeSpeakerDevice=l),y]},null,8,["items","modelValue"])):q("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),c("div",ha,[pa,G(" "+W(m.value),1)])]),c("div",ba,[n(M,{class:"leave-button",onClick:h},{default:p(()=>[G("Leave")]),_:1})])]),c("div",ka,[x.value==="GALLERY"?(_(),T("div",ya,[c("div",Sa,[c("div",Ca,[c("div",_a,[o(e).state.localMedia&&P.value?(_(),N(se,{key:0,"ask-height":"240px","ask-width":"320px","local-video":o(e).state.localMedia,userName:"Me"},null,8,["local-video"])):q("",!0)]),c("div",Va,[o(e).state.videoList?(_(!0),T(ae,{key:0},le(o(e).state.videoList,l=>(_(),N(se,{remoteVideo:l.media,index:l.index,userName:l.displayName,connection:l.connection,"ask-height":"240px","ask-width":"320px",maxIndex:Z},null,8,["remoteVideo","index","userName","connection"]))),256)):q("",!0)])])]),c("div",xa,[n(M,{class:B(["margin align-left",g.value===1?"inactive-button":"active-button"]),icon:"",onClick:$},{default:p(()=>[Aa]),_:1},8,["class"]),c("div",Ma,[n(M,{class:"margin active-button",icon:"",onClick:i[5]||(i[5]=l=>o(e).commit("toggleLocalVideoMute"))},{default:p(()=>[c("i",{class:B(["center",o(e).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1}),n(M,{class:"margin active-button",icon:"",onClick:i[6]||(i[6]=l=>o(e).commit("toggleLocalAudioMute"))},{default:p(()=>[c("i",{class:B(["center",o(e).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),n(M,{class:B(["margin active-button align-right",g.value===R.value?"inactive-button":"active-button"]),icon:"",onClick:L},{default:p(()=>[wa]),_:1},8,["class"])])])):(_(),T("div",Ia,[La,c("div",Da,[(_(!0),T(ae,null,le(o(I),l=>(_(),T("div",null,[c("div",{class:B(["chat-message",l.user===o(e).state.displayName?"my-chat":"other-chat"])},W(l.user)+": "+W(l.message),3)]))),256))]),c("div",Ta,[n(_e,{label:"Chat Message",clearable:"",class:"margin chat-input","hide-details":"auto",modelValue:f.value,"onUpdate:modelValue":i[7]||(i[7]=l=>f.value=l)},null,8,["modelValue"]),n(M,{class:"chat-button",onClick:H},{default:p(()=>[G("Send")]),_:1})])]))]),c("div",Ra,[n(ua,{"fixed-tabs":"","selected-class":"activeTab",class:"tabs",onClick:S},{default:p(()=>[n(pe,{value:"gallery"},{default:p(()=>[G("Gallery")]),_:1}),n(pe,{value:"chat"},{default:p(()=>[G("Chat")]),_:1})]),_:1})])])]))}}),$a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATLSURBVHgBzVrtcdw2EH3U+L/jCkKlgERxA6bVQKQKxLgB0S4goSqQ1EBySgGR3UDCVCC5gYgd+FwBjMclxY8jsCB5N3dvBpwTAQJ8u4vdxVIRDgGZ4fU7RLiAwZn9fVL9LXis2x1uosI1RYR9Q0j8zl9oX96Ff217ZwmVw479ERECx7b9DdFAKIx9619xHd11b+6HSEviH9tiTMcGmTAimaHE2Na2FVa1a8xFOIkb264g5pZCzK+LL7a9bszsBdwLcoJL9G13bR98hWWg8P6An8SVXSd/XjMzJPTGtqQz5lU9zyn/OBqdJjOxvT7YlqO/AUssQbuxE8+opw6JLj6P3EtqgY8QERL0DvHIg/NNSkCTuvT0k+k7x/3PjmdSXsY0kmPeBgwBteFzsaUvVoyAZvojf/SJiDYusAvoc9MTXXn6XQKIeRlqJMHukKsjDP7z9L709G0Q0QJTjPl4o/R/GovYNWhCP3me3SCipQhx4yUmITNn8AuBZvURfriE/JWXIZEQrzQlnWig7bv1MOV4hrjsGG5BVN5sSOQROs4wBbLJtWc0bSSO+9Qk490GEW1C4mKieSVKP0X+l6ef++M3z9OVg+gTkRyqgB8kkSEcl0q/O3aIWSVwm9Vz3jcWEH2+vH05MRk/ZIy2pz55+nzaoFk976tNIiKdW/hBrdxDh6Y541xLtJHCbZpl10EcOQbl0Df+iV3sT2XML0p/MRo72lTfp42e5YwTEbs7h57tpnbR+9HNn5kEeuy4c/RpqX45dNcujaCW1FvoZOhaH0b2TAoNYylJZhoSieMpHqhOhzfdRAgh8zPglFyDGDxH0NRaQppZ9VMSmlNmmsNS6nhG0vxFxYfMcONeIizfKuCPH/0zt+wJan/KybGHacUHkXaO5an+k20/QF46qedLPONpTh8siZVrwDQiDbZHKARMQWhOXi86j0gDIZRAl+gc0HPeukxpiO3VtVpS19CPAz4UVUpvqhJpcI0g8rwYXyZGm2Ks61Y6D0BC5gnhKOs56YZpOh/n1sxeDF6kW0hOnE9lZl0vzBcoOklfSEryGiKMpRWZHqLOy1HyzJ9iTEeJ1uXGnnGU+Dl2ANGIpBMkMde2Y4RE8ggr7AiRUpBrUKBNVTiu+/0iFDSnY+wI1EgOX3IGG4HHDj6ixRThsURLcxaBGqGXiR3955aE//grGmU6n8CP0q6WO4sMC0EiBq6FQ03BL4whnF+dloDZr8sNhrnHzKSY5umYHA4z5cUgEZeqT9SFxGVfYx5S8GPPe7OVfI1EbuCW/r2TzHvDlJ5m4q+u+zV7bEPkyq7x/1LtSECUs4ZPsis78tEuyvIktUApau6Xkf9tPU5z7+06cuYoMRHdyJ5j8zvdXDBrzTpzxxBBhVYpV5hIqJ80hgVHH0q44o7Mn2OasFYQoail3MixYIppZ4yiSj+0GCFHWtYA+G09Rjge7Py3VbHCoaVIWZj2nUD2xfedxUtIOX966t1W13PMO2GW9brdb4ovt3ewmgohlGM7+/Jhf0SI5f8BQXCSD/sl0kCKcvRqWuV+DEyPTg+DCCHaoXsmoTjwKak6Wq92hEPBTSVTZtoMoiEZcqWJxjUfjka6aD/wpJDSazeLGK2yHCaRLpr/rmPzRPpvTn6IoHFFRiQAAAAASUVORK5CYII=",Ha={class:"container"},za={key:0,class:"tab-container"},Ba={class:"video-container"},Ea={class:"basic-flex"},Oa={class:"controls-container"},Na=c("i",{class:"center icon-caret-left-md"},null,-1),Ua=c("i",{class:"center icon-caret-right-md"},null,-1),Ga={key:1},Ya={class:"chat-container"},Fa=c("div",{class:"chat-header"},[c("h3",null,"Chat")],-1),Wa={class:"chat-body"},qa={class:"basic-flex"},ja={class:"right-column"},Xa={class:"center users-container"},Ka=c("i",{class:"icon-users users"},null,-1),Qa=c("i",{class:"center icon-cog-gear"},null,-1),Ja=c("h3",null,"Settings",-1),Za=c("i",{class:"center icon-chat"},null,-1),el=c("i",{class:"center icon-video"},null,-1),ee=2,tl=re({__name:"InCallLandscape",setup(t){const e=be(),u=ke(),a=ye("liveSwitch");let C=null,r=null;const d=e.state.localMedia;let s=w({});const m=w(1);let b=w("100%");const f=w("");let I=w([]);const g=w(1),x=w("GALLERY"),P=D(()=>e.state.pinLocal||g.value===1),R=D(()=>e.state.pinLocal?m.value-1:Math.ceil(m.value/ee));te(e.state.pinLocal,A);function L(){g.value*ee-1<m.value&&(g.value++,A())}function $(){g.value>1&&(g.value--,A())}function A(){let v=new Array;if(e.state.pinLocal||g.value===1)for(let i in s.value){let l=s.value[i];l.index===g.value&&v.push(l)}else for(let i in s.value){let l=s.value[i];(l.index===g.value*ee-ee||l.index===g.value*ee-1)&&v.push(l)}e.commit("setVideoList",v)}function S(v){x.value=v}te(m,function(){const v=Math.ceil(Math.sqrt(m.value)),i=100/v;b.value="calc("+i+"% - "+v*5+"px)"});async function h(){await a.disconnectFromMeeting(s.value,C,d),d.destroy(),e.commit("resetStore"),u.push("/")}async function y(v){const i=Object.keys(s.value)[0],l=s.value[i],F=await a.getAudioSink(v,l);a.updateSpeaker(s.value,F)}function E(v){s.value[v.getId()].remoteMedia.destroy(),delete s.value[v.getId()],m.value--}function H(){f.value.length!==0&&(a.sendChat(r,e.state.displayName,f.value),f.value="")}function O(v,i){let l=v.getRemoteConnectionInfo().getUserAlias();s.value[v.getId()]={connection:v,remoteMedia:i,index:m.value++,displayName:l},z(i),a.createDownStreamCloseHandler(v,E)}function Y(v){var i=JSON.parse(v);I.value.push({user:i.from,message:i.text})}function z(v){e.state.speakerList.length===0&&e.commit("populateSpeakerList",v)}return Se(async()=>{C=await a.registerClient(e.state.displayName,e.state.channelId),r=await a.getChannel(C),a.openSfuUpstreamConnection(e.state.localMedia,r),a.createDownStreamOpenHandler(r,O),e.commit("setLocalMedia",d),e.commit("populateCameraList"),e.commit("populateMicrophoneList"),e.commit("setActiveVideoDevice",d.getVideoSourceInput().getId()),e.commit("setActiveAudioDevice",d.getAudioSourceInput().getId()),e.commit("setVideoMuted",d.getVideoMuted()),e.commit("setAudioMuted",d.getAudioMuted()),a.addIncomingChatHandler(r,Y)}),(v,i)=>(_(),T("div",Ha,[c("div",null,[x.value=="GALLERY"?(_(),T("div",za,[c("div",Ba,[c("div",null,[o(e).state.localMedia&&P.value?(_(),N(se,{key:0,"ask-height":"265px","ask-width":"280px","local-video":o(e).state.localMedia,userName:"Me"},null,8,["local-video"])):q("",!0)]),c("div",Ea,[o(e).state.videoList?(_(!0),T(ae,{key:0},le(o(e).state.videoList,l=>(_(),N(se,{remoteVideo:l.media,index:l.index,userName:l.displayName,connection:l.connection,"ask-height":"265px","ask-width":"280px",maxIndex:ee},null,8,["remoteVideo","index","userName","connection"]))),256)):q("",!0)])]),c("div",Oa,[n(M,{class:B(["margin align-left",g.value===1?"inactive-button":"active-button"]),icon:"",onClick:$},{default:p(()=>[Na]),_:1},8,["class"]),n(M,{class:"margin active-button",icon:"",onClick:i[0]||(i[0]=l=>o(e).commit("toggleLocalVideoMute"))},{default:p(()=>[c("i",{class:B(["center",o(e).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1}),n(M,{class:"margin active-button",icon:"",onClick:i[1]||(i[1]=l=>o(e).commit("toggleLocalAudioMute"))},{default:p(()=>[c("i",{class:B(["center",o(e).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1}),n(M,{class:B(["margin align-right",g.value===R.value?"inactive-button":"active-button"]),icon:"",onClick:L},{default:p(()=>[Ua]),_:1},8,["class"])])])):(_(),T("div",Ga,[c("div",Ya,[Fa,c("div",Wa,[(_(!0),T(ae,null,le(o(I),l=>(_(),T("div",null,[c("div",{class:B(["chat-message",l.user===o(e).state.displayName?"my-chat":"other-chat"])},W(l.user)+": "+W(l.message),3)]))),256))]),c("div",qa,[n(_e,{label:"Chat Message",clearable:"",class:"chat-input","hide-details":"auto",modelValue:f.value,"onUpdate:modelValue":i[2]||(i[2]=l=>f.value=l)},null,8,["modelValue"]),n(M,{class:"chat-button",onClick:H},{default:p(()=>[G("Send")]),_:1})])])]))]),c("div",ja,[n(me,{src:$a,class:"logo-in-call"}),c("span",Xa,[Ka,G(" "+W(m.value),1)]),n(Ne,{"close-on-content-click":!1,location:"left"},{activator:p(({props:l})=>[n(M,ce({class:"margin center icon"},l,{icon:"",flat:""}),{default:p(()=>[Qa]),_:2},1040)]),default:p(()=>[n(Ue,{class:"settings-menu-in-call"},{default:p(()=>[n(Oe,null,{default:p(()=>[n(X,null,{default:p(()=>[Ja]),_:1}),n(X,null,{default:p(()=>[n(j,{label:"Camera",class:"margin input-in-call","hide-details":"auto",items:o(e).state.cameraList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeVideoDevice,"onUpdate:modelValue":[i[3]||(i[3]=l=>o(e).state.activeVideoDevice=l),i[4]||(i[4]=l=>o(e).commit("changeCamera"))]},null,8,["items","modelValue"])]),_:1}),n(X,null,{default:p(()=>[n(j,{label:"Microphone",class:"margin input-in-call","hide-details":"auto",items:o(e).state.microphoneList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeAudioDevice,"onUpdate:modelValue":[i[5]||(i[5]=l=>o(e).state.activeAudioDevice=l),i[6]||(i[6]=l=>o(e).commit("changeMicrophone"))]},null,8,["items","modelValue"])]),_:1}),n(X,null,{default:p(()=>[o(e).state.speakerList.length>0?(_(),N(j,{key:0,label:"Speaker",class:"margin input-in-call","hide-details":"auto",items:o(e).state.speakerList,"item-title":"name","item-value":"id",modelValue:o(e).state.activeSpeakerDevice,"onUpdate:modelValue":[i[7]||(i[7]=l=>o(e).state.activeSpeakerDevice=l),y]},null,8,["items","modelValue"])):q("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),n(M,{icon:"",class:"center icon",flat:"",onClick:i[8]||(i[8]=l=>S("CHAT"))},{default:p(()=>[Za]),_:1}),n(M,{icon:"",class:"center icon",flat:"",onClick:i[9]||(i[9]=l=>S("GALLERY"))},{default:p(()=>[el]),_:1}),n(M,{class:"center leave-button",onClick:h},{default:p(()=>[G("Leave")]),_:1})])]))}}),nl=re({__name:"InCall",setup(t){const{mobile:e}=ze(),u=w(e&&window.innerHeight>window.innerWidth);return(a,C)=>o(e)?u.value?(_(),N(Pa,{key:1})):(_(),N(tl,{key:2})):(_(),N(Kt,{key:0}))}});export{nl as default};
