import{d as pe,e as be,f as ke,r as x,w as Ve,o as Ae,l as p,i as w,j as N,k as o,b as s,t as J,B as Q,s as y,q as u,A as K,C as se,F as ce,D as ue,n as Y,E as et,v as tt,x as xe,y as we,a as ve,m as Se,G as Ge,u as me,p as he,I as de,H as Ie,J as at,K as nt,L as z,M as st,N as it,O as lt,P as ne,Q as ge,R as ot,z as Fe,S as De,T as ct,U as ut,V as dt,W as rt,X as ae,Y as vt}from"./index-b431d06c.js";import{_ as Ye,V as Ce,e as L,a as re,d as Z,b as Me,g as Le,h as Te,i as Re,j as $e,k as ye,l as mt,n as ft,o as gt,p as ht,q as pt,r as St,s as Ct,t as yt,u as _t,R as bt,v as kt,w as Vt,x as je,y as At,z as xt,A as wt,B as It,C as Mt,D as Lt,E as Tt,L as Rt,F as Pt,G as Ot,H as Ut,I as Dt,J as $t,K as zt,M as Nt,N as ze,O as Ne,P as Bt,Q as We,S as ee,T as Xe}from"./_plugin-vue_export-helper-94928cdc.js";const Et="62c0809a-5671-426f-94a5-8edbdd1fe962",Ht="https://cloud.liveswitch.io",Gt="/room/OHTest",Ft="0070c9c582894ef7969986ba228399c527201d910ed9451eb8b45097194ad689",W={applicationId:Et,gatewayUrl:Ht,channelId:Gt,sharedSecret:Ft},qe=e=>(xe("data-v-19ec918e"),e=e(),we(),e),Yt={class:"container"},jt={class:"left-column"},Wt={class:"flex-center"},Xt={class:"row-spread"},qt={class:"user-counter"},Jt=qe(()=>o("i",{class:"icon-users users"},null,-1)),Kt={class:"video-grid"},Qt={class:"right-column"},Zt={class:"settings-menu"},ea={class:"row"},ta={class:"row"},aa={class:"row"},na={class:"chat-container"},sa=qe(()=>o("div",{class:"chat-header"},[o("h2",{class:"margin"},"Chat")],-1)),ia={class:"chat-body"},la={class:"chat-footer"},oa=pe({__name:"InCall",setup(e){const t=be(),d=ke();let c=x([]);const I=x(""),v=x(1);let S=x("100%");Ve(v,function(){const b=Math.ceil(Math.sqrt(v.value)),h=100/b;S.value="calc("+h+"% - "+b*5+"px)"});const i=t.state.localMedia;let r=null,m=null,f=x({});const k=x("");let C=x([]);function V(){for(let b in f.value){const h=f.value[b].connection;(h.getState()!==p.ConnectionState.Closed.valueOf()||h.getState()!==p.ConnectionState.Closing)&&h.close(),delete f.value[b]}F(),i.stop(),i.destroy(),t.commit("resetStore"),d.push("/")}function B(b){debugger}function E(){if(k.value.length===0)return;let b=new Date;var h={from:t.state.displayName,timestamp:new Date().getTime(),timestampHourFormat:b.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),timestampDateFormat:b.toLocaleString(),text:k.value};r&&r.sendMessage(JSON.stringify(h)),k.value=""}Ae(async()=>{await $(),t.commit("setLocalMedia",i),t.commit("populateCameraList"),t.commit("populateMicrophoneList"),t.commit("setActiveVideoDevice",i.getVideoSourceInput().getId()),t.commit("setActiveAudioDevice",i.getAudioSourceInput().getId()),t.commit("setVideoMuted",i.getVideoMuted()),t.commit("setAudioMuted",i.getAudioMuted()),r&&r.addOnMessage(function(b,h){var g=JSON.parse(h);console.log(h),C.value.push({user:g.from,message:g.text})})});async function $(){const b=new p.Promise;m=new p.Client(W.gatewayUrl,W.applicationId),m.setUserAlias(t.state.displayName);const h=p.Token.generateClientRegisterToken(W.applicationId,m.getUserId(),m.getDeviceId(),m.getId(),[new p.ChannelClaim(t.state.channelId)],W.sharedSecret);return m.register(h).then(g=>{O(g),b.resolve(null)}).fail(g=>{p.Log.error("Failed to register with Gateway."),b.reject(g)}),b}function O(b){r=b[0];const h=U(t.state.localMedia);t.commit("setUpstreamConnection",h),r&&r.addOnRemoteUpstreamConnectionOpen(g=>T(g,r))}function T(b,h){const g=new p.RemoteMedia,P=new p.AudioStream(g),H=new p.VideoStream(g);if(h){const M=h.createSfuDownstreamConnection(b,P,H);return f.value[M.getId()]={connection:M,media:g,index:v.value++,displayName:b.getUserAlias()},c.value.length===0&&g.getAudioSinkOutputs().then(function(l){c.value=l.map(n=>(n.getId()==="default"&&(I.value=n.getId()),{name:n.getName(),id:n.getId()}))}).fail(function(l){console.error(l)}),M.addOnStateChange(l=>{l.getRemoteClosed()&&(delete f.value[M.getId()],g.destroy(),v.value--)}),M.open(),M}}function U(b){const h=new p.AudioStream(b),g=new p.VideoStream(b);if(!r)return;const P=r.createSfuUpstreamConnection(h,g);return P.addOnStateChange(H=>{p.Log.debug(`Upstream connection is ${new p.ConnectionStateWrapper(H.getState()).toString()}.`)}),P.open(),P}function F(){if(m)return m.unregister().fail(()=>p.Log.error("Unregistration failed."))}return(b,h)=>(w(),N("div",Yt,[o("div",jt,[o("div",Wt,[s(Ce,{src:Ye,class:"logo"})]),o("div",Xt,[o("div",qt,[Jt,J(" "+Q(v.value),1)]),s(L,{class:"leave-button",onClick:V},{default:y(()=>[J("Leave Call")]),_:1})]),o("div",Kt,[u(t).state.localMedia?(w(),K(re,{key:0,class:"video","local-video":u(t).state.localMedia,userName:"Me",askHeight:u(S),askWidth:u(S)},null,8,["local-video","askHeight","askWidth"])):se("",!0),u(f)?(w(!0),N(ce,{key:1},ue(u(f),g=>(w(),K(re,{class:"video",remoteVideo:g.media,index:g.index,userName:g.displayName,connection:g.connection,askHeight:u(S),askWidth:u(S)},null,8,["remoteVideo","index","userName","connection","askHeight","askWidth"]))),256)):se("",!0)])]),o("div",Qt,[o("div",Zt,[o("div",ea,[s(Z,{label:"Camera",class:"margin input","hide-details":"auto",items:u(t).state.cameraList,"item-title":"name","item-value":"id",modelValue:u(t).state.activeVideoDevice,"onUpdate:modelValue":[h[0]||(h[0]=g=>u(t).state.activeVideoDevice=g),h[1]||(h[1]=g=>u(t).commit("changeCamera"))]},null,8,["items","modelValue"]),s(L,{class:"margin button",icon:"",onClick:h[2]||(h[2]=g=>u(t).commit("toggleLocalVideoMute"))},{default:y(()=>[o("i",{class:Y(["center",u(t).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1})]),o("div",ta,[s(Z,{label:"Microphone",class:"margin input","hide-details":"auto",items:u(t).state.microphoneList,"item-title":"name","item-value":"id",modelValue:u(t).state.activeAudioDevice,"onUpdate:modelValue":[h[3]||(h[3]=g=>u(t).state.activeAudioDevice=g),h[4]||(h[4]=g=>u(t).commit("changeMicrophone"))]},null,8,["items","modelValue"]),s(L,{class:"margin button",icon:"",onClick:h[5]||(h[5]=g=>u(t).commit("toggleLocalAudioMute"))},{default:y(()=>[o("i",{class:Y(["center",u(t).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),o("div",aa,[u(c).length>0?(w(),K(Z,{key:0,label:"Speaker",class:"margin input","hide-details":"auto",items:u(c),"item-title":"name","item-value":"id",modelValue:I.value,"onUpdate:modelValue":[h[6]||(h[6]=g=>I.value=g),B]},null,8,["items","modelValue"])):se("",!0)])]),o("div",na,[sa,o("div",ia,[(w(!0),N(ce,null,ue(u(C),g=>(w(),N("div",null,[o("div",{class:Y(["chat-message",g.user===u(t).state.displayName?"my-chat":"other-chat"])},Q(g.user)+": "+Q(g.message),3)]))),256))]),o("div",la,[s(Me,{label:"Chat Message",clearable:"",class:"margin chat-input","hide-details":"auto",modelValue:k.value,"onUpdate:modelValue":h[7]||(h[7]=g=>k.value=g),onKeydown:et(tt(E,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),s(L,{class:"chat-button",onClick:E},{default:y(()=>[J(" Send ")]),_:1})])])])]))}});const ca=Le(oa,[["__scopeId","data-v-19ec918e"]]);const ua=ve()({name:"VCardActions",props:Se(),setup(e,t){let{slots:d}=t;return Ge({VBtn:{variant:"text"}}),me(()=>{var c;return s("div",{class:["v-card-actions",e.class],style:e.style},[(c=d.default)==null?void 0:c.call(d)])}),{}}}),da=Te("v-card-subtitle"),ra=Te("v-card-title"),va=he({appendAvatar:String,appendIcon:de,prependAvatar:String,prependIcon:de,subtitle:String,title:String,...Se(),...Re()},"VCardItem"),ma=ve()({name:"VCardItem",props:va(),setup(e,t){let{slots:d}=t;return me(()=>{var m;const c=!!(e.prependAvatar||e.prependIcon),I=!!(c||d.prepend),v=!!(e.appendAvatar||e.appendIcon),S=!!(v||d.append),i=!!(e.title||d.title),r=!!(e.subtitle||d.subtitle);return s("div",{class:["v-card-item",e.class],style:e.style},[I&&s("div",{key:"prepend",class:"v-card-item__prepend"},[d.prepend?s(ye,{key:"prepend-defaults",disabled:!c,defaults:{VAvatar:{density:e.density,icon:e.prependIcon,image:e.prependAvatar}}},d.prepend):c&&s($e,{key:"prepend-avatar",density:e.density,icon:e.prependIcon,image:e.prependAvatar},null)]),s("div",{class:"v-card-item__content"},[i&&s(ra,{key:"title"},{default:()=>{var f;return[((f=d.title)==null?void 0:f.call(d))??e.title]}}),r&&s(da,{key:"subtitle"},{default:()=>{var f;return[((f=d.subtitle)==null?void 0:f.call(d))??e.subtitle]}}),(m=d.default)==null?void 0:m.call(d)]),S&&s("div",{key:"append",class:"v-card-item__append"},[d.append?s(ye,{key:"append-defaults",disabled:!v,defaults:{VAvatar:{density:e.density,icon:e.appendIcon,image:e.appendAvatar}}},d.append):v&&s($e,{key:"append-avatar",density:e.density,icon:e.appendIcon,image:e.appendAvatar},null)])])}),{}}}),fa=Te("v-card-text"),ga=he({appendAvatar:String,appendIcon:de,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:de,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...mt(),...Se(),...Re(),...ft(),...gt(),...ht(),...pt(),...St(),...Ct(),...yt(),...Ie(),...at(),..._t({variant:"elevated"})},"VCard"),Je=ve()({name:"VCard",directives:{Ripple:bt},props:ga(),setup(e,t){let{attrs:d,slots:c}=t;const{themeClasses:I}=nt(e),{borderClasses:v}=kt(e),{colorClasses:S,colorStyles:i,variantClasses:r}=Vt(e),{densityClasses:m}=je(e),{dimensionStyles:f}=At(e),{elevationClasses:k}=xt(e),{loaderClasses:C}=wt(e),{locationStyles:V}=It(e),{positionClasses:B}=Mt(e),{roundedClasses:E}=Lt(e),$=Tt(e,d),O=z(()=>e.link!==!1&&$.isLink.value),T=z(()=>!e.disabled&&e.link!==!1&&(e.link||$.isClickable.value));return me(()=>{const U=O.value?"a":e.tag,F=!!(c.title||e.title),b=!!(c.subtitle||e.subtitle),h=F||b,g=!!(c.append||e.appendAvatar||e.appendIcon),P=!!(c.prepend||e.prependAvatar||e.prependIcon),H=!!(c.image||e.image),M=h||P||g,l=!!(c.text||e.text);return st(s(U,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":T.value},I.value,v.value,S.value,m.value,k.value,C.value,B.value,E.value,r.value,e.class],style:[i.value,f.value,V.value,e.style],href:$.href.value,onClick:T.value&&$.navigate,tabindex:e.disabled?-1:void 0},{default:()=>{var n;return[H&&s("div",{key:"image",class:"v-card__image"},[c.image?s(ye,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},c.image):s(Ce,{key:"image-img",cover:!0,src:e.image},null)]),s(Rt,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:c.loader}),M&&s(ma,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:c.item,prepend:c.prepend,title:c.title,subtitle:c.subtitle,append:c.append}),l&&s(fa,{key:"text"},{default:()=>{var a;return[((a=c.text)==null?void 0:a.call(c))??e.text]}}),(n=c.default)==null?void 0:n.call(c),c.actions&&s(ua,null,{default:c.actions}),Pt(T.value,"v-card")]}}),[[it("ripple"),T.value&&e.ripple]])}),{}}});const Ke=Symbol.for("vuetify:v-tabs"),ha=he({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...lt(Ot({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),_e=ve()({name:"VTab",props:ha(),setup(e,t){let{slots:d,attrs:c}=t;const{textColorClasses:I,textColorStyles:v}=Ut(e,"sliderColor"),S=z(()=>e.direction==="horizontal"),i=ne(!1),r=x(),m=x();function f(k){var V,B;let{value:C}=k;if(i.value=C,C){const E=(B=(V=r.value)==null?void 0:V.$el.parentElement)==null?void 0:B.querySelector(".v-tab--selected .v-tab__slider"),$=m.value;if(!E||!$)return;const O=getComputedStyle(E).color,T=E.getBoundingClientRect(),U=$.getBoundingClientRect(),F=S.value?"x":"y",b=S.value?"X":"Y",h=S.value?"right":"bottom",g=S.value?"width":"height",P=T[F],H=U[F],M=P>H?T[h]-U[h]:T[F]-U[F],l=Math.sign(M)>0?S.value?"right":"bottom":Math.sign(M)<0?S.value?"left":"top":"center",a=(Math.abs(M)+(Math.sign(M)<0?T[g]:U[g]))/Math.max(T[g],U[g])||0,D=T[g]/U[g]||0,j=1.5;Dt($,{backgroundColor:[O,"currentcolor"],transform:[`translate${b}(${M}px) scale${b}(${D})`,`translate${b}(${M/j}px) scale${b}(${(a-1)/j+1})`,"none"],transformOrigin:Array(3).fill(l)},{duration:225,easing:$t})}}return me(()=>{const[k]=L.filterProps(e);return s(L,ge({symbol:Ke,ref:r,class:["v-tab",e.class],style:e.style,tabindex:i.value?0:-1,role:"tab","aria-selected":String(i.value),active:!1},k,c,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":f}),{default:()=>{var C;return[((C=d.default)==null?void 0:C.call(d))??e.text,!e.hideSlider&&s("div",{ref:m,class:["v-tab__slider",I.value],style:v.value},null)]}})}),{}}});function Be(e){const d=Math.abs(e);return Math.sign(e)*(d/((1/.501-2)*(1-d)+1))}function Ee(e){let{selectedElement:t,containerSize:d,contentSize:c,isRtl:I,currentScrollOffset:v,isHorizontal:S}=e;const i=S?t.clientWidth:t.clientHeight,r=S?t.offsetLeft:t.offsetTop,m=I&&S?c-r-i:r,f=d+v,k=i+m,C=i*.4;return m<=v?v=Math.max(m-C,0):f<=k&&(v=Math.min(v-(f-k-C),c-d)),v}function pa(e){let{selectedElement:t,containerSize:d,contentSize:c,isRtl:I,isHorizontal:v}=e;const S=v?t.clientWidth:t.clientHeight,i=v?t.offsetLeft:t.offsetTop,r=I&&v?c-i-S/2-d/2:i+S/2-d/2;return Math.min(c-d,Math.max(0,r))}const Sa=Symbol.for("vuetify:v-slide-group"),Qe=he({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:Sa},nextIcon:{type:de,default:"$next"},prevIcon:{type:de,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Se(),...Ie(),...zt({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),He=ve()({name:"VSlideGroup",props:Qe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:d}=t;const{isRtl:c}=ot(),{mobile:I}=Fe(),v=Nt(e,e.symbol),S=ne(!1),i=ne(0),r=ne(0),m=ne(0),f=z(()=>e.direction==="horizontal"),{resizeRef:k,contentRect:C}=De(),{resizeRef:V,contentRect:B}=De(),E=z(()=>v.selected.value.length?v.items.value.findIndex(_=>_.id===v.selected.value[0]):-1),$=z(()=>v.selected.value.length?v.items.value.findIndex(_=>_.id===v.selected.value[v.selected.value.length-1]):-1);if(ct){let _=-1;Ve(()=>[v.selected.value,C.value,B.value,f.value],()=>{cancelAnimationFrame(_),_=requestAnimationFrame(()=>{if(C.value&&B.value){const A=f.value?"width":"height";r.value=C.value[A],m.value=B.value[A],S.value=r.value+1<m.value}if(E.value>=0&&V.value){const A=V.value.children[$.value];E.value===0||!S.value?i.value=0:e.centerActive?i.value=pa({selectedElement:A,containerSize:r.value,contentSize:m.value,isRtl:c.value,isHorizontal:f.value}):S.value&&(i.value=Ee({selectedElement:A,containerSize:r.value,contentSize:m.value,isRtl:c.value,currentScrollOffset:i.value,isHorizontal:f.value}))}})})}const O=ne(!1);let T=0,U=0;function F(_){const A=f.value?"clientX":"clientY";U=(c.value&&f.value?-1:1)*i.value,T=_.touches[0][A],O.value=!0}function b(_){if(!S.value)return;const A=f.value?"clientX":"clientY",q=c.value&&f.value?-1:1;i.value=q*(U+T-_.touches[0][A])}function h(_){const A=m.value-r.value;i.value<0||!S.value?i.value=0:i.value>=A&&(i.value=A),O.value=!1}function g(){k.value&&(k.value[f.value?"scrollLeft":"scrollTop"]=0)}const P=ne(!1);function H(_){if(P.value=!0,!(!S.value||!V.value)){for(const A of _.composedPath())for(const q of V.value.children)if(q===A){i.value=Ee({selectedElement:q,containerSize:r.value,contentSize:m.value,isRtl:c.value,currentScrollOffset:i.value,isHorizontal:f.value});return}}}function M(_){P.value=!1}function l(_){var A;!P.value&&!(_.relatedTarget&&((A=V.value)!=null&&A.contains(_.relatedTarget)))&&a()}function n(_){V.value&&(f.value?_.key==="ArrowRight"?a(c.value?"prev":"next"):_.key==="ArrowLeft"&&a(c.value?"next":"prev"):_.key==="ArrowDown"?a("next"):_.key==="ArrowUp"&&a("prev"),_.key==="Home"?a("first"):_.key==="End"&&a("last"))}function a(_){var A,q,Pe,Oe,Ue;if(V.value)if(!_)(A=ut(V.value)[0])==null||A.focus();else if(_==="next"){const ie=(q=V.value.querySelector(":focus"))==null?void 0:q.nextElementSibling;ie?ie.focus():a("first")}else if(_==="prev"){const ie=(Pe=V.value.querySelector(":focus"))==null?void 0:Pe.previousElementSibling;ie?ie.focus():a("last")}else _==="first"?(Oe=V.value.firstElementChild)==null||Oe.focus():_==="last"&&((Ue=V.value.lastElementChild)==null||Ue.focus())}function D(_){const A=i.value+(_==="prev"?-1:1)*r.value;i.value=dt(A,0,m.value-r.value)}const j=z(()=>{let _=i.value>m.value-r.value?-(m.value-r.value)+Be(m.value-r.value-i.value):-i.value;i.value<=0&&(_=Be(-i.value));const A=c.value&&f.value?-1:1;return{transform:`translate${f.value?"X":"Y"}(${A*_}px)`,transition:O.value?"none":"",willChange:O.value?"transform":""}}),R=z(()=>({next:v.next,prev:v.prev,select:v.select,isSelected:v.isSelected})),G=z(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!I.value;case!0:return S.value||Math.abs(i.value)>0;case"mobile":return I.value||S.value||Math.abs(i.value)>0;default:return!I.value&&(S.value||Math.abs(i.value)>0)}}),X=z(()=>Math.abs(i.value)>0),Ze=z(()=>m.value>Math.abs(i.value)+r.value);return me(()=>s(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!f.value,"v-slide-group--has-affixes":G.value,"v-slide-group--is-overflowing":S.value},e.class],style:e.style,tabindex:P.value||v.selected.value.length?-1:0,onFocus:l},{default:()=>{var _,A,q;return[G.value&&s("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!X.value}],onClick:()=>D("prev")},[((_=d.prev)==null?void 0:_.call(d,R.value))??s(ze,null,{default:()=>[s(Ne,{icon:c.value?e.nextIcon:e.prevIcon},null)]})]),s("div",{key:"container",ref:k,class:"v-slide-group__container",onScroll:g},[s("div",{ref:V,class:"v-slide-group__content",style:j.value,onTouchstartPassive:F,onTouchmovePassive:b,onTouchendPassive:h,onFocusin:H,onFocusout:M,onKeydown:n},[(A=d.default)==null?void 0:A.call(d,R.value)])]),G.value&&s("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!Ze.value}],onClick:()=>D("next")},[((q=d.next)==null?void 0:q.call(d,R.value))??s(ze,null,{default:()=>[s(Ne,{icon:c.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:v.selected,scrollTo:D,scrollOffset:i,focus:a}}});function Ca(e){return e?e.map(t=>typeof t=="string"?{title:t,value:t}:t):[]}const ya=he({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Qe({mandatory:"force"}),...Re(),...Ie()},"VTabs"),_a=ve()({name:"VTabs",props:ya(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:d}=t;const c=rt(e,"modelValue"),I=z(()=>Ca(e.items)),{densityClasses:v}=je(e),{backgroundColorClasses:S,backgroundColorStyles:i}=Bt(ae(e,"bgColor"));return Ge({VTab:{color:ae(e,"color"),direction:ae(e,"direction"),stacked:ae(e,"stacked"),fixed:ae(e,"fixedTabs"),sliderColor:ae(e,"sliderColor"),hideSlider:ae(e,"hideSlider")}}),me(()=>{const[r]=He.filterProps(e);return s(He,ge(r,{modelValue:c.value,"onUpdate:modelValue":m=>c.value=m,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},v.value,S.value,e.class],style:[{"--v-tabs-height":vt(e.height)},i.value,e.style],role:"tablist",symbol:Ke}),{default:()=>[d.default?d.default():I.value.map(m=>s(_e,ge(m,{key:m.title}),null))]})}),{}}}),fe=e=>(xe("data-v-e2c6dad3"),e=e(),we(),e),ba={class:"container"},ka={class:"column"},Va={class:"margin spread"},Aa={class:"row"},xa=fe(()=>o("i",{class:"center icon-cog-gear"},null,-1)),wa=fe(()=>o("h3",null,"Settings",-1)),Ia={class:"users-container"},Ma=fe(()=>o("i",{class:"icon-users users"},null,-1)),La={class:"button-wrapper"},Ta={class:"tab-container"},Ra={key:0},Pa={class:"basic-flex"},Oa={class:"even-spacing"},Ua={class:"video-container"},Da={class:"video-container"},$a={class:"controls-container"},za=fe(()=>o("i",{class:"center icon-caret-left-md"},null,-1)),Na={class:"row-center"},Ba=fe(()=>o("i",{class:"center icon-caret-right-md"},null,-1)),Ea={key:1,class:"chat-container"},Ha=fe(()=>o("div",{class:"chat-header"},[o("h3",null,"Chat")],-1)),Ga={class:"chat-body"},Fa={class:"chat-footer"},Ya={class:"tab-buttons"},le=2,ja=pe({__name:"InCallPortrait",setup(e){const t=be(),d=ke(),c=z(()=>t.state.pinLocal||r.value===1),I=z(()=>{let l=1;return t.state.pinLocal?l=i.value-1:l=Math.ceil(i.value/le),l});Ve(t.state.pinLocal,O);let v=x([]);const S=x(""),i=x(1),r=x(1),m=t.state.localMedia;let f=null,k=null,C=x({});const V=x("");let B=x([]);function E(){r.value*le-1<i.value&&(r.value++,O())}function $(){r.value>1&&(r.value--,O())}function O(){let l=new Array;if(t.state.pinLocal||r.value===1)for(let n in C.value){let a=C.value[n];a.index===r.value&&l.push(a)}else for(let n in C.value){let a=C.value[n];(a.index===r.value*le-le||a.index===r.value*le-1)&&l.push(a)}t.commit("setVideoList",l)}function T(){for(let l in C.value){const n=C.value[l].connection;(n.getState()!==p.ConnectionState.Closed.valueOf()||n.getState()!==p.ConnectionState.Closing)&&n.close(),delete C.value[l]}P(),d.push("/")}function U(){if(V.value.length===0)return;let l=new Date;var n={from:t.state.displayName,timestamp:new Date().getTime(),timestampHourFormat:l.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),timestampDateFormat:l.toLocaleString(),text:V.value};f&&f.sendMessage(JSON.stringify(n)),V.value=""}Ae(async()=>{await F(),t.commit("setLocalMedia",m),t.commit("populateCameraList"),t.commit("populateMicrophoneList"),t.commit("setActiveVideoDevice",m.getVideoSourceInput().getId()),t.commit("setActiveAudioDevice",m.getAudioSourceInput().getId()),t.commit("setVideoMuted",m.getVideoMuted()),t.commit("setAudioMuted",m.getAudioMuted()),f&&f.addOnMessage(function(l,n){var a=JSON.parse(n);console.log(n),B.value.push({user:a.from,message:a.text})})});async function F(){const l=new p.Promise;k=new p.Client(W.gatewayUrl,W.applicationId),k.setUserAlias(t.state.displayName);const n=p.Token.generateClientRegisterToken(W.applicationId,k.getUserId(),k.getDeviceId(),k.getId(),[new p.ChannelClaim(t.state.channelId)],W.sharedSecret);return k.register(n).then(a=>{b(a),l.resolve(null)}).fail(a=>{p.Log.error("Failed to register with Gateway."),l.reject(a)}),l}function b(l){f=l[0];const n=g(t.state.localMedia);t.commit("setUpstreamConnection",n),f&&f.addOnRemoteUpstreamConnectionOpen(a=>h(a,f))}function h(l,n){const a=new p.RemoteMedia,D=new p.AudioStream(a),j=new p.VideoStream(a);if(n){const R=n.createSfuDownstreamConnection(l,D,j);return i.value===1&&t.commit("setVideoList",[{connection:R,media:a,index:i.value,displayName:l.getUserAlias()}]),C.value[R.getId()]={connection:R,media:a,index:i.value++,displayName:l.getUserAlias()},v.value.length===0&&a.getAudioSinkOutputs().then(function(G){v.value=G.map(X=>(X.getId()==="default"&&(S.value=X.getId()),{name:X.getName(),id:X.getId()}))}).fail(function(G){console.error(G)}),R.addOnStateChange(G=>{G.getRemoteClosed()&&(delete C.value[R.getId()],a.destroy(),i.value--)}),R.open(),R}}function g(l){const n=new p.AudioStream(l),a=new p.VideoStream(l);if(!f)return;const D=f.createSfuUpstreamConnection(n,a);return D.addOnStateChange(j=>{p.Log.debug(`Upstream connection is ${new p.ConnectionStateWrapper(j.getState()).toString()}.`)}),D.open(),D}function P(){if(k)return k.unregister().fail(()=>p.Log.error("Unregistration failed."))}const H=x("GALLERY");function M(l){H.value=l.target.innerText}return(l,n)=>(w(),N("div",ba,[o("div",ka,[s(Ce,{src:Ye,class:"logo"}),o("div",Va,[o("div",Aa,[s(Xe,{"close-on-content-click":!1,location:"bottom"},{activator:y(({props:a})=>[s(L,ge(a,{icon:"",class:"icon",flat:""}),{default:y(()=>[xa]),_:2},1040)]),default:y(()=>[s(Je,{class:"settings-menu"},{default:y(()=>[s(We,null,{default:y(()=>[s(ee,null,{default:y(()=>[wa]),_:1}),s(ee,null,{default:y(()=>[s(Z,{label:"Camera",class:"margin input","hide-details":"auto",items:u(t).state.cameraList,"item-title":"name","item-value":"id",modelValue:u(t).state.activeVideoDevice,"onUpdate:modelValue":[n[0]||(n[0]=a=>u(t).state.activeVideoDevice=a),n[1]||(n[1]=a=>u(t).commit("changeCamera"))]},null,8,["items","modelValue"])]),_:1}),s(ee,null,{default:y(()=>[s(Z,{label:"Microphone",class:"margin input","hide-details":"auto",items:u(t).state.microphoneList,"item-title":"name","item-value":"id",modelValue:u(t).state.activeAudioDevice,"onUpdate:modelValue":[n[2]||(n[2]=a=>u(t).state.activeAudioDevice=a),n[3]||(n[3]=a=>u(t).commit("changeMicrophone"))]},null,8,["items","modelValue"])]),_:1}),s(ee,null,{default:y(()=>[s(Z,{label:"Speaker",class:"margin input","hide-details":"auto"})]),_:1})]),_:1})]),_:1})]),_:1}),o("div",Ia,[Ma,J(" "+Q(i.value),1)])]),o("div",La,[s(L,{class:"leave-button",onClick:T},{default:y(()=>[J("Leave")]),_:1})])]),o("div",Ta,[H.value==="GALLERY"?(w(),N("div",Ra,[o("div",Pa,[o("div",Oa,[o("div",Ua,[u(t).state.localMedia&&c.value?(w(),K(re,{key:0,"ask-height":"240px","ask-width":"320px","local-video":u(t).state.localMedia,userName:"Me"},null,8,["local-video"])):se("",!0)]),o("div",Da,[u(t).state.videoList?(w(!0),N(ce,{key:0},ue(u(t).state.videoList,a=>(w(),K(re,{remoteVideo:a.media,index:a.index,userName:a.displayName,connection:a.connection,"ask-height":"240px","ask-width":"320px",maxIndex:le},null,8,["remoteVideo","index","userName","connection"]))),256)):se("",!0)])])]),o("div",$a,[s(L,{class:Y(["margin align-left",r.value===1?"inactive-button":"active-button"]),icon:"",onClick:$},{default:y(()=>[za]),_:1},8,["class"]),o("div",Na,[s(L,{class:"margin active-button",icon:"",onClick:n[4]||(n[4]=a=>u(t).commit("toggleLocalVideoMute"))},{default:y(()=>[o("i",{class:Y(["center",u(t).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1}),s(L,{class:"margin active-button",icon:"",onClick:n[5]||(n[5]=a=>u(t).commit("toggleLocalAudioMute"))},{default:y(()=>[o("i",{class:Y(["center",u(t).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),s(L,{class:Y(["margin active-button align-right",r.value===I.value?"inactive-button":"active-button"]),icon:"",onClick:E},{default:y(()=>[Ba]),_:1},8,["class"])])])):(w(),N("div",Ea,[Ha,o("div",Ga,[(w(!0),N(ce,null,ue(u(B),a=>(w(),N("div",null,[o("div",{class:Y(["chat-message",a.user===u(t).state.displayName?"my-chat":"other-chat"])},Q(a.user)+": "+Q(a.message),3)]))),256))]),o("div",Fa,[s(Me,{label:"Chat Message",clearable:"",class:"margin chat-input","hide-details":"auto",modelValue:V.value,"onUpdate:modelValue":n[6]||(n[6]=a=>V.value=a)},null,8,["modelValue"]),s(L,{class:"chat-button",onClick:U},{default:y(()=>[J("Send")]),_:1})])]))]),o("div",Ya,[s(_a,{"fixed-tabs":"","selected-class":"activeTab",class:"tabs",onClick:M},{default:y(()=>[s(_e,{value:"gallery"},{default:y(()=>[J("Gallery")]),_:1}),s(_e,{value:"chat"},{default:y(()=>[J("Chat")]),_:1})]),_:1})])])]))}});const Wa=Le(ja,[["__scopeId","data-v-e2c6dad3"]]),Xa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATLSURBVHgBzVrtcdw2EH3U+L/jCkKlgERxA6bVQKQKxLgB0S4goSqQ1EBySgGR3UDCVCC5gYgd+FwBjMclxY8jsCB5N3dvBpwTAQJ8u4vdxVIRDgGZ4fU7RLiAwZn9fVL9LXis2x1uosI1RYR9Q0j8zl9oX96Ff217ZwmVw479ERECx7b9DdFAKIx9619xHd11b+6HSEviH9tiTMcGmTAimaHE2Na2FVa1a8xFOIkb264g5pZCzK+LL7a9bszsBdwLcoJL9G13bR98hWWg8P6An8SVXSd/XjMzJPTGtqQz5lU9zyn/OBqdJjOxvT7YlqO/AUssQbuxE8+opw6JLj6P3EtqgY8QERL0DvHIg/NNSkCTuvT0k+k7x/3PjmdSXsY0kmPeBgwBteFzsaUvVoyAZvojf/SJiDYusAvoc9MTXXn6XQKIeRlqJMHukKsjDP7z9L709G0Q0QJTjPl4o/R/GovYNWhCP3me3SCipQhx4yUmITNn8AuBZvURfriE/JWXIZEQrzQlnWig7bv1MOV4hrjsGG5BVN5sSOQROs4wBbLJtWc0bSSO+9Qk490GEW1C4mKieSVKP0X+l6ef++M3z9OVg+gTkRyqgB8kkSEcl0q/O3aIWSVwm9Vz3jcWEH2+vH05MRk/ZIy2pz55+nzaoFk976tNIiKdW/hBrdxDh6Y541xLtJHCbZpl10EcOQbl0Df+iV3sT2XML0p/MRo72lTfp42e5YwTEbs7h57tpnbR+9HNn5kEeuy4c/RpqX45dNcujaCW1FvoZOhaH0b2TAoNYylJZhoSieMpHqhOhzfdRAgh8zPglFyDGDxH0NRaQppZ9VMSmlNmmsNS6nhG0vxFxYfMcONeIizfKuCPH/0zt+wJan/KybGHacUHkXaO5an+k20/QF46qedLPONpTh8siZVrwDQiDbZHKARMQWhOXi86j0gDIZRAl+gc0HPeukxpiO3VtVpS19CPAz4UVUpvqhJpcI0g8rwYXyZGm2Ks61Y6D0BC5gnhKOs56YZpOh/n1sxeDF6kW0hOnE9lZl0vzBcoOklfSEryGiKMpRWZHqLOy1HyzJ9iTEeJ1uXGnnGU+Dl2ANGIpBMkMde2Y4RE8ggr7AiRUpBrUKBNVTiu+/0iFDSnY+wI1EgOX3IGG4HHDj6ixRThsURLcxaBGqGXiR3955aE//grGmU6n8CP0q6WO4sMC0EiBq6FQ03BL4whnF+dloDZr8sNhrnHzKSY5umYHA4z5cUgEZeqT9SFxGVfYx5S8GPPe7OVfI1EbuCW/r2TzHvDlJ5m4q+u+zV7bEPkyq7x/1LtSECUs4ZPsis78tEuyvIktUApau6Xkf9tPU5z7+06cuYoMRHdyJ5j8zvdXDBrzTpzxxBBhVYpV5hIqJ80hgVHH0q44o7Mn2OasFYQoail3MixYIppZ4yiSj+0GCFHWtYA+G09Rjge7Py3VbHCoaVIWZj2nUD2xfedxUtIOX966t1W13PMO2GW9brdb4ovt3ewmgohlGM7+/Jhf0SI5f8BQXCSD/sl0kCKcvRqWuV+DEyPTg+DCCHaoXsmoTjwKak6Wq92hEPBTSVTZtoMoiEZcqWJxjUfjka6aD/wpJDSazeLGK2yHCaRLpr/rmPzRPpvTn6IoHFFRiQAAAAASUVORK5CYII=",te=e=>(xe("data-v-a2b8af59"),e=e(),we(),e),qa={class:"container"},Ja={key:0,class:"tab-container"},Ka={class:"video-container"},Qa={class:"basic-flex"},Za={class:"controls-container"},en=te(()=>o("i",{class:"center icon-caret-left-md"},null,-1)),tn=te(()=>o("i",{class:"center icon-caret-right-md"},null,-1)),an={key:1},nn={class:"chat-container"},sn=te(()=>o("div",{class:"chat-header"},[o("h3",null,"Chat")],-1)),ln={class:"chat-body"},on={class:"basic-flex"},cn={class:"right-column"},un={class:"center user-container"},dn=te(()=>o("i",{class:"icon-users users"},null,-1)),rn=te(()=>o("i",{class:"center icon-cog-gear"},null,-1)),vn=te(()=>o("h3",null,"Settings",-1)),mn=te(()=>o("i",{class:"center icon-chat"},null,-1)),fn=te(()=>o("i",{class:"center icon-video"},null,-1)),oe=2,gn=pe({__name:"InCallLandscape",setup(e){const t=be(),d=ke();let c=x([]);const I=x(""),v=x(1),S=t.state.localMedia;let i=null,r=null,m=x({});const f=x("");let k=x([]);const C=x(1),V=z(()=>t.state.pinLocal||C.value===1),B=z(()=>t.state.pinLocal?v.value-1:Math.ceil(v.value/oe));function E(){C.value*oe-1<v.value&&(C.value++,O())}function $(){C.value>1&&(C.value--,O())}function O(){let l=new Array;if(t.state.pinLocal||C.value===1)for(let n in m.value){let a=m.value[n];a.index===C.value&&l.push(a)}else for(let n in m.value){let a=m.value[n];(a.index===C.value*oe-oe||a.index===C.value*oe-1)&&l.push(a)}t.commit("setVideoList",l)}function T(){for(let l in m.value){const n=m.value[l].connection;(n.getState()!==p.ConnectionState.Closed.valueOf()||n.getState()!==p.ConnectionState.Closing)&&n.close(),delete m.value[l]}P(),d.push("/")}function U(){if(f.value.length===0)return;let l=new Date;var n={from:t.state.displayName,timestamp:new Date().getTime(),timestampHourFormat:l.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),timestampDateFormat:l.toLocaleString(),text:f.value};i&&i.sendMessage(JSON.stringify(n)),f.value=""}Ae(async()=>{await F(),t.commit("setLocalMedia",S),t.commit("populateCameraList"),t.commit("populateMicrophoneList"),t.commit("setActiveVideoDevice",S.getVideoSourceInput().getId()),t.commit("setActiveAudioDevice",S.getAudioSourceInput().getId()),t.commit("setVideoMuted",S.getVideoMuted()),t.commit("setAudioMuted",S.getAudioMuted()),i&&i.addOnMessage(function(l,n){var a=JSON.parse(n);console.log(n),k.value.push({user:a.from,message:a.text})})});async function F(){const l=new p.Promise;r=new p.Client(W.gatewayUrl,W.applicationId),r.setUserAlias(t.state.displayName);const n=p.Token.generateClientRegisterToken(W.applicationId,r.getUserId(),r.getDeviceId(),r.getId(),[new p.ChannelClaim(t.state.channelId)],W.sharedSecret);return r.register(n).then(a=>{b(a),l.resolve(null)}).fail(a=>{p.Log.error("Failed to register with Gateway."),l.reject(a)}),l}function b(l){i=l[0];const n=g(t.state.localMedia);t.commit("setUpstreamConnection",n),i&&i.addOnRemoteUpstreamConnectionOpen(a=>h(a,i))}function h(l,n){const a=new p.RemoteMedia,D=new p.AudioStream(a),j=new p.VideoStream(a);if(n){const R=n.createSfuDownstreamConnection(l,D,j);return v.value===1&&t.commit("setVideoList",[{connection:R,media:a,index:v.value,displayName:l.getUserAlias()}]),m.value[R.getId()]={connection:R,media:a,index:v.value++,displayName:l.getUserAlias()},c.value.length===0&&a.getAudioSinkOutputs().then(function(G){c.value=G.map(X=>(X.getId()==="default"&&(I.value=X.getId()),{name:X.getName(),id:X.getId()}))}).fail(function(G){console.error(G)}),R.addOnStateChange(G=>{G.getRemoteClosed()&&(delete m.value[R.getId()],a.destroy(),v.value--)}),R.open(),R}}function g(l){const n=new p.AudioStream(l),a=new p.VideoStream(l);if(!i)return;const D=i.createSfuUpstreamConnection(n,a);return D.addOnStateChange(j=>{p.Log.debug(`Upstream connection is ${new p.ConnectionStateWrapper(j.getState()).toString()}.`)}),D.open(),D}function P(){if(r)return r.unregister().fail(()=>p.Log.error("Unregistration failed."))}const H=x("GALLERY");function M(l){H.value=l}return(l,n)=>(w(),N("div",qa,[o("div",null,[H.value=="GALLERY"?(w(),N("div",Ja,[o("div",Ka,[o("div",null,[u(t).state.localMedia&&V.value?(w(),K(re,{key:0,"ask-height":"265px","ask-width":"280px","local-video":u(t).state.localMedia,userName:"Me"},null,8,["local-video"])):se("",!0)]),o("div",Qa,[u(t).state.videoList?(w(!0),N(ce,{key:0},ue(u(t).state.videoList,a=>(w(),K(re,{remoteVideo:a.media,index:a.index,userName:a.displayName,connection:a.connection,"ask-height":"265px","ask-width":"280px",maxIndex:oe},null,8,["remoteVideo","index","userName","connection"]))),256)):se("",!0)])]),o("div",Za,[s(L,{class:Y(["margin align-left",C.value===1?"inactive-button":"active-button"]),icon:"",onClick:$},{default:y(()=>[en]),_:1},8,["class"]),s(L,{class:"margin active-button",icon:"",onClick:n[0]||(n[0]=a=>u(t).commit("toggleLocalVideoMute"))},{default:y(()=>[o("i",{class:Y(["center",u(t).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1}),s(L,{class:"margin active-button",icon:"",onClick:n[1]||(n[1]=a=>u(t).commit("toggleLocalAudioMute"))},{default:y(()=>[o("i",{class:Y(["center",u(t).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1}),s(L,{class:Y(["margin align-right",C.value===B.value?"inactive-button":"active-button"]),icon:"",onClick:E},{default:y(()=>[tn]),_:1},8,["class"])])])):(w(),N("div",an,[o("div",nn,[sn,o("div",ln,[(w(!0),N(ce,null,ue(u(k),a=>(w(),N("div",null,[o("div",{class:Y(["chat-message",a.user===u(t).state.displayName?"my-chat":"other-chat"])},Q(a.user)+": "+Q(a.message),3)]))),256))]),o("div",on,[s(Me,{label:"Chat Message",clearable:"",class:"chat-input","hide-details":"auto",modelValue:f.value,"onUpdate:modelValue":n[2]||(n[2]=a=>f.value=a)},null,8,["modelValue"]),s(L,{class:"chat-button",onClick:U},{default:y(()=>[J("Send")]),_:1})])])]))]),o("div",cn,[s(Ce,{src:Xa,class:"logo"}),o("span",un,[dn,J(" "+Q(v.value),1)]),s(Xe,{"close-on-content-click":!1,location:"left"},{activator:y(({props:a})=>[s(L,ge({class:"margin center icon"},a,{icon:"",flat:""}),{default:y(()=>[rn]),_:2},1040)]),default:y(()=>[s(Je,{class:"settings-menu"},{default:y(()=>[s(We,null,{default:y(()=>[s(ee,null,{default:y(()=>[vn]),_:1}),s(ee,null,{default:y(()=>[s(Z,{label:"Camera",class:"margin input","hide-details":"auto",items:u(t).state.cameraList,"item-title":"name","item-value":"id",modelValue:u(t).state.activeVideoDevice,"onUpdate:modelValue":[n[3]||(n[3]=a=>u(t).state.activeVideoDevice=a),n[4]||(n[4]=a=>u(t).commit("changeCamera"))]},null,8,["items","modelValue"])]),_:1}),s(ee,null,{default:y(()=>[s(Z,{label:"Microphone",class:"margin input","hide-details":"auto",items:u(t).state.microphoneList,"item-title":"name","item-value":"id",modelValue:u(t).state.activeAudioDevice,"onUpdate:modelValue":[n[5]||(n[5]=a=>u(t).state.activeAudioDevice=a),n[6]||(n[6]=a=>u(t).commit("changeMicrophone"))]},null,8,["items","modelValue"])]),_:1}),s(ee,null,{default:y(()=>[s(Z,{label:"Speaker",class:"margin input","hide-details":"auto"})]),_:1})]),_:1})]),_:1})]),_:1}),s(L,{icon:"",class:"center icon",flat:"",onClick:n[7]||(n[7]=a=>M("CHAT"))},{default:y(()=>[mn]),_:1}),s(L,{icon:"",class:"center icon",flat:"",onClick:n[8]||(n[8]=a=>M("GALLERY"))},{default:y(()=>[fn]),_:1}),s(L,{class:"center leave-button",onClick:T},{default:y(()=>[J("Leave")]),_:1})])]))}});const hn=Le(gn,[["__scopeId","data-v-a2b8af59"]]),Cn=pe({__name:"InCall",setup(e){const{mobile:t}=Fe(),d=x(t&&window.innerHeight>window.innerWidth);return(c,I)=>u(t)?d.value?(w(),K(Wa,{key:1})):(w(),K(hn,{key:2})):(w(),K(ca,{key:0}))}});export{Cn as default};
