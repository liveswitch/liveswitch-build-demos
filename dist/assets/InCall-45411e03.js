import{d as ve,e as be,f as ye,h as ke,i as Se,r as M,w as ae,o as _e,j as x,k as $,n as i,b as a,v as G,A as N,s as c,t as p,z as W,B as le,F as ne,C as ie,q as O,D as Ce,x as Ve,a as ce,m as me,E as Ee,u as ue,p as re,I as se,G as xe,H as Xe,J as Qe,K as H,L as Je,M as Ze,N as et,O as J,P as de,Q as tt,y as Oe,R as Te,S as at,T as lt,U as nt,V as it,W as Q,X as st}from"./index-445720ac.js";import{_ as Ne,V as he,e as w,a as oe,d as q,b as Ae,g as we,h as Me,i as Re,j as ge,k as ot,l as ct,n as ut,o as dt,p as rt,q as vt,r as mt,s as ht,t as ft,R as gt,u as pt,v as bt,w as Ue,x as yt,y as kt,z as St,A as _t,B as Ct,C as Vt,D as xt,L as At,E as wt,F as Mt,G as It,H as Lt,I as Dt,J as Tt,K as Rt,M as Pe,N as He,O as Pt,P as Ge,Q as j,S as Ye}from"./VSelect-7753895f.js";const Ht={class:"container"},$t={class:"left-column"},zt={class:"flex-center"},Bt={class:"row-spread"},Et={class:"user-counter"},Ot=i("i",{class:"icon-users users"},null,-1),Nt={class:"channel-label"},Ut={class:"video-grid"},Gt={class:"right-column"},Yt={class:"settings-menu-in-call"},Ft={class:"basic-flex"},Kt={class:"basic-flex"},Wt={class:"basic-flex"},qt={class:"chat-container"},jt=i("div",{class:"chat-header"},[i("h2",{class:"margin"},"Chat")],-1),Xt={class:"chat-body"},Qt={class:"chat-footer"},Jt=ve({__name:"InCall",setup(t){const e=be(),u=ye(),d=ke(),m=Se("liveSwitch");let f=null,h=null;const s=e.state.localMedia;let r=M({});const v=M(1);let y=M("100%");const C=M("");let A=M([]);ae(v,function(){const S=Math.ceil(Math.sqrt(v.value)),_=100/S;y.value="calc("+_+"% - "+S*5+"px)"});async function g(){await m.disconnectFromMeeting(r.value,f,s),s.destroy(),e.commit("resetStore"),u.push("/")}function T(S){e.commit("changeCamera",S)}function B(S){e.commit("changeMicrophone",S)}async function D(S){const _=Object.keys(r.value)[0],k=r.value[_],R=await m.getAudioSink(S,k);m.updateSpeaker(r.value,R),e.commit("setActiveSpeakerDevice",S)}function E(S){r.value[S.getId()].remoteMedia.destroy(),delete r.value[S.getId()],v.value--}function I(){C.value.length!==0&&(m.sendChat(h,e.state.displayName,C.value),C.value="")}function L(S,_){let k=S.getRemoteConnectionInfo().getUserAlias();r.value[S.getId()]={connection:S,remoteMedia:_,index:v.value++,displayName:k},D(e.state.activeSpeakerDevice),m.createDownStreamCloseHandler(S,E)}function z(S){var _=JSON.parse(S);A.value.push({user:_.from,message:_.text})}return _e(async()=>{if(!e.state.channelId){d.params.channelId?u.push({name:"Lobby",params:{channelId:d.params.channelId}}):u.push("/");return}e.state.upstreamConnection||(f=await m.registerClient(e.state.displayName,e.state.channelId),h=await m.getChannel(f),m.openSfuUpstreamConnection(e.state.localMedia,h),m.createDownStreamOpenHandler(h,L)),e.commit("setLocalMedia",s),e.commit("populateCameraList"),e.commit("populateMicrophoneList"),e.commit("setActiveVideoDevice",s.getVideoSourceInput().getId()),e.commit("setActiveAudioDevice",s.getAudioSourceInput().getId()),e.commit("setVideoMuted",s.getVideoMuted()),e.commit("setAudioMuted",s.getAudioMuted()),m.addIncomingChatHandler(h,z)}),(S,_)=>(x(),$("div",Ht,[i("div",$t,[i("div",zt,[a(he,{src:Ne,class:"logo-in-call"})]),i("div",Bt,[i("div",Et,[Ot,G(" "+N(v.value),1)]),i("div",Nt," Channel: "+N(c(e).state.channelId),1),a(w,{class:"leave-button liveswitch",onClick:g},{default:p(()=>[G("Leave Call")]),_:1})]),i("div",Ut,[c(e).state.localMedia?(x(),W(oe,{key:0,class:"video","local-video":c(e).state.localMedia,userName:"Me",askHeight:c(y),askWidth:c(y)},null,8,["local-video","askHeight","askWidth"])):le("",!0),c(r)?(x(!0),$(ne,{key:1},ie(c(r),k=>(x(),W(oe,{class:"video",remoteVideo:k.remoteMedia,index:k.index,userName:k.displayName,connection:k.connection,askHeight:c(y),askWidth:c(y)},null,8,["remoteVideo","index","userName","connection","askHeight","askWidth"]))),256)):le("",!0)])]),i("div",Gt,[i("div",Yt,[i("div",Ft,[a(q,{label:"Camera",class:"margin input liveswitch","hide-details":"auto",items:c(e).state.cameraList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeVideoDevice,"onUpdate:modelValue":[_[0]||(_[0]=k=>c(e).state.activeVideoDevice=k),T]},null,8,["items","modelValue"]),a(w,{class:"margin button liveswitch",icon:"",onClick:_[1]||(_[1]=k=>c(e).commit("toggleLocalVideoMute"))},{default:p(()=>[i("i",{class:O(["center",c(e).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1})]),i("div",Kt,[a(q,{label:"Microphone",class:"margin input liveswitch","hide-details":"auto",items:c(e).state.microphoneList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeAudioDevice,"onUpdate:modelValue":[_[2]||(_[2]=k=>c(e).state.activeAudioDevice=k),B]},null,8,["items","modelValue"]),a(w,{class:"margin button liveswitch",icon:"",onClick:_[3]||(_[3]=k=>c(e).commit("toggleLocalAudioMute"))},{default:p(()=>[i("i",{class:O(["center",c(e).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),i("div",Wt,[a(q,{label:"Speaker",class:"margin input liveswitch","hide-details":"auto",items:c(e).state.speakerList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeSpeakerDevice,"onUpdate:modelValue":[_[4]||(_[4]=k=>c(e).state.activeSpeakerDevice=k),D]},null,8,["items","modelValue"])])]),i("div",qt,[jt,i("div",Xt,[(x(!0),$(ne,null,ie(c(A),k=>(x(),$("div",null,[i("div",{class:O(["chat-message",k.user===c(e).state.displayName?"my-chat":"other-chat"])},N(k.user)+": "+N(k.message),3)]))),256))]),i("div",Qt,[a(Ae,{label:"Chat Message",clearable:"",class:"margin chat-input liveswitch","hide-details":"auto",modelValue:C.value,"onUpdate:modelValue":_[5]||(_[5]=k=>C.value=k),onKeydown:Ce(Ve(I,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),a(w,{class:"chat-button liveswitch",onClick:I},{default:p(()=>[G(" Send ")]),_:1})])])])]))}});const Zt=ce()({name:"VCardActions",props:me(),setup(t,e){let{slots:u}=e;return Ee({VBtn:{variant:"text"}}),ue(()=>{var d;return a("div",{class:["v-card-actions",t.class],style:t.style},[(d=u.default)==null?void 0:d.call(u)])}),{}}}),ea=we("v-card-subtitle"),ta=we("v-card-title"),aa=re({appendAvatar:String,appendIcon:se,prependAvatar:String,prependIcon:se,subtitle:String,title:String,...me(),...Me()},"VCardItem"),la=ce()({name:"VCardItem",props:aa(),setup(t,e){let{slots:u}=e;return ue(()=>{var v;const d=!!(t.prependAvatar||t.prependIcon),m=!!(d||u.prepend),f=!!(t.appendAvatar||t.appendIcon),h=!!(f||u.append),s=!!(t.title||u.title),r=!!(t.subtitle||u.subtitle);return a("div",{class:["v-card-item",t.class],style:t.style},[m&&a("div",{key:"prepend",class:"v-card-item__prepend"},[u.prepend?a(ge,{key:"prepend-defaults",disabled:!d,defaults:{VAvatar:{density:t.density,icon:t.prependIcon,image:t.prependAvatar}}},u.prepend):d&&a(Re,{key:"prepend-avatar",density:t.density,icon:t.prependIcon,image:t.prependAvatar},null)]),a("div",{class:"v-card-item__content"},[s&&a(ta,{key:"title"},{default:()=>{var y;return[((y=u.title)==null?void 0:y.call(u))??t.title]}}),r&&a(ea,{key:"subtitle"},{default:()=>{var y;return[((y=u.subtitle)==null?void 0:y.call(u))??t.subtitle]}}),(v=u.default)==null?void 0:v.call(u)]),h&&a("div",{key:"append",class:"v-card-item__append"},[u.append?a(ge,{key:"append-defaults",disabled:!f,defaults:{VAvatar:{density:t.density,icon:t.appendIcon,image:t.appendAvatar}}},u.append):f&&a(Re,{key:"append-avatar",density:t.density,icon:t.appendIcon,image:t.appendAvatar},null)])])}),{}}}),na=we("v-card-text"),ia=re({appendAvatar:String,appendIcon:se,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:se,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...ot(),...me(),...Me(),...ct(),...ut(),...dt(),...rt(),...vt(),...mt(),...ht(),...xe(),...Xe(),...ft({variant:"elevated"})},"VCard"),Fe=ce()({name:"VCard",directives:{Ripple:gt},props:ia(),setup(t,e){let{attrs:u,slots:d}=e;const{themeClasses:m}=Qe(t),{borderClasses:f}=pt(t),{colorClasses:h,colorStyles:s,variantClasses:r}=bt(t),{densityClasses:v}=Ue(t),{dimensionStyles:y}=yt(t),{elevationClasses:C}=kt(t),{loaderClasses:A}=St(t),{locationStyles:g}=_t(t),{positionClasses:T}=Ct(t),{roundedClasses:B}=Vt(t),D=xt(t,u),E=H(()=>t.link!==!1&&D.isLink.value),I=H(()=>!t.disabled&&t.link!==!1&&(t.link||D.isClickable.value));return ue(()=>{const L=E.value?"a":t.tag,z=!!(d.title||t.title),S=!!(d.subtitle||t.subtitle),_=z||S,k=!!(d.append||t.appendAvatar||t.appendIcon),R=!!(d.prepend||t.prependAvatar||t.prependIcon),Y=!!(d.image||t.image),P=_||R||k,F=!!(d.text||t.text);return Je(a(L,{class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":I.value},m.value,f.value,h.value,v.value,C.value,A.value,T.value,B.value,r.value,t.class],style:[s.value,y.value,g.value,t.style],href:D.href.value,onClick:I.value&&D.navigate,tabindex:t.disabled?-1:void 0},{default:()=>{var K;return[Y&&a("div",{key:"image",class:"v-card__image"},[d.image?a(ge,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},d.image):a(he,{key:"image-img",cover:!0,src:t.image},null)]),a(At,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:d.loader}),P&&a(la,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:d.item,prepend:d.prepend,title:d.title,subtitle:d.subtitle,append:d.append}),F&&a(na,{key:"text"},{default:()=>{var n;return[((n=d.text)==null?void 0:n.call(d))??t.text]}}),(K=d.default)==null?void 0:K.call(d),d.actions&&a(Zt,null,{default:d.actions}),wt(I.value,"v-card")]}}),[[Ze("ripple"),I.value&&t.ripple]])}),{}}});const Ke=Symbol.for("vuetify:v-tabs"),sa=re({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...et(Mt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),pe=ce()({name:"VTab",props:sa(),setup(t,e){let{slots:u,attrs:d}=e;const{textColorClasses:m,textColorStyles:f}=It(t,"sliderColor"),h=H(()=>t.direction==="horizontal"),s=J(!1),r=M(),v=M();function y(C){var g,T;let{value:A}=C;if(s.value=A,A){const B=(T=(g=r.value)==null?void 0:g.$el.parentElement)==null?void 0:T.querySelector(".v-tab--selected .v-tab__slider"),D=v.value;if(!B||!D)return;const E=getComputedStyle(B).color,I=B.getBoundingClientRect(),L=D.getBoundingClientRect(),z=h.value?"x":"y",S=h.value?"X":"Y",_=h.value?"right":"bottom",k=h.value?"width":"height",R=I[z],Y=L[z],P=R>Y?I[_]-L[_]:I[z]-L[z],F=Math.sign(P)>0?h.value?"right":"bottom":Math.sign(P)<0?h.value?"left":"top":"center",n=(Math.abs(P)+(Math.sign(P)<0?I[k]:L[k]))/Math.max(I[k],L[k])||0,o=I[k]/L[k]||0,l=1.5;Lt(D,{backgroundColor:[E,"currentcolor"],transform:[`translate${S}(${P}px) scale${S}(${o})`,`translate${S}(${P/l}px) scale${S}(${(n-1)/l+1})`,"none"],transformOrigin:Array(3).fill(F)},{duration:225,easing:Dt})}}return ue(()=>{const[C]=w.filterProps(t);return a(w,de({symbol:Ke,ref:r,class:["v-tab",t.class],style:t.style,tabindex:s.value?0:-1,role:"tab","aria-selected":String(s.value),active:!1},C,d,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":y}),{default:()=>{var A;return[((A=u.default)==null?void 0:A.call(u))??t.text,!t.hideSlider&&a("div",{ref:v,class:["v-tab__slider",m.value],style:f.value},null)]}})}),{}}});function $e(t){const u=Math.abs(t);return Math.sign(t)*(u/((1/.501-2)*(1-u)+1))}function ze(t){let{selectedElement:e,containerSize:u,contentSize:d,isRtl:m,currentScrollOffset:f,isHorizontal:h}=t;const s=h?e.clientWidth:e.clientHeight,r=h?e.offsetLeft:e.offsetTop,v=m&&h?d-r-s:r,y=u+f,C=s+v,A=s*.4;return v<=f?f=Math.max(v-A,0):y<=C&&(f=Math.min(f-(y-C-A),d-u)),f}function oa(t){let{selectedElement:e,containerSize:u,contentSize:d,isRtl:m,isHorizontal:f}=t;const h=f?e.clientWidth:e.clientHeight,s=f?e.offsetLeft:e.offsetTop,r=m&&f?d-s-h/2-u/2:s+h/2-u/2;return Math.min(d-u,Math.max(0,r))}const ca=Symbol.for("vuetify:v-slide-group"),We=re({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:ca},nextIcon:{type:se,default:"$next"},prevIcon:{type:se,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...me(),...xe(),...Tt({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Be=ce()({name:"VSlideGroup",props:We(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:u}=e;const{isRtl:d}=tt(),{mobile:m}=Oe(),f=Rt(t,t.symbol),h=J(!1),s=J(0),r=J(0),v=J(0),y=H(()=>t.direction==="horizontal"),{resizeRef:C,contentRect:A}=Te(),{resizeRef:g,contentRect:T}=Te(),B=H(()=>f.selected.value.length?f.items.value.findIndex(b=>b.id===f.selected.value[0]):-1),D=H(()=>f.selected.value.length?f.items.value.findIndex(b=>b.id===f.selected.value[f.selected.value.length-1]):-1);if(at){let b=-1;ae(()=>[f.selected.value,A.value,T.value,y.value],()=>{cancelAnimationFrame(b),b=requestAnimationFrame(()=>{if(A.value&&T.value){const V=y.value?"width":"height";r.value=A.value[V],v.value=T.value[V],h.value=r.value+1<v.value}if(B.value>=0&&g.value){const V=g.value.children[D.value];B.value===0||!h.value?s.value=0:t.centerActive?s.value=oa({selectedElement:V,containerSize:r.value,contentSize:v.value,isRtl:d.value,isHorizontal:y.value}):h.value&&(s.value=ze({selectedElement:V,containerSize:r.value,contentSize:v.value,isRtl:d.value,currentScrollOffset:s.value,isHorizontal:y.value}))}})})}const E=J(!1);let I=0,L=0;function z(b){const V=y.value?"clientX":"clientY";L=(d.value&&y.value?-1:1)*s.value,I=b.touches[0][V],E.value=!0}function S(b){if(!h.value)return;const V=y.value?"clientX":"clientY",U=d.value&&y.value?-1:1;s.value=U*(L+I-b.touches[0][V])}function _(b){const V=v.value-r.value;s.value<0||!h.value?s.value=0:s.value>=V&&(s.value=V),E.value=!1}function k(){C.value&&(C.value[y.value?"scrollLeft":"scrollTop"]=0)}const R=J(!1);function Y(b){if(R.value=!0,!(!h.value||!g.value)){for(const V of b.composedPath())for(const U of g.value.children)if(U===V){s.value=ze({selectedElement:U,containerSize:r.value,contentSize:v.value,isRtl:d.value,currentScrollOffset:s.value,isHorizontal:y.value});return}}}function P(b){R.value=!1}function F(b){var V;!R.value&&!(b.relatedTarget&&((V=g.value)!=null&&V.contains(b.relatedTarget)))&&n()}function K(b){g.value&&(y.value?b.key==="ArrowRight"?n(d.value?"prev":"next"):b.key==="ArrowLeft"&&n(d.value?"next":"prev"):b.key==="ArrowDown"?n("next"):b.key==="ArrowUp"&&n("prev"),b.key==="Home"?n("first"):b.key==="End"&&n("last"))}function n(b){var V,U,Ie,Le,De;if(g.value)if(!b)(V=lt(g.value)[0])==null||V.focus();else if(b==="next"){const Z=(U=g.value.querySelector(":focus"))==null?void 0:U.nextElementSibling;Z?Z.focus():n("first")}else if(b==="prev"){const Z=(Ie=g.value.querySelector(":focus"))==null?void 0:Ie.previousElementSibling;Z?Z.focus():n("last")}else b==="first"?(Le=g.value.firstElementChild)==null||Le.focus():b==="last"&&((De=g.value.lastElementChild)==null||De.focus())}function o(b){const V=s.value+(b==="prev"?-1:1)*r.value;s.value=nt(V,0,v.value-r.value)}const l=H(()=>{let b=s.value>v.value-r.value?-(v.value-r.value)+$e(v.value-r.value-s.value):-s.value;s.value<=0&&(b=$e(-s.value));const V=d.value&&y.value?-1:1;return{transform:`translate${y.value?"X":"Y"}(${V*b}px)`,transition:E.value?"none":"",willChange:E.value?"transform":""}}),X=H(()=>({next:f.next,prev:f.prev,select:f.select,isSelected:f.isSelected})),fe=H(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!m.value;case!0:return h.value||Math.abs(s.value)>0;case"mobile":return m.value||h.value||Math.abs(s.value)>0;default:return!m.value&&(h.value||Math.abs(s.value)>0)}}),qe=H(()=>Math.abs(s.value)>0),je=H(()=>v.value>Math.abs(s.value)+r.value);return ue(()=>a(t.tag,{class:["v-slide-group",{"v-slide-group--vertical":!y.value,"v-slide-group--has-affixes":fe.value,"v-slide-group--is-overflowing":h.value},t.class],style:t.style,tabindex:R.value||f.selected.value.length?-1:0,onFocus:F},{default:()=>{var b,V,U;return[fe.value&&a("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!qe.value}],onClick:()=>o("prev")},[((b=u.prev)==null?void 0:b.call(u,X.value))??a(Pe,null,{default:()=>[a(He,{icon:d.value?t.nextIcon:t.prevIcon},null)]})]),a("div",{key:"container",ref:C,class:"v-slide-group__container",onScroll:k},[a("div",{ref:g,class:"v-slide-group__content",style:l.value,onTouchstartPassive:z,onTouchmovePassive:S,onTouchendPassive:_,onFocusin:Y,onFocusout:P,onKeydown:K},[(V=u.default)==null?void 0:V.call(u,X.value)])]),fe.value&&a("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!je.value}],onClick:()=>o("next")},[((U=u.next)==null?void 0:U.call(u,X.value))??a(Pe,null,{default:()=>[a(He,{icon:d.value?t.prevIcon:t.nextIcon},null)]})])]}})),{selected:f.selected,scrollTo:o,scrollOffset:s,focus:n}}});function ua(t){return t?t.map(e=>typeof e=="string"?{title:e,value:e}:e):[]}const da=re({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...We({mandatory:"force"}),...Me(),...xe()},"VTabs"),ra=ce()({name:"VTabs",props:da(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:u}=e;const d=it(t,"modelValue"),m=H(()=>ua(t.items)),{densityClasses:f}=Ue(t),{backgroundColorClasses:h,backgroundColorStyles:s}=Pt(Q(t,"bgColor"));return Ee({VTab:{color:Q(t,"color"),direction:Q(t,"direction"),stacked:Q(t,"stacked"),fixed:Q(t,"fixedTabs"),sliderColor:Q(t,"sliderColor"),hideSlider:Q(t,"hideSlider")}}),ue(()=>{const[r]=Be.filterProps(t);return a(Be,de(r,{modelValue:d.value,"onUpdate:modelValue":v=>d.value=v,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},f.value,h.value,t.class],style:[{"--v-tabs-height":st(t.height)},s.value,t.style],role:"tablist",symbol:Ke}),{default:()=>[u.default?u.default():m.value.map(v=>a(pe,de(v,{key:v.title}),null))]})}),{}}}),va={class:"container"},ma={class:"column"},ha={class:"channel-label"},fa={class:"margin spread"},ga={class:"row-in-call"},pa=i("i",{class:"center icon-cog-gear"},null,-1),ba=i("h3",null,"Settings",-1),ya={class:"users-container"},ka=i("i",{class:"icon-users users"},null,-1),Sa={class:"button-wrapper"},_a={class:"tab-container"},Ca={key:0},Va={class:"basic-flex"},xa={class:"even-spacing"},Aa={class:"video-container"},wa={class:"video-container"},Ma={class:"controls-container"},Ia=i("i",{class:"center icon-caret-left-md"},null,-1),La={class:"row-center"},Da=i("i",{class:"center icon-caret-right-md"},null,-1),Ta={key:1,class:"chat-container"},Ra=i("div",{class:"chat-header"},[i("h3",null,"Chat")],-1),Pa={class:"chat-body"},Ha={class:"chat-footer"},$a={class:"tab-buttons"},ee=2,za=ve({__name:"InCallPortrait",setup(t){const e=be(),u=ye(),d=ke(),m=Se("liveSwitch");let f=null,h=null;const s=e.state.localMedia;let r=M({});const v=M(1);let y=M("100%");const C=M("");let A=M([]);const g=M(1),T=M("GALLERY"),B=H(()=>e.state.pinLocal||g.value===1),D=H(()=>e.state.pinLocal?v.value-1:Math.ceil(v.value/ee));ae(e.state.pinLocal,L);function E(){g.value*ee-1<v.value&&(g.value++,L())}function I(){g.value>1&&(g.value--,L())}function L(){let n=new Array;if(e.state.pinLocal||g.value===1)for(let o in r.value){let l=r.value[o];l.index===g.value&&n.push(l)}else for(let o in r.value){let l=r.value[o];(l.index===g.value*ee-ee||l.index===g.value*ee-1)&&n.push(l)}e.commit("setVideoList",n)}function z(n){T.value=n.target.innerText}ae(v,function(){const n=Math.ceil(Math.sqrt(v.value)),o=100/n;y.value="calc("+o+"% - "+n*5+"px)"});async function S(){await m.disconnectFromMeeting(r.value,f,s),s.destroy(),e.commit("resetStore"),u.push("/")}function _(n){e.commit("changeCamera",n)}function k(n){e.commit("changeMicrophone",n)}async function R(n){const o=Object.keys(r.value)[0],l=r.value[o],X=await m.getAudioSink(n,l);m.updateSpeaker(r.value,X),e.commit("setActiveSpeakerDevice",n)}function Y(n){r.value[n.getId()].remoteMedia.destroy(),delete r.value[n.getId()],v.value--}function P(){C.value.length!==0&&(m.sendChat(h,e.state.displayName,C.value),C.value="")}function F(n,o){let l=n.getRemoteConnectionInfo().getUserAlias();v.value===1&&e.commit("setVideoList",[{connection:n,media:o,index:v.value,displayName:l}]),r.value[n.getId()]={connection:n,remoteMedia:o,index:v.value++,displayName:l},R(e.state.activeSpeakerDevice),m.createDownStreamCloseHandler(n,Y)}function K(n){var o=JSON.parse(n);A.value.push({user:o.from,message:o.text})}return _e(async()=>{if(!e.state.channelId){d.params.channelId?u.push({name:"Lobby",params:{channelId:d.params.channelId}}):u.push("/");return}e.state.upstreamConnection||(f=await m.registerClient(e.state.displayName,e.state.channelId),h=await m.getChannel(f),m.openSfuUpstreamConnection(e.state.localMedia,h),m.createDownStreamOpenHandler(h,F)),e.commit("setLocalMedia",s),e.commit("populateCameraList"),e.commit("populateMicrophoneList"),e.commit("setActiveVideoDevice",s.getVideoSourceInput().getId()),e.commit("setActiveAudioDevice",s.getAudioSourceInput().getId()),e.commit("setVideoMuted",s.getVideoMuted()),e.commit("setAudioMuted",s.getAudioMuted()),m.addIncomingChatHandler(h,K)}),(n,o)=>(x(),$("div",va,[i("div",ma,[a(he,{src:Ne,class:"logo-in-call liveswitch"}),i("div",ha," Channel: "+N(c(e).state.channelId),1),i("div",fa,[i("div",ga,[a(Ye,{"close-on-content-click":!1,location:"bottom"},{activator:p(({props:l})=>[a(w,de(l,{icon:"",class:"icon liveswitch",flat:""}),{default:p(()=>[pa]),_:2},1040)]),default:p(()=>[a(Fe,{class:"settings-menu-in-call"},{default:p(()=>[a(Ge,null,{default:p(()=>[a(j,null,{default:p(()=>[ba]),_:1}),a(j,null,{default:p(()=>[a(q,{label:"Camera",class:"margin input-in-call liveswitch","hide-details":"auto",items:c(e).state.cameraList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeVideoDevice,"onUpdate:modelValue":[o[0]||(o[0]=l=>c(e).state.activeVideoDevice=l),_]},null,8,["items","modelValue"])]),_:1}),a(j,null,{default:p(()=>[a(q,{label:"Microphone",class:"margin input-in-call liveswitch","hide-details":"auto",items:c(e).state.microphoneList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeAudioDevice,"onUpdate:modelValue":[o[1]||(o[1]=l=>c(e).state.activeAudioDevice=l),k]},null,8,["items","modelValue"])]),_:1}),a(j,null,{default:p(()=>[a(q,{label:"Speaker",class:"margin input-in-call liveswitch","hide-details":"auto",items:c(e).state.speakerList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeSpeakerDevice,"onUpdate:modelValue":[o[2]||(o[2]=l=>c(e).state.activeSpeakerDevice=l),R]},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),i("div",ya,[ka,G(" "+N(v.value),1)])]),i("div",Sa,[a(w,{class:"leave-button liveswitch",onClick:S},{default:p(()=>[G("Leave")]),_:1})])]),i("div",_a,[T.value==="GALLERY"?(x(),$("div",Ca,[i("div",Va,[i("div",xa,[i("div",Aa,[c(e).state.localMedia&&B.value?(x(),W(oe,{key:0,"ask-height":"235px","ask-width":"320px",maxLabelLength:7,"local-video":c(e).state.localMedia,userName:"Me"},null,8,["local-video"])):le("",!0)]),i("div",wa,[c(e).state.videoList?(x(!0),$(ne,{key:0},ie(c(e).state.videoList,l=>(x(),W(oe,{remoteVideo:l.media,index:l.index,userName:l.displayName,connection:l.connection,maxLabelLength:7,"ask-height":"235px","ask-width":"320px",maxIndex:ee},null,8,["remoteVideo","index","userName","connection"]))),256)):le("",!0)])])]),i("div",Ma,[a(w,{class:O(["margin align-left liveswitch",g.value===1?"inactive-button":"active-button"]),icon:"",onClick:I},{default:p(()=>[Ia]),_:1},8,["class"]),i("div",La,[a(w,{class:"margin active-button liveswitch",icon:"",onClick:o[3]||(o[3]=l=>c(e).commit("toggleLocalVideoMute"))},{default:p(()=>[i("i",{class:O(["center",c(e).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1}),a(w,{class:"margin active-button liveswitch",icon:"",onClick:o[4]||(o[4]=l=>c(e).commit("toggleLocalAudioMute"))},{default:p(()=>[i("i",{class:O(["center",c(e).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),a(w,{class:O(["margin active-button align-right liveswitch",g.value===D.value?"inactive-button":"active-button"]),icon:"",onClick:E},{default:p(()=>[Da]),_:1},8,["class"])])])):(x(),$("div",Ta,[Ra,i("div",Pa,[(x(!0),$(ne,null,ie(c(A),l=>(x(),$("div",null,[i("div",{class:O(["chat-message",l.user===c(e).state.displayName?"my-chat":"other-chat"])},N(l.user)+": "+N(l.message),3)]))),256))]),i("div",Ha,[a(Ae,{label:"Chat Message",clearable:"",class:"margin chat-input liveswitch","hide-details":"auto",modelValue:C.value,"onUpdate:modelValue":o[5]||(o[5]=l=>C.value=l),onKeydown:Ce(Ve(P,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),a(w,{class:"chat-button liveswitch",onClick:P},{default:p(()=>[G("Send")]),_:1})])]))]),i("div",$a,[a(ra,{"fixed-tabs":"","selected-class":"activeTab",class:"tabs",onClick:z},{default:p(()=>[a(pe,{value:"gallery"},{default:p(()=>[G("Gallery")]),_:1}),a(pe,{value:"chat"},{default:p(()=>[G("Chat")]),_:1})]),_:1})])])]))}}),Ba="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATLSURBVHgBzVrtcdw2EH3U+L/jCkKlgERxA6bVQKQKxLgB0S4goSqQ1EBySgGR3UDCVCC5gYgd+FwBjMclxY8jsCB5N3dvBpwTAQJ8u4vdxVIRDgGZ4fU7RLiAwZn9fVL9LXis2x1uosI1RYR9Q0j8zl9oX96Ff217ZwmVw479ERECx7b9DdFAKIx9619xHd11b+6HSEviH9tiTMcGmTAimaHE2Na2FVa1a8xFOIkb264g5pZCzK+LL7a9bszsBdwLcoJL9G13bR98hWWg8P6An8SVXSd/XjMzJPTGtqQz5lU9zyn/OBqdJjOxvT7YlqO/AUssQbuxE8+opw6JLj6P3EtqgY8QERL0DvHIg/NNSkCTuvT0k+k7x/3PjmdSXsY0kmPeBgwBteFzsaUvVoyAZvojf/SJiDYusAvoc9MTXXn6XQKIeRlqJMHukKsjDP7z9L709G0Q0QJTjPl4o/R/GovYNWhCP3me3SCipQhx4yUmITNn8AuBZvURfriE/JWXIZEQrzQlnWig7bv1MOV4hrjsGG5BVN5sSOQROs4wBbLJtWc0bSSO+9Qk490GEW1C4mKieSVKP0X+l6ef++M3z9OVg+gTkRyqgB8kkSEcl0q/O3aIWSVwm9Vz3jcWEH2+vH05MRk/ZIy2pz55+nzaoFk976tNIiKdW/hBrdxDh6Y541xLtJHCbZpl10EcOQbl0Df+iV3sT2XML0p/MRo72lTfp42e5YwTEbs7h57tpnbR+9HNn5kEeuy4c/RpqX45dNcujaCW1FvoZOhaH0b2TAoNYylJZhoSieMpHqhOhzfdRAgh8zPglFyDGDxH0NRaQppZ9VMSmlNmmsNS6nhG0vxFxYfMcONeIizfKuCPH/0zt+wJan/KybGHacUHkXaO5an+k20/QF46qedLPONpTh8siZVrwDQiDbZHKARMQWhOXi86j0gDIZRAl+gc0HPeukxpiO3VtVpS19CPAz4UVUpvqhJpcI0g8rwYXyZGm2Ks61Y6D0BC5gnhKOs56YZpOh/n1sxeDF6kW0hOnE9lZl0vzBcoOklfSEryGiKMpRWZHqLOy1HyzJ9iTEeJ1uXGnnGU+Dl2ANGIpBMkMde2Y4RE8ggr7AiRUpBrUKBNVTiu+/0iFDSnY+wI1EgOX3IGG4HHDj6ixRThsURLcxaBGqGXiR3955aE//grGmU6n8CP0q6WO4sMC0EiBq6FQ03BL4whnF+dloDZr8sNhrnHzKSY5umYHA4z5cUgEZeqT9SFxGVfYx5S8GPPe7OVfI1EbuCW/r2TzHvDlJ5m4q+u+zV7bEPkyq7x/1LtSECUs4ZPsis78tEuyvIktUApau6Xkf9tPU5z7+06cuYoMRHdyJ5j8zvdXDBrzTpzxxBBhVYpV5hIqJ80hgVHH0q44o7Mn2OasFYQoail3MixYIppZ4yiSj+0GCFHWtYA+G09Rjge7Py3VbHCoaVIWZj2nUD2xfedxUtIOX966t1W13PMO2GW9brdb4ovt3ewmgohlGM7+/Jhf0SI5f8BQXCSD/sl0kCKcvRqWuV+DEyPTg+DCCHaoXsmoTjwKak6Wq92hEPBTSVTZtoMoiEZcqWJxjUfjka6aD/wpJDSazeLGK2yHCaRLpr/rmPzRPpvTn6IoHFFRiQAAAAASUVORK5CYII=",Ea={class:"container"},Oa={key:0,class:"tab-container"},Na={class:"channel-label"},Ua={class:"video-container"},Ga={class:"basic-flex"},Ya={class:"controls-container"},Fa=i("i",{class:"center icon-caret-left-md"},null,-1),Ka={class:"row-center"},Wa=i("i",{class:"center icon-caret-right-md"},null,-1),qa={key:1},ja={class:"chat-container"},Xa=i("div",{class:"chat-header"},[i("h3",null,"Chat")],-1),Qa={class:"chat-body"},Ja={class:"basic-flex"},Za={class:"right-column"},el={class:"center users-container"},tl=i("i",{class:"icon-users users"},null,-1),al=i("i",{class:"center icon-cog-gear"},null,-1),ll=i("h3",null,"Settings",-1),nl=i("i",{class:"center icon-chat"},null,-1),il=i("i",{class:"center icon-video"},null,-1),te=2,sl=ve({__name:"InCallLandscape",setup(t){const e=be(),u=ye(),d=ke(),m=Se("liveSwitch");let f=null,h=null;const s=e.state.localMedia;let r=M({});const v=M(1);let y=M("100%");const C=M("");let A=M([]);const g=M(1),T=M("GALLERY"),B=H(()=>e.state.pinLocal||g.value===1),D=H(()=>e.state.pinLocal?v.value-1:Math.ceil(v.value/te));ae(e.state.pinLocal,L);function E(){g.value*te-1<v.value&&(g.value++,L())}function I(){g.value>1&&(g.value--,L())}function L(){let n=new Array;if(e.state.pinLocal||g.value===1)for(let o in r.value){let l=r.value[o];l.index===g.value&&n.push(l)}else for(let o in r.value){let l=r.value[o];(l.index===g.value*te-te||l.index===g.value*te-1)&&n.push(l)}e.commit("setVideoList",n)}function z(n){T.value=n}ae(v,function(){const n=Math.ceil(Math.sqrt(v.value)),o=100/n;y.value="calc("+o+"% - "+n*5+"px)"});async function S(){await m.disconnectFromMeeting(r.value,f,s),s.destroy(),e.commit("resetStore"),u.push("/")}function _(n){e.commit("changeCamera",n)}function k(n){e.commit("changeMicrophone",n)}async function R(n){const o=Object.keys(r.value)[0],l=r.value[o],X=await m.getAudioSink(n,l);m.updateSpeaker(r.value,X),e.commit("setActiveSpeakerDevice",n)}function Y(n){r.value[n.getId()].remoteMedia.destroy(),delete r.value[n.getId()],v.value--}function P(){C.value.length!==0&&(m.sendChat(h,e.state.displayName,C.value),C.value="")}function F(n,o){let l=n.getRemoteConnectionInfo().getUserAlias();v.value===1&&e.commit("setVideoList",[{connection:n,media:o,index:v.value,displayName:l}]),r.value[n.getId()]={connection:n,remoteMedia:o,index:v.value++,displayName:l},R(e.state.activeSpeakerDevice),m.createDownStreamCloseHandler(n,Y)}function K(n){var o=JSON.parse(n);A.value.push({user:o.from,message:o.text})}return _e(async()=>{if(!e.state.channelId){d.params.channelId?u.push({name:"Lobby",params:{channelId:d.params.channelId}}):u.push("/");return}e.state.upstreamConnection||(f=await m.registerClient(e.state.displayName,e.state.channelId),h=await m.getChannel(f),m.openSfuUpstreamConnection(e.state.localMedia,h),m.createDownStreamOpenHandler(h,F)),e.commit("setLocalMedia",s),e.commit("populateCameraList"),e.commit("populateMicrophoneList"),e.commit("setActiveVideoDevice",s.getVideoSourceInput().getId()),e.commit("setActiveAudioDevice",s.getAudioSourceInput().getId()),e.commit("setVideoMuted",s.getVideoMuted()),e.commit("setAudioMuted",s.getAudioMuted()),m.addIncomingChatHandler(h,K)}),(n,o)=>(x(),$("div",Ea,[i("div",null,[T.value=="GALLERY"?(x(),$("div",Oa,[i("div",Na," Channel: "+N(c(e).state.channelId),1),i("div",Ua,[i("div",null,[c(e).state.localMedia&&B.value?(x(),W(oe,{key:0,"ask-height":"240px","ask-width":"280px",maxLabelLength:5,"local-video":c(e).state.localMedia,userName:"Me"},null,8,["local-video"])):le("",!0)]),i("div",Ga,[c(e).state.videoList?(x(!0),$(ne,{key:0},ie(c(e).state.videoList,l=>(x(),W(oe,{remoteVideo:l.media,index:l.index,userName:l.displayName,connection:l.connection,"ask-height":"240px","ask-width":"280px",maxLabelLength:5,maxIndex:te},null,8,["remoteVideo","index","userName","connection"]))),256)):le("",!0)])]),i("div",Ya,[a(w,{class:O(["margin align-left liveswitch",g.value===1?"inactive-button":"active-button"]),icon:"",onClick:I},{default:p(()=>[Fa]),_:1},8,["class"]),i("div",Ka,[a(w,{class:"margin active-button liveswitch",icon:"",onClick:o[0]||(o[0]=l=>c(e).commit("toggleLocalVideoMute"))},{default:p(()=>[i("i",{class:O(["center",c(e).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1}),a(w,{class:"margin active-button liveswitch",icon:"",onClick:o[1]||(o[1]=l=>c(e).commit("toggleLocalAudioMute"))},{default:p(()=>[i("i",{class:O(["center",c(e).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),a(w,{class:O(["margin align-right liveswitch",g.value===D.value?"inactive-button":"active-button"]),icon:"",onClick:E},{default:p(()=>[Wa]),_:1},8,["class"])])])):(x(),$("div",qa,[i("div",ja,[Xa,i("div",Qa,[(x(!0),$(ne,null,ie(c(A),l=>(x(),$("div",null,[i("div",{class:O(["chat-message",l.user===c(e).state.displayName?"my-chat":"other-chat"])},N(l.user)+": "+N(l.message),3)]))),256))]),i("div",Ja,[a(Ae,{label:"Chat Message",clearable:"",class:"chat-input liveswitch","hide-details":"auto",modelValue:C.value,"onUpdate:modelValue":o[2]||(o[2]=l=>C.value=l),onKeydown:Ce(Ve(P,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),a(w,{class:"chat-button liveswitch",onClick:P},{default:p(()=>[G("Send")]),_:1})])])]))]),i("div",Za,[a(he,{src:Ba,class:"logo-in-call liveswitch"}),i("span",el,[tl,G(" "+N(v.value),1)]),a(Ye,{"close-on-content-click":!1,location:"left"},{activator:p(({props:l})=>[a(w,de({class:"margin center icon liveswitch"},l,{icon:"",flat:""}),{default:p(()=>[al]),_:2},1040)]),default:p(()=>[a(Fe,{class:"settings-menu-in-call"},{default:p(()=>[a(Ge,null,{default:p(()=>[a(j,null,{default:p(()=>[ll]),_:1}),a(j,null,{default:p(()=>[a(q,{label:"Camera",class:"margin input-in-call liveswitch","hide-details":"auto",items:c(e).state.cameraList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeVideoDevice,"onUpdate:modelValue":[o[3]||(o[3]=l=>c(e).state.activeVideoDevice=l),_]},null,8,["items","modelValue"])]),_:1}),a(j,null,{default:p(()=>[a(q,{label:"Microphone",class:"margin input-in-call liveswitch","hide-details":"auto",items:c(e).state.microphoneList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeAudioDevice,"onUpdate:modelValue":[o[4]||(o[4]=l=>c(e).state.activeAudioDevice=l),k]},null,8,["items","modelValue"])]),_:1}),a(j,null,{default:p(()=>[a(q,{label:"Speaker",class:"margin input-in-call liveswitch","hide-details":"auto",items:c(e).state.speakerList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeSpeakerDevice,"onUpdate:modelValue":[o[5]||(o[5]=l=>c(e).state.activeSpeakerDevice=l),R]},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(w,{icon:"",class:"center icon liveswitch",flat:"",onClick:o[6]||(o[6]=l=>z("CHAT"))},{default:p(()=>[nl]),_:1}),a(w,{icon:"",class:"center icon liveswitch",flat:"",onClick:o[7]||(o[7]=l=>z("GALLERY"))},{default:p(()=>[il]),_:1}),a(w,{class:"center leave-button liveswitch",onClick:S},{default:p(()=>[G("Leave")]),_:1})])]))}}),ul=ve({__name:"InCall",setup(t){const{mobile:e}=Oe(),u=M(e&&window.innerHeight>window.innerWidth);return(d,m)=>c(e)?u.value?(x(),W(za,{key:1})):(x(),W(sl,{key:2})):(x(),W(Jt,{key:0}))}});export{ul as default};
