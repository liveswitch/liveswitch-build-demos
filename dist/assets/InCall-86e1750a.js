import{d as re,e as be,f as ye,i as ke,r as M,w as ae,o as Se,j as C,k as P,n as o,b as l,v as F,A as N,s as c,t as g,z as U,B as W,F as le,C as ie,q as E,D as _e,x as Ce,a as oe,m as ve,E as Be,u as ce,p as de,I as ne,G as Ve,H as je,J as Xe,K as R,L as Qe,M as Je,N as Ze,O as J,P as ue,Q as et,y as Ee,R as De,S as tt,T as at,U as lt,V as it,W as Q,X as nt}from"./index-337be4ab.js";import{_ as Oe,V as me,e as w,a as se,d as q,b as xe,g as Ae,h as we,i as Te,j as ge,k as st,l as ot,n as ct,o as ut,p as dt,q as rt,r as vt,s as mt,t as ht,R as ft,u as gt,v as pt,w as Ne,x as bt,y as yt,z as kt,A as St,B as _t,C as Ct,D as Vt,L as xt,E as At,F as wt,G as Mt,H as Lt,I as It,J as Dt,K as Tt,M as Re,N as Pe,O as Rt,P as Ue,Q as X,S as Ge}from"./VSelect-e313e4db.js";const Pt={class:"container"},Ht={class:"left-column"},$t={class:"flex-center"},zt={class:"row-spread"},Bt={class:"user-counter"},Et=o("i",{class:"icon-users users"},null,-1),Ot={class:"channel-label"},Nt={class:"video-grid"},Ut={class:"right-column"},Gt={class:"settings-menu-in-call"},Yt={class:"basic-flex"},Ft={class:"basic-flex"},Kt={class:"basic-flex"},Wt={class:"chat-container"},qt=o("div",{class:"chat-header"},[o("h2",{class:"margin"},"Chat")],-1),jt={class:"chat-body"},Xt={class:"chat-footer"},Qt=re({__name:"InCall",setup(t){const e=be(),d=ye(),a=ke("liveSwitch");let _=null,m=null;const r=e.state.localMedia;let i=M({});const v=M(1);let p=M("100%");const h=M("");let L=M([]);ae(v,function(){const k=Math.ceil(Math.sqrt(v.value)),y=100/k;p.value="calc("+y+"% - "+k*5+"px)"});async function f(){await a.disconnectFromMeeting(i.value,_,r),r.destroy(),e.commit("resetStore"),d.push("/")}function x(k){e.commit("changeCamera",k)}function z(k){e.commit("changeMicrophone",k)}async function H(k){const y=Object.keys(i.value)[0],S=i.value[y],D=await a.getAudioSink(k,S);a.updateSpeaker(i.value,D),e.commit("setActiveSpeakerDevice",k)}function T(k){i.value[k.getId()].remoteMedia.destroy(),delete i.value[k.getId()],v.value--}function $(){h.value.length!==0&&(a.sendChat(m,e.state.displayName,h.value),h.value="")}function A(k,y){let S=k.getRemoteConnectionInfo().getUserAlias();i.value[k.getId()]={connection:k,remoteMedia:y,index:v.value++,displayName:S},H(e.state.activeSpeakerDevice),a.createDownStreamCloseHandler(k,T)}function I(k){var y=JSON.parse(k);L.value.push({user:y.from,message:y.text})}return Se(async()=>{_=await a.registerClient(e.state.displayName,e.state.channelId),m=await a.getChannel(_),a.openSfuUpstreamConnection(e.state.localMedia,m),a.createDownStreamOpenHandler(m,A),e.commit("setLocalMedia",r),e.commit("populateCameraList"),e.commit("populateMicrophoneList"),e.commit("setActiveVideoDevice",r.getVideoSourceInput().getId()),e.commit("setActiveAudioDevice",r.getAudioSourceInput().getId()),e.commit("setVideoMuted",r.getVideoMuted()),e.commit("setAudioMuted",r.getAudioMuted()),a.addIncomingChatHandler(m,I)}),(k,y)=>(C(),P("div",Pt,[o("div",Ht,[o("div",$t,[l(me,{src:Oe,class:"logo-in-call"})]),o("div",zt,[o("div",Bt,[Et,F(" "+N(v.value),1)]),o("div",Ot," Channel: "+N(c(e).state.channelId),1),l(w,{class:"leave-button liveswitch",onClick:f},{default:g(()=>[F("Leave Call")]),_:1})]),o("div",Nt,[c(e).state.localMedia?(C(),U(se,{key:0,class:"video","local-video":c(e).state.localMedia,userName:"Me",askHeight:c(p),askWidth:c(p)},null,8,["local-video","askHeight","askWidth"])):W("",!0),c(i)?(C(!0),P(le,{key:1},ie(c(i),S=>(C(),U(se,{class:"video",remoteVideo:S.remoteMedia,index:S.index,userName:S.displayName,connection:S.connection,askHeight:c(p),askWidth:c(p)},null,8,["remoteVideo","index","userName","connection","askHeight","askWidth"]))),256)):W("",!0)])]),o("div",Ut,[o("div",Gt,[o("div",Yt,[l(q,{label:"Camera",class:"margin input liveswitch","hide-details":"auto",items:c(e).state.cameraList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeVideoDevice,"onUpdate:modelValue":[y[0]||(y[0]=S=>c(e).state.activeVideoDevice=S),x]},null,8,["items","modelValue"]),l(w,{class:"margin button liveswitch",icon:"",onClick:y[1]||(y[1]=S=>c(e).commit("toggleLocalVideoMute"))},{default:g(()=>[o("i",{class:E(["center",c(e).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1})]),o("div",Ft,[l(q,{label:"Microphone",class:"margin input liveswitch","hide-details":"auto",items:c(e).state.microphoneList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeAudioDevice,"onUpdate:modelValue":[y[2]||(y[2]=S=>c(e).state.activeAudioDevice=S),z]},null,8,["items","modelValue"]),l(w,{class:"margin button liveswitch",icon:"",onClick:y[3]||(y[3]=S=>c(e).commit("toggleLocalAudioMute"))},{default:g(()=>[o("i",{class:E(["center",c(e).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),o("div",Kt,[c(e).state.speakerList.length>0?(C(),U(q,{key:0,label:"Speaker",class:"margin input liveswitch","hide-details":"auto",items:c(e).state.speakerList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeSpeakerDevice,"onUpdate:modelValue":[y[4]||(y[4]=S=>c(e).state.activeSpeakerDevice=S),H]},null,8,["items","modelValue"])):W("",!0)])]),o("div",Wt,[qt,o("div",jt,[(C(!0),P(le,null,ie(c(L),S=>(C(),P("div",null,[o("div",{class:E(["chat-message",S.user===c(e).state.displayName?"my-chat":"other-chat"])},N(S.user)+": "+N(S.message),3)]))),256))]),o("div",Xt,[l(xe,{label:"Chat Message",clearable:"",class:"margin chat-input liveswitch","hide-details":"auto",modelValue:h.value,"onUpdate:modelValue":y[5]||(y[5]=S=>h.value=S),onKeydown:_e(Ce($,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),l(w,{class:"chat-button liveswitch",onClick:$},{default:g(()=>[F(" Send ")]),_:1})])])])]))}});const Jt=oe()({name:"VCardActions",props:ve(),setup(t,e){let{slots:d}=e;return Be({VBtn:{variant:"text"}}),ce(()=>{var a;return l("div",{class:["v-card-actions",t.class],style:t.style},[(a=d.default)==null?void 0:a.call(d)])}),{}}}),Zt=Ae("v-card-subtitle"),ea=Ae("v-card-title"),ta=de({appendAvatar:String,appendIcon:ne,prependAvatar:String,prependIcon:ne,subtitle:String,title:String,...ve(),...we()},"VCardItem"),aa=oe()({name:"VCardItem",props:ta(),setup(t,e){let{slots:d}=e;return ce(()=>{var p;const a=!!(t.prependAvatar||t.prependIcon),_=!!(a||d.prepend),m=!!(t.appendAvatar||t.appendIcon),r=!!(m||d.append),i=!!(t.title||d.title),v=!!(t.subtitle||d.subtitle);return l("div",{class:["v-card-item",t.class],style:t.style},[_&&l("div",{key:"prepend",class:"v-card-item__prepend"},[d.prepend?l(ge,{key:"prepend-defaults",disabled:!a,defaults:{VAvatar:{density:t.density,icon:t.prependIcon,image:t.prependAvatar}}},d.prepend):a&&l(Te,{key:"prepend-avatar",density:t.density,icon:t.prependIcon,image:t.prependAvatar},null)]),l("div",{class:"v-card-item__content"},[i&&l(ea,{key:"title"},{default:()=>{var h;return[((h=d.title)==null?void 0:h.call(d))??t.title]}}),v&&l(Zt,{key:"subtitle"},{default:()=>{var h;return[((h=d.subtitle)==null?void 0:h.call(d))??t.subtitle]}}),(p=d.default)==null?void 0:p.call(d)]),r&&l("div",{key:"append",class:"v-card-item__append"},[d.append?l(ge,{key:"append-defaults",disabled:!m,defaults:{VAvatar:{density:t.density,icon:t.appendIcon,image:t.appendAvatar}}},d.append):m&&l(Te,{key:"append-avatar",density:t.density,icon:t.appendIcon,image:t.appendAvatar},null)])])}),{}}}),la=Ae("v-card-text"),ia=de({appendAvatar:String,appendIcon:ne,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:ne,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...st(),...ve(),...we(),...ot(),...ct(),...ut(),...dt(),...rt(),...vt(),...mt(),...Ve(),...je(),...ht({variant:"elevated"})},"VCard"),Ye=oe()({name:"VCard",directives:{Ripple:ft},props:ia(),setup(t,e){let{attrs:d,slots:a}=e;const{themeClasses:_}=Xe(t),{borderClasses:m}=gt(t),{colorClasses:r,colorStyles:i,variantClasses:v}=pt(t),{densityClasses:p}=Ne(t),{dimensionStyles:h}=bt(t),{elevationClasses:L}=yt(t),{loaderClasses:f}=kt(t),{locationStyles:x}=St(t),{positionClasses:z}=_t(t),{roundedClasses:H}=Ct(t),T=Vt(t,d),$=R(()=>t.link!==!1&&T.isLink.value),A=R(()=>!t.disabled&&t.link!==!1&&(t.link||T.isClickable.value));return ce(()=>{const I=$.value?"a":t.tag,k=!!(a.title||t.title),y=!!(a.subtitle||t.subtitle),S=k||y,D=!!(a.append||t.appendAvatar||t.appendIcon),O=!!(a.prepend||t.prependAvatar||t.prependIcon),G=!!(a.image||t.image),B=S||O||D,K=!!(a.text||t.text);return Qe(l(I,{class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":A.value},_.value,m.value,r.value,p.value,L.value,f.value,z.value,H.value,v.value,t.class],style:[i.value,h.value,x.value,t.style],href:T.href.value,onClick:A.value&&T.navigate,tabindex:t.disabled?-1:void 0},{default:()=>{var u;return[G&&l("div",{key:"image",class:"v-card__image"},[a.image?l(ge,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},a.image):l(me,{key:"image-img",cover:!0,src:t.image},null)]),l(xt,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:a.loader}),B&&l(aa,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:a.item,prepend:a.prepend,title:a.title,subtitle:a.subtitle,append:a.append}),K&&l(la,{key:"text"},{default:()=>{var n;return[((n=a.text)==null?void 0:n.call(a))??t.text]}}),(u=a.default)==null?void 0:u.call(a),a.actions&&l(Jt,null,{default:a.actions}),At(A.value,"v-card")]}}),[[Je("ripple"),A.value&&t.ripple]])}),{}}});const Fe=Symbol.for("vuetify:v-tabs"),na=de({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Ze(wt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),pe=oe()({name:"VTab",props:na(),setup(t,e){let{slots:d,attrs:a}=e;const{textColorClasses:_,textColorStyles:m}=Mt(t,"sliderColor"),r=R(()=>t.direction==="horizontal"),i=J(!1),v=M(),p=M();function h(L){var x,z;let{value:f}=L;if(i.value=f,f){const H=(z=(x=v.value)==null?void 0:x.$el.parentElement)==null?void 0:z.querySelector(".v-tab--selected .v-tab__slider"),T=p.value;if(!H||!T)return;const $=getComputedStyle(H).color,A=H.getBoundingClientRect(),I=T.getBoundingClientRect(),k=r.value?"x":"y",y=r.value?"X":"Y",S=r.value?"right":"bottom",D=r.value?"width":"height",O=A[k],G=I[k],B=O>G?A[S]-I[S]:A[k]-I[k],K=Math.sign(B)>0?r.value?"right":"bottom":Math.sign(B)<0?r.value?"left":"top":"center",n=(Math.abs(B)+(Math.sign(B)<0?A[D]:I[D]))/Math.max(A[D],I[D])||0,s=A[D]/I[D]||0,j=1.5;Lt(T,{backgroundColor:[$,"currentcolor"],transform:[`translate${y}(${B}px) scale${y}(${s})`,`translate${y}(${B/j}px) scale${y}(${(n-1)/j+1})`,"none"],transformOrigin:Array(3).fill(K)},{duration:225,easing:It})}}return ce(()=>{const[L]=w.filterProps(t);return l(w,ue({symbol:Fe,ref:v,class:["v-tab",t.class],style:t.style,tabindex:i.value?0:-1,role:"tab","aria-selected":String(i.value),active:!1},L,a,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":h}),{default:()=>{var f;return[((f=d.default)==null?void 0:f.call(d))??t.text,!t.hideSlider&&l("div",{ref:p,class:["v-tab__slider",_.value],style:m.value},null)]}})}),{}}});function He(t){const d=Math.abs(t);return Math.sign(t)*(d/((1/.501-2)*(1-d)+1))}function $e(t){let{selectedElement:e,containerSize:d,contentSize:a,isRtl:_,currentScrollOffset:m,isHorizontal:r}=t;const i=r?e.clientWidth:e.clientHeight,v=r?e.offsetLeft:e.offsetTop,p=_&&r?a-v-i:v,h=d+m,L=i+p,f=i*.4;return p<=m?m=Math.max(p-f,0):h<=L&&(m=Math.min(m-(h-L-f),a-d)),m}function sa(t){let{selectedElement:e,containerSize:d,contentSize:a,isRtl:_,isHorizontal:m}=t;const r=m?e.clientWidth:e.clientHeight,i=m?e.offsetLeft:e.offsetTop,v=_&&m?a-i-r/2-d/2:i+r/2-d/2;return Math.min(a-d,Math.max(0,v))}const oa=Symbol.for("vuetify:v-slide-group"),Ke=de({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:oa},nextIcon:{type:ne,default:"$next"},prevIcon:{type:ne,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...ve(),...Ve(),...Dt({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),ze=oe()({name:"VSlideGroup",props:Ke(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:d}=e;const{isRtl:a}=et(),{mobile:_}=Ee(),m=Tt(t,t.symbol),r=J(!1),i=J(0),v=J(0),p=J(0),h=R(()=>t.direction==="horizontal"),{resizeRef:L,contentRect:f}=De(),{resizeRef:x,contentRect:z}=De(),H=R(()=>m.selected.value.length?m.items.value.findIndex(b=>b.id===m.selected.value[0]):-1),T=R(()=>m.selected.value.length?m.items.value.findIndex(b=>b.id===m.selected.value[m.selected.value.length-1]):-1);if(tt){let b=-1;ae(()=>[m.selected.value,f.value,z.value,h.value],()=>{cancelAnimationFrame(b),b=requestAnimationFrame(()=>{if(f.value&&z.value){const V=h.value?"width":"height";v.value=f.value[V],p.value=z.value[V],r.value=v.value+1<p.value}if(H.value>=0&&x.value){const V=x.value.children[T.value];H.value===0||!r.value?i.value=0:t.centerActive?i.value=sa({selectedElement:V,containerSize:v.value,contentSize:p.value,isRtl:a.value,isHorizontal:h.value}):r.value&&(i.value=$e({selectedElement:V,containerSize:v.value,contentSize:p.value,isRtl:a.value,currentScrollOffset:i.value,isHorizontal:h.value}))}})})}const $=J(!1);let A=0,I=0;function k(b){const V=h.value?"clientX":"clientY";I=(a.value&&h.value?-1:1)*i.value,A=b.touches[0][V],$.value=!0}function y(b){if(!r.value)return;const V=h.value?"clientX":"clientY",Y=a.value&&h.value?-1:1;i.value=Y*(I+A-b.touches[0][V])}function S(b){const V=p.value-v.value;i.value<0||!r.value?i.value=0:i.value>=V&&(i.value=V),$.value=!1}function D(){L.value&&(L.value[h.value?"scrollLeft":"scrollTop"]=0)}const O=J(!1);function G(b){if(O.value=!0,!(!r.value||!x.value)){for(const V of b.composedPath())for(const Y of x.value.children)if(Y===V){i.value=$e({selectedElement:Y,containerSize:v.value,contentSize:p.value,isRtl:a.value,currentScrollOffset:i.value,isHorizontal:h.value});return}}}function B(b){O.value=!1}function K(b){var V;!O.value&&!(b.relatedTarget&&((V=x.value)!=null&&V.contains(b.relatedTarget)))&&n()}function u(b){x.value&&(h.value?b.key==="ArrowRight"?n(a.value?"prev":"next"):b.key==="ArrowLeft"&&n(a.value?"next":"prev"):b.key==="ArrowDown"?n("next"):b.key==="ArrowUp"&&n("prev"),b.key==="Home"?n("first"):b.key==="End"&&n("last"))}function n(b){var V,Y,Me,Le,Ie;if(x.value)if(!b)(V=at(x.value)[0])==null||V.focus();else if(b==="next"){const Z=(Y=x.value.querySelector(":focus"))==null?void 0:Y.nextElementSibling;Z?Z.focus():n("first")}else if(b==="prev"){const Z=(Me=x.value.querySelector(":focus"))==null?void 0:Me.previousElementSibling;Z?Z.focus():n("last")}else b==="first"?(Le=x.value.firstElementChild)==null||Le.focus():b==="last"&&((Ie=x.value.lastElementChild)==null||Ie.focus())}function s(b){const V=i.value+(b==="prev"?-1:1)*v.value;i.value=lt(V,0,p.value-v.value)}const j=R(()=>{let b=i.value>p.value-v.value?-(p.value-v.value)+He(p.value-v.value-i.value):-i.value;i.value<=0&&(b=He(-i.value));const V=a.value&&h.value?-1:1;return{transform:`translate${h.value?"X":"Y"}(${V*b}px)`,transition:$.value?"none":"",willChange:$.value?"transform":""}}),he=R(()=>({next:m.next,prev:m.prev,select:m.select,isSelected:m.isSelected})),fe=R(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!_.value;case!0:return r.value||Math.abs(i.value)>0;case"mobile":return _.value||r.value||Math.abs(i.value)>0;default:return!_.value&&(r.value||Math.abs(i.value)>0)}}),We=R(()=>Math.abs(i.value)>0),qe=R(()=>p.value>Math.abs(i.value)+v.value);return ce(()=>l(t.tag,{class:["v-slide-group",{"v-slide-group--vertical":!h.value,"v-slide-group--has-affixes":fe.value,"v-slide-group--is-overflowing":r.value},t.class],style:t.style,tabindex:O.value||m.selected.value.length?-1:0,onFocus:K},{default:()=>{var b,V,Y;return[fe.value&&l("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!We.value}],onClick:()=>s("prev")},[((b=d.prev)==null?void 0:b.call(d,he.value))??l(Re,null,{default:()=>[l(Pe,{icon:a.value?t.nextIcon:t.prevIcon},null)]})]),l("div",{key:"container",ref:L,class:"v-slide-group__container",onScroll:D},[l("div",{ref:x,class:"v-slide-group__content",style:j.value,onTouchstartPassive:k,onTouchmovePassive:y,onTouchendPassive:S,onFocusin:G,onFocusout:B,onKeydown:u},[(V=d.default)==null?void 0:V.call(d,he.value)])]),fe.value&&l("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!qe.value}],onClick:()=>s("next")},[((Y=d.next)==null?void 0:Y.call(d,he.value))??l(Re,null,{default:()=>[l(Pe,{icon:a.value?t.prevIcon:t.nextIcon},null)]})])]}})),{selected:m.selected,scrollTo:s,scrollOffset:i,focus:n}}});function ca(t){return t?t.map(e=>typeof e=="string"?{title:e,value:e}:e):[]}const ua=de({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ke({mandatory:"force"}),...we(),...Ve()},"VTabs"),da=oe()({name:"VTabs",props:ua(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:d}=e;const a=it(t,"modelValue"),_=R(()=>ca(t.items)),{densityClasses:m}=Ne(t),{backgroundColorClasses:r,backgroundColorStyles:i}=Rt(Q(t,"bgColor"));return Be({VTab:{color:Q(t,"color"),direction:Q(t,"direction"),stacked:Q(t,"stacked"),fixed:Q(t,"fixedTabs"),sliderColor:Q(t,"sliderColor"),hideSlider:Q(t,"hideSlider")}}),ce(()=>{const[v]=ze.filterProps(t);return l(ze,ue(v,{modelValue:a.value,"onUpdate:modelValue":p=>a.value=p,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},m.value,r.value,t.class],style:[{"--v-tabs-height":nt(t.height)},i.value,t.style],role:"tablist",symbol:Fe}),{default:()=>[d.default?d.default():_.value.map(p=>l(pe,ue(p,{key:p.title}),null))]})}),{}}}),ra={class:"container"},va={class:"column"},ma={class:"channel-label"},ha={class:"margin spread"},fa={class:"row-in-call"},ga=o("i",{class:"center icon-cog-gear"},null,-1),pa=o("h3",null,"Settings",-1),ba={class:"users-container"},ya=o("i",{class:"icon-users users"},null,-1),ka={class:"button-wrapper"},Sa={class:"tab-container"},_a={key:0},Ca={class:"basic-flex"},Va={class:"even-spacing"},xa={class:"video-container"},Aa={class:"video-container"},wa={class:"controls-container"},Ma=o("i",{class:"center icon-caret-left-md"},null,-1),La={class:"row-center"},Ia=o("i",{class:"center icon-caret-right-md"},null,-1),Da={key:1,class:"chat-container"},Ta=o("div",{class:"chat-header"},[o("h3",null,"Chat")],-1),Ra={class:"chat-body"},Pa={class:"chat-footer"},Ha={class:"tab-buttons"},ee=2,$a=re({__name:"InCallPortrait",setup(t){const e=be(),d=ye(),a=ke("liveSwitch");let _=null,m=null;const r=e.state.localMedia;let i=M({});const v=M(1);let p=M("100%");const h=M("");let L=M([]);const f=M(1),x=M("GALLERY"),z=R(()=>e.state.pinLocal||f.value===1),H=R(()=>e.state.pinLocal?v.value-1:Math.ceil(v.value/ee));ae(e.state.pinLocal,A);function T(){f.value*ee-1<v.value&&(f.value++,A())}function $(){f.value>1&&(f.value--,A())}function A(){let u=new Array;if(e.state.pinLocal||f.value===1)for(let n in i.value){let s=i.value[n];s.index===f.value&&u.push(s)}else for(let n in i.value){let s=i.value[n];(s.index===f.value*ee-ee||s.index===f.value*ee-1)&&u.push(s)}e.commit("setVideoList",u)}function I(u){x.value=u.target.innerText}ae(v,function(){const u=Math.ceil(Math.sqrt(v.value)),n=100/u;p.value="calc("+n+"% - "+u*5+"px)"});async function k(){await a.disconnectFromMeeting(i.value,_,r),r.destroy(),e.commit("resetStore"),d.push("/")}function y(u){e.commit("changeCamera",u)}function S(u){e.commit("changeMicrophone",u)}async function D(u){const n=Object.keys(i.value)[0],s=i.value[n],j=await a.getAudioSink(u,s);a.updateSpeaker(i.value,j),e.commit("setActiveSpeakerDevice",u)}function O(u){i.value[u.getId()].remoteMedia.destroy(),delete i.value[u.getId()],v.value--}function G(){h.value.length!==0&&(a.sendChat(m,e.state.displayName,h.value),h.value="")}function B(u,n){let s=u.getRemoteConnectionInfo().getUserAlias();v.value===1&&e.commit("setVideoList",[{connection:u,media:n,index:v.value,displayName:s}]),i.value[u.getId()]={connection:u,remoteMedia:n,index:v.value++,displayName:s},D(e.state.activeSpeakerDevice),a.createDownStreamCloseHandler(u,O)}function K(u){var n=JSON.parse(u);L.value.push({user:n.from,message:n.text})}return Se(async()=>{_=await a.registerClient(e.state.displayName,e.state.channelId),m=await a.getChannel(_),a.openSfuUpstreamConnection(e.state.localMedia,m),a.createDownStreamOpenHandler(m,B),e.commit("setLocalMedia",r),e.commit("populateCameraList"),e.commit("populateMicrophoneList"),e.commit("setActiveVideoDevice",r.getVideoSourceInput().getId()),e.commit("setActiveAudioDevice",r.getAudioSourceInput().getId()),e.commit("setVideoMuted",r.getVideoMuted()),e.commit("setAudioMuted",r.getAudioMuted()),a.addIncomingChatHandler(m,K)}),(u,n)=>(C(),P("div",ra,[o("div",va,[l(me,{src:Oe,class:"logo-in-call liveswitch"}),o("div",ma," Channel: "+N(c(e).state.channelId),1),o("div",ha,[o("div",fa,[l(Ge,{"close-on-content-click":!1,location:"bottom"},{activator:g(({props:s})=>[l(w,ue(s,{icon:"",class:"icon liveswitch",flat:""}),{default:g(()=>[ga]),_:2},1040)]),default:g(()=>[l(Ye,{class:"settings-menu-in-call"},{default:g(()=>[l(Ue,null,{default:g(()=>[l(X,null,{default:g(()=>[pa]),_:1}),l(X,null,{default:g(()=>[l(q,{label:"Camera",class:"margin input-in-call liveswitch","hide-details":"auto",items:c(e).state.cameraList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeVideoDevice,"onUpdate:modelValue":[n[0]||(n[0]=s=>c(e).state.activeVideoDevice=s),y]},null,8,["items","modelValue"])]),_:1}),l(X,null,{default:g(()=>[l(q,{label:"Microphone",class:"margin input-in-call liveswitch","hide-details":"auto",items:c(e).state.microphoneList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeAudioDevice,"onUpdate:modelValue":[n[1]||(n[1]=s=>c(e).state.activeAudioDevice=s),S]},null,8,["items","modelValue"])]),_:1}),l(X,null,{default:g(()=>[c(e).state.speakerList.length>0?(C(),U(q,{key:0,label:"Speaker",class:"margin input-in-call liveswitch","hide-details":"auto",items:c(e).state.speakerList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeSpeakerDevice,"onUpdate:modelValue":[n[2]||(n[2]=s=>c(e).state.activeSpeakerDevice=s),D]},null,8,["items","modelValue"])):W("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),o("div",ba,[ya,F(" "+N(v.value),1)])]),o("div",ka,[l(w,{class:"leave-button liveswitch",onClick:k},{default:g(()=>[F("Leave")]),_:1})])]),o("div",Sa,[x.value==="GALLERY"?(C(),P("div",_a,[o("div",Ca,[o("div",Va,[o("div",xa,[c(e).state.localMedia&&z.value?(C(),U(se,{key:0,"ask-height":"235px","ask-width":"320px",maxLabelLength:7,"local-video":c(e).state.localMedia,userName:"Me"},null,8,["local-video"])):W("",!0)]),o("div",Aa,[c(e).state.videoList?(C(!0),P(le,{key:0},ie(c(e).state.videoList,s=>(C(),U(se,{remoteVideo:s.media,index:s.index,userName:s.displayName,connection:s.connection,maxLabelLength:7,"ask-height":"235px","ask-width":"320px",maxIndex:ee},null,8,["remoteVideo","index","userName","connection"]))),256)):W("",!0)])])]),o("div",wa,[l(w,{class:E(["margin align-left liveswitch",f.value===1?"inactive-button":"active-button"]),icon:"",onClick:$},{default:g(()=>[Ma]),_:1},8,["class"]),o("div",La,[l(w,{class:"margin active-button liveswitch",icon:"",onClick:n[3]||(n[3]=s=>c(e).commit("toggleLocalVideoMute"))},{default:g(()=>[o("i",{class:E(["center",c(e).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1}),l(w,{class:"margin active-button liveswitch",icon:"",onClick:n[4]||(n[4]=s=>c(e).commit("toggleLocalAudioMute"))},{default:g(()=>[o("i",{class:E(["center",c(e).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),l(w,{class:E(["margin active-button align-right liveswitch",f.value===H.value?"inactive-button":"active-button"]),icon:"",onClick:T},{default:g(()=>[Ia]),_:1},8,["class"])])])):(C(),P("div",Da,[Ta,o("div",Ra,[(C(!0),P(le,null,ie(c(L),s=>(C(),P("div",null,[o("div",{class:E(["chat-message",s.user===c(e).state.displayName?"my-chat":"other-chat"])},N(s.user)+": "+N(s.message),3)]))),256))]),o("div",Pa,[l(xe,{label:"Chat Message",clearable:"",class:"margin chat-input liveswitch","hide-details":"auto",modelValue:h.value,"onUpdate:modelValue":n[5]||(n[5]=s=>h.value=s),onKeydown:_e(Ce(G,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),l(w,{class:"chat-button liveswitch",onClick:G},{default:g(()=>[F("Send")]),_:1})])]))]),o("div",Ha,[l(da,{"fixed-tabs":"","selected-class":"activeTab",class:"tabs",onClick:I},{default:g(()=>[l(pe,{value:"gallery"},{default:g(()=>[F("Gallery")]),_:1}),l(pe,{value:"chat"},{default:g(()=>[F("Chat")]),_:1})]),_:1})])])]))}}),za="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATLSURBVHgBzVrtcdw2EH3U+L/jCkKlgERxA6bVQKQKxLgB0S4goSqQ1EBySgGR3UDCVCC5gYgd+FwBjMclxY8jsCB5N3dvBpwTAQJ8u4vdxVIRDgGZ4fU7RLiAwZn9fVL9LXis2x1uosI1RYR9Q0j8zl9oX96Ff217ZwmVw479ERECx7b9DdFAKIx9619xHd11b+6HSEviH9tiTMcGmTAimaHE2Na2FVa1a8xFOIkb264g5pZCzK+LL7a9bszsBdwLcoJL9G13bR98hWWg8P6An8SVXSd/XjMzJPTGtqQz5lU9zyn/OBqdJjOxvT7YlqO/AUssQbuxE8+opw6JLj6P3EtqgY8QERL0DvHIg/NNSkCTuvT0k+k7x/3PjmdSXsY0kmPeBgwBteFzsaUvVoyAZvojf/SJiDYusAvoc9MTXXn6XQKIeRlqJMHukKsjDP7z9L709G0Q0QJTjPl4o/R/GovYNWhCP3me3SCipQhx4yUmITNn8AuBZvURfriE/JWXIZEQrzQlnWig7bv1MOV4hrjsGG5BVN5sSOQROs4wBbLJtWc0bSSO+9Qk490GEW1C4mKieSVKP0X+l6ef++M3z9OVg+gTkRyqgB8kkSEcl0q/O3aIWSVwm9Vz3jcWEH2+vH05MRk/ZIy2pz55+nzaoFk976tNIiKdW/hBrdxDh6Y541xLtJHCbZpl10EcOQbl0Df+iV3sT2XML0p/MRo72lTfp42e5YwTEbs7h57tpnbR+9HNn5kEeuy4c/RpqX45dNcujaCW1FvoZOhaH0b2TAoNYylJZhoSieMpHqhOhzfdRAgh8zPglFyDGDxH0NRaQppZ9VMSmlNmmsNS6nhG0vxFxYfMcONeIizfKuCPH/0zt+wJan/KybGHacUHkXaO5an+k20/QF46qedLPONpTh8siZVrwDQiDbZHKARMQWhOXi86j0gDIZRAl+gc0HPeukxpiO3VtVpS19CPAz4UVUpvqhJpcI0g8rwYXyZGm2Ks61Y6D0BC5gnhKOs56YZpOh/n1sxeDF6kW0hOnE9lZl0vzBcoOklfSEryGiKMpRWZHqLOy1HyzJ9iTEeJ1uXGnnGU+Dl2ANGIpBMkMde2Y4RE8ggr7AiRUpBrUKBNVTiu+/0iFDSnY+wI1EgOX3IGG4HHDj6ixRThsURLcxaBGqGXiR3955aE//grGmU6n8CP0q6WO4sMC0EiBq6FQ03BL4whnF+dloDZr8sNhrnHzKSY5umYHA4z5cUgEZeqT9SFxGVfYx5S8GPPe7OVfI1EbuCW/r2TzHvDlJ5m4q+u+zV7bEPkyq7x/1LtSECUs4ZPsis78tEuyvIktUApau6Xkf9tPU5z7+06cuYoMRHdyJ5j8zvdXDBrzTpzxxBBhVYpV5hIqJ80hgVHH0q44o7Mn2OasFYQoail3MixYIppZ4yiSj+0GCFHWtYA+G09Rjge7Py3VbHCoaVIWZj2nUD2xfedxUtIOX966t1W13PMO2GW9brdb4ovt3ewmgohlGM7+/Jhf0SI5f8BQXCSD/sl0kCKcvRqWuV+DEyPTg+DCCHaoXsmoTjwKak6Wq92hEPBTSVTZtoMoiEZcqWJxjUfjka6aD/wpJDSazeLGK2yHCaRLpr/rmPzRPpvTn6IoHFFRiQAAAAASUVORK5CYII=",Ba={class:"container"},Ea={key:0,class:"tab-container"},Oa={class:"channel-label"},Na={class:"video-container"},Ua={class:"basic-flex"},Ga={class:"controls-container"},Ya=o("i",{class:"center icon-caret-left-md"},null,-1),Fa={class:"row-center"},Ka=o("i",{class:"center icon-caret-right-md"},null,-1),Wa={key:1},qa={class:"chat-container"},ja=o("div",{class:"chat-header"},[o("h3",null,"Chat")],-1),Xa={class:"chat-body"},Qa={class:"basic-flex"},Ja={class:"right-column"},Za={class:"center users-container"},el=o("i",{class:"icon-users users"},null,-1),tl=o("i",{class:"center icon-cog-gear"},null,-1),al=o("h3",null,"Settings",-1),ll=o("i",{class:"center icon-chat"},null,-1),il=o("i",{class:"center icon-video"},null,-1),te=2,nl=re({__name:"InCallLandscape",setup(t){const e=be(),d=ye(),a=ke("liveSwitch");let _=null,m=null;const r=e.state.localMedia;let i=M({});const v=M(1);let p=M("100%");const h=M("");let L=M([]);const f=M(1),x=M("GALLERY"),z=R(()=>e.state.pinLocal||f.value===1),H=R(()=>e.state.pinLocal?v.value-1:Math.ceil(v.value/te));ae(e.state.pinLocal,A);function T(){f.value*te-1<v.value&&(f.value++,A())}function $(){f.value>1&&(f.value--,A())}function A(){let u=new Array;if(e.state.pinLocal||f.value===1)for(let n in i.value){let s=i.value[n];s.index===f.value&&u.push(s)}else for(let n in i.value){let s=i.value[n];(s.index===f.value*te-te||s.index===f.value*te-1)&&u.push(s)}e.commit("setVideoList",u)}function I(u){x.value=u}ae(v,function(){const u=Math.ceil(Math.sqrt(v.value)),n=100/u;p.value="calc("+n+"% - "+u*5+"px)"});async function k(){await a.disconnectFromMeeting(i.value,_,r),r.destroy(),e.commit("resetStore"),d.push("/")}function y(u){e.commit("changeCamera",u)}function S(u){e.commit("changeMicrophone",u)}async function D(u){const n=Object.keys(i.value)[0],s=i.value[n],j=await a.getAudioSink(u,s);a.updateSpeaker(i.value,j),e.commit("setActiveSpeakerDevice",u)}function O(u){i.value[u.getId()].remoteMedia.destroy(),delete i.value[u.getId()],v.value--}function G(){h.value.length!==0&&(a.sendChat(m,e.state.displayName,h.value),h.value="")}function B(u,n){let s=u.getRemoteConnectionInfo().getUserAlias();v.value===1&&e.commit("setVideoList",[{connection:u,media:n,index:v.value,displayName:s}]),i.value[u.getId()]={connection:u,remoteMedia:n,index:v.value++,displayName:s},D(e.state.activeSpeakerDevice),a.createDownStreamCloseHandler(u,O)}function K(u){var n=JSON.parse(u);L.value.push({user:n.from,message:n.text})}return Se(async()=>{_=await a.registerClient(e.state.displayName,e.state.channelId),m=await a.getChannel(_),a.openSfuUpstreamConnection(e.state.localMedia,m),a.createDownStreamOpenHandler(m,B),e.commit("setLocalMedia",r),e.commit("populateCameraList"),e.commit("populateMicrophoneList"),e.commit("setActiveVideoDevice",r.getVideoSourceInput().getId()),e.commit("setActiveAudioDevice",r.getAudioSourceInput().getId()),e.commit("setVideoMuted",r.getVideoMuted()),e.commit("setAudioMuted",r.getAudioMuted()),a.addIncomingChatHandler(m,K)}),(u,n)=>(C(),P("div",Ba,[o("div",null,[x.value=="GALLERY"?(C(),P("div",Ea,[o("div",Oa," Channel: "+N(c(e).state.channelId),1),o("div",Na,[o("div",null,[c(e).state.localMedia&&z.value?(C(),U(se,{key:0,"ask-height":"240px","ask-width":"280px",maxLabelLength:5,"local-video":c(e).state.localMedia,userName:"Me"},null,8,["local-video"])):W("",!0)]),o("div",Ua,[c(e).state.videoList?(C(!0),P(le,{key:0},ie(c(e).state.videoList,s=>(C(),U(se,{remoteVideo:s.media,index:s.index,userName:s.displayName,connection:s.connection,"ask-height":"240px","ask-width":"280px",maxLabelLength:5,maxIndex:te},null,8,["remoteVideo","index","userName","connection"]))),256)):W("",!0)])]),o("div",Ga,[l(w,{class:E(["margin align-left liveswitch",f.value===1?"inactive-button":"active-button"]),icon:"",onClick:$},{default:g(()=>[Ya]),_:1},8,["class"]),o("div",Fa,[l(w,{class:"margin active-button liveswitch",icon:"",onClick:n[0]||(n[0]=s=>c(e).commit("toggleLocalVideoMute"))},{default:g(()=>[o("i",{class:E(["center",c(e).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1}),l(w,{class:"margin active-button liveswitch",icon:"",onClick:n[1]||(n[1]=s=>c(e).commit("toggleLocalAudioMute"))},{default:g(()=>[o("i",{class:E(["center",c(e).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),l(w,{class:E(["margin align-right liveswitch",f.value===H.value?"inactive-button":"active-button"]),icon:"",onClick:T},{default:g(()=>[Ka]),_:1},8,["class"])])])):(C(),P("div",Wa,[o("div",qa,[ja,o("div",Xa,[(C(!0),P(le,null,ie(c(L),s=>(C(),P("div",null,[o("div",{class:E(["chat-message",s.user===c(e).state.displayName?"my-chat":"other-chat"])},N(s.user)+": "+N(s.message),3)]))),256))]),o("div",Qa,[l(xe,{label:"Chat Message",clearable:"",class:"chat-input liveswitch","hide-details":"auto",modelValue:h.value,"onUpdate:modelValue":n[2]||(n[2]=s=>h.value=s),onKeydown:_e(Ce(G,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),l(w,{class:"chat-button liveswitch",onClick:G},{default:g(()=>[F("Send")]),_:1})])])]))]),o("div",Ja,[l(me,{src:za,class:"logo-in-call liveswitch"}),o("span",Za,[el,F(" "+N(v.value),1)]),l(Ge,{"close-on-content-click":!1,location:"left"},{activator:g(({props:s})=>[l(w,ue({class:"margin center icon liveswitch"},s,{icon:"",flat:""}),{default:g(()=>[tl]),_:2},1040)]),default:g(()=>[l(Ye,{class:"settings-menu-in-call"},{default:g(()=>[l(Ue,null,{default:g(()=>[l(X,null,{default:g(()=>[al]),_:1}),l(X,null,{default:g(()=>[l(q,{label:"Camera",class:"margin input-in-call liveswitch","hide-details":"auto",items:c(e).state.cameraList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeVideoDevice,"onUpdate:modelValue":[n[3]||(n[3]=s=>c(e).state.activeVideoDevice=s),y]},null,8,["items","modelValue"])]),_:1}),l(X,null,{default:g(()=>[l(q,{label:"Microphone",class:"margin input-in-call liveswitch","hide-details":"auto",items:c(e).state.microphoneList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeAudioDevice,"onUpdate:modelValue":[n[4]||(n[4]=s=>c(e).state.activeAudioDevice=s),S]},null,8,["items","modelValue"])]),_:1}),l(X,null,{default:g(()=>[c(e).state.speakerList.length>0?(C(),U(q,{key:0,label:"Speaker",class:"margin input-in-call liveswitch","hide-details":"auto",items:c(e).state.speakerList,"item-title":"name","item-value":"id",modelValue:c(e).state.activeSpeakerDevice,"onUpdate:modelValue":[n[5]||(n[5]=s=>c(e).state.activeSpeakerDevice=s),D]},null,8,["items","modelValue"])):W("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{icon:"",class:"center icon liveswitch",flat:"",onClick:n[6]||(n[6]=s=>I("CHAT"))},{default:g(()=>[ll]),_:1}),l(w,{icon:"",class:"center icon liveswitch",flat:"",onClick:n[7]||(n[7]=s=>I("GALLERY"))},{default:g(()=>[il]),_:1}),l(w,{class:"center leave-button liveswitch",onClick:k},{default:g(()=>[F("Leave")]),_:1})])]))}}),cl=re({__name:"InCall",setup(t){const{mobile:e}=Ee(),d=M(e&&window.innerHeight>window.innerWidth);return(a,_)=>c(e)?d.value?(C(),U($a,{key:1})):(C(),U(nl,{key:2})):(C(),U(Qt,{key:0}))}});export{cl as default};
