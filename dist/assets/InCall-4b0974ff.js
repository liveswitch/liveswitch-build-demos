import{d as he,e as be,f as ke,r as w,o as Ve,l as S,i as x,j as H,k as o,b as s,t as J,B as Q,s as C,q as d,A as K,C as se,F as ce,D as ue,n as Y,E as et,v as tt,x as Ae,y as xe,a as ve,m as Se,G as He,u as me,p as pe,I as de,H as we,J as at,K as nt,L as E,M as st,N as it,O as lt,P as ne,Q as ge,R as ot,z as Ge,S as Ue,T as ct,w as Fe,U as ut,V as dt,W as rt,X as ae,Y as vt}from"./index-d29119d2.js";import{_ as Ye,V as Ce,e as M,a as re,d as Z,b as Ie,g as Me,h as Le,i as Te,j as De,k as ye,l as mt,n as ft,o as gt,p as pt,q as ht,r as St,s as Ct,t as yt,u as _t,R as bt,v as kt,w as Vt,x as je,y as At,z as xt,A as wt,B as It,C as Mt,D as Lt,E as Tt,L as Rt,F as Pt,G as Ot,H as Ut,I as Dt,J as $t,K as zt,M as Nt,N as $e,O as ze,P as Bt,Q as We,S as ee,T as Xe}from"./_plugin-vue_export-helper-9f54a784.js";const Et="62c0809a-5671-426f-94a5-8edbdd1fe962",Ht="https://cloud.liveswitch.io",Gt="/room/OHTest",Ft="0070c9c582894ef7969986ba228399c527201d910ed9451eb8b45097194ad689",W={applicationId:Et,gatewayUrl:Ht,channelId:Gt,sharedSecret:Ft},qe=e=>(Ae("data-v-114d92e1"),e=e(),xe(),e),Yt={class:"container"},jt={class:"left-column"},Wt={class:"flex-center"},Xt={class:"row-spread"},qt={class:"user-counter"},Jt=qe(()=>o("i",{class:"icon-users users"},null,-1)),Kt={class:"video-grid"},Qt={class:"right-column"},Zt={class:"settings-menu"},ea={class:"row"},ta={class:"row"},aa={class:"row"},na={class:"chat-container"},sa=qe(()=>o("div",{class:"chat-header"},[o("h2",{class:"margin"},"Chat")],-1)),ia={class:"chat-body"},la={class:"chat-footer"},oa=he({__name:"InCall",setup(e){const t=be(),u=ke();let c=w([]);const I=w(""),m=w(1),h=t.state.localMedia;let i=null,r=null,v=w({});const f=w("");let V=w([]);function y(){for(let b in v.value){const p=v.value[b].connection;(p.getState()!==S.ConnectionState.Closed.valueOf()||p.getState()!==S.ConnectionState.Closing)&&p.close(),delete v.value[b]}D(),h.stop(),h.destroy(),t.commit("resetStore"),u.push("/")}function k(b){debugger}function z(){if(f.value.length===0)return;let b=new Date;var p={from:t.state.displayName,timestamp:new Date().getTime(),timestampHourFormat:b.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),timestampDateFormat:b.toLocaleString(),text:f.value};i&&i.sendMessage(JSON.stringify(p)),f.value=""}Ve(async()=>{await F(),t.commit("setLocalMedia",h),t.commit("populateCameraList"),t.commit("populateMicrophoneList"),t.commit("setActiveVideoDevice",h.getVideoSourceInput().getId()),t.commit("setActiveAudioDevice",h.getAudioSourceInput().getId()),t.commit("setVideoMuted",h.getVideoMuted()),t.commit("setAudioMuted",h.getAudioMuted()),i&&i.addOnMessage(function(b,p){var g=JSON.parse(p);console.log(p),V.value.push({user:g.from,message:g.text})})});async function F(){const b=new S.Promise;r=new S.Client(W.gatewayUrl,W.applicationId),r.setUserAlias(t.state.displayName);const p=S.Token.generateClientRegisterToken(W.applicationId,r.getUserId(),r.getDeviceId(),r.getId(),[new S.ChannelClaim(t.state.channelId)],W.sharedSecret);return r.register(p).then(g=>{N(g),b.resolve(null)}).fail(g=>{S.Log.error("Failed to register with Gateway."),b.reject(g)}),b}function N(b){i=b[0];const p=T(t.state.localMedia);t.commit("setUpstreamConnection",p),i&&i.addOnRemoteUpstreamConnectionOpen(g=>U(g,i))}function U(b,p){const g=new S.RemoteMedia,R=new S.AudioStream(g),B=new S.VideoStream(g);if(p){const O=p.createSfuDownstreamConnection(b,R,B);return v.value[O.getId()]={connection:O,media:g,index:m.value++,displayName:b.getUserAlias()},c.value.length===0&&g.getAudioSinkOutputs().then(function(L){c.value=L.map(l=>(l.getId()==="default"&&(I.value=l.getId()),{name:l.getName(),id:l.getId()}))}).fail(function(L){console.error(L)}),O.addOnStateChange(L=>{L.getRemoteClosed()&&(delete v.value[O.getId()],g.destroy(),m.value--)}),O.open(),O}}function T(b){const p=new S.AudioStream(b),g=new S.VideoStream(b);if(!i)return;const R=i.createSfuUpstreamConnection(p,g);return R.addOnStateChange(B=>{S.Log.debug(`Upstream connection is ${new S.ConnectionStateWrapper(B.getState()).toString()}.`)}),R.open(),R}function D(){if(r)return r.unregister().fail(()=>S.Log.error("Unregistration failed."))}return(b,p)=>(x(),H("div",Yt,[o("div",jt,[o("div",Wt,[s(Ce,{src:Ye,class:"logo"})]),o("div",Xt,[o("div",qt,[Jt,J(" "+Q(m.value),1)]),s(M,{class:"leave-button",onClick:y},{default:C(()=>[J("Leave Call")]),_:1})]),o("div",Kt,[d(t).state.localMedia?(x(),K(re,{key:0,class:"video","local-video":d(t).state.localMedia,userName:"Me"},null,8,["local-video"])):se("",!0),d(v)?(x(!0),H(ce,{key:1},ue(d(v),g=>(x(),K(re,{class:"video",remoteVideo:g.media,index:g.index,userName:g.displayName,connection:g.connection},null,8,["remoteVideo","index","userName","connection"]))),256)):se("",!0)])]),o("div",Qt,[o("div",Zt,[o("div",ea,[s(Z,{label:"Camera",class:"margin input","hide-details":"auto",items:d(t).state.cameraList,"item-title":"name","item-value":"id",modelValue:d(t).state.activeVideoDevice,"onUpdate:modelValue":[p[0]||(p[0]=g=>d(t).state.activeVideoDevice=g),p[1]||(p[1]=g=>d(t).commit("changeCamera"))]},null,8,["items","modelValue"]),s(M,{class:"margin button",icon:"",onClick:p[2]||(p[2]=g=>d(t).commit("toggleLocalVideoMute"))},{default:C(()=>[o("i",{class:Y(["center",d(t).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1})]),o("div",ta,[s(Z,{label:"Microphone",class:"margin input","hide-details":"auto",items:d(t).state.microphoneList,"item-title":"name","item-value":"id",modelValue:d(t).state.activeAudioDevice,"onUpdate:modelValue":[p[3]||(p[3]=g=>d(t).state.activeAudioDevice=g),p[4]||(p[4]=g=>d(t).commit("changeMicrophone"))]},null,8,["items","modelValue"]),s(M,{class:"margin button",icon:"",onClick:p[5]||(p[5]=g=>d(t).commit("toggleLocalAudioMute"))},{default:C(()=>[o("i",{class:Y(["center",d(t).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),o("div",aa,[d(c).length>0?(x(),K(Z,{key:0,label:"Speaker",class:"margin input","hide-details":"auto",items:d(c),"item-title":"name","item-value":"id",modelValue:I.value,"onUpdate:modelValue":[p[6]||(p[6]=g=>I.value=g),k]},null,8,["items","modelValue"])):se("",!0)])]),o("div",na,[sa,o("div",ia,[(x(!0),H(ce,null,ue(d(V),g=>(x(),H("div",null,[o("div",{class:Y(["chat-message",g.user===d(t).state.displayName?"my-chat":"other-chat"])},Q(g.user)+": "+Q(g.message),3)]))),256))]),o("div",la,[s(Ie,{label:"Chat Message",clearable:"",class:"margin chat-input","hide-details":"auto",modelValue:f.value,"onUpdate:modelValue":p[7]||(p[7]=g=>f.value=g),onKeydown:et(tt(z,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),s(M,{class:"chat-button",onClick:z},{default:C(()=>[J(" Send ")]),_:1})])])])]))}});const ca=Me(oa,[["__scopeId","data-v-114d92e1"]]);const ua=ve()({name:"VCardActions",props:Se(),setup(e,t){let{slots:u}=t;return He({VBtn:{variant:"text"}}),me(()=>{var c;return s("div",{class:["v-card-actions",e.class],style:e.style},[(c=u.default)==null?void 0:c.call(u)])}),{}}}),da=Le("v-card-subtitle"),ra=Le("v-card-title"),va=pe({appendAvatar:String,appendIcon:de,prependAvatar:String,prependIcon:de,subtitle:String,title:String,...Se(),...Te()},"VCardItem"),ma=ve()({name:"VCardItem",props:va(),setup(e,t){let{slots:u}=t;return me(()=>{var v;const c=!!(e.prependAvatar||e.prependIcon),I=!!(c||u.prepend),m=!!(e.appendAvatar||e.appendIcon),h=!!(m||u.append),i=!!(e.title||u.title),r=!!(e.subtitle||u.subtitle);return s("div",{class:["v-card-item",e.class],style:e.style},[I&&s("div",{key:"prepend",class:"v-card-item__prepend"},[u.prepend?s(ye,{key:"prepend-defaults",disabled:!c,defaults:{VAvatar:{density:e.density,icon:e.prependIcon,image:e.prependAvatar}}},u.prepend):c&&s(De,{key:"prepend-avatar",density:e.density,icon:e.prependIcon,image:e.prependAvatar},null)]),s("div",{class:"v-card-item__content"},[i&&s(ra,{key:"title"},{default:()=>{var f;return[((f=u.title)==null?void 0:f.call(u))??e.title]}}),r&&s(da,{key:"subtitle"},{default:()=>{var f;return[((f=u.subtitle)==null?void 0:f.call(u))??e.subtitle]}}),(v=u.default)==null?void 0:v.call(u)]),h&&s("div",{key:"append",class:"v-card-item__append"},[u.append?s(ye,{key:"append-defaults",disabled:!m,defaults:{VAvatar:{density:e.density,icon:e.appendIcon,image:e.appendAvatar}}},u.append):m&&s(De,{key:"append-avatar",density:e.density,icon:e.appendIcon,image:e.appendAvatar},null)])])}),{}}}),fa=Le("v-card-text"),ga=pe({appendAvatar:String,appendIcon:de,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:de,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...mt(),...Se(),...Te(),...ft(),...gt(),...pt(),...ht(),...St(),...Ct(),...yt(),...we(),...at(),..._t({variant:"elevated"})},"VCard"),Je=ve()({name:"VCard",directives:{Ripple:bt},props:ga(),setup(e,t){let{attrs:u,slots:c}=t;const{themeClasses:I}=nt(e),{borderClasses:m}=kt(e),{colorClasses:h,colorStyles:i,variantClasses:r}=Vt(e),{densityClasses:v}=je(e),{dimensionStyles:f}=At(e),{elevationClasses:V}=xt(e),{loaderClasses:y}=wt(e),{locationStyles:k}=It(e),{positionClasses:z}=Mt(e),{roundedClasses:F}=Lt(e),N=Tt(e,u),U=E(()=>e.link!==!1&&N.isLink.value),T=E(()=>!e.disabled&&e.link!==!1&&(e.link||N.isClickable.value));return me(()=>{const D=U.value?"a":e.tag,b=!!(c.title||e.title),p=!!(c.subtitle||e.subtitle),g=b||p,R=!!(c.append||e.appendAvatar||e.appendIcon),B=!!(c.prepend||e.prependAvatar||e.prependIcon),O=!!(c.image||e.image),L=g||B||R,l=!!(c.text||e.text);return st(s(D,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":T.value},I.value,m.value,h.value,v.value,V.value,y.value,z.value,F.value,r.value,e.class],style:[i.value,f.value,k.value,e.style],href:N.href.value,onClick:T.value&&N.navigate,tabindex:e.disabled?-1:void 0},{default:()=>{var n;return[O&&s("div",{key:"image",class:"v-card__image"},[c.image?s(ye,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},c.image):s(Ce,{key:"image-img",cover:!0,src:e.image},null)]),s(Rt,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:c.loader}),L&&s(ma,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:c.item,prepend:c.prepend,title:c.title,subtitle:c.subtitle,append:c.append}),l&&s(fa,{key:"text"},{default:()=>{var a;return[((a=c.text)==null?void 0:a.call(c))??e.text]}}),(n=c.default)==null?void 0:n.call(c),c.actions&&s(ua,null,{default:c.actions}),Pt(T.value,"v-card")]}}),[[it("ripple"),T.value&&e.ripple]])}),{}}});const Ke=Symbol.for("vuetify:v-tabs"),pa=pe({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...lt(Ot({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),_e=ve()({name:"VTab",props:pa(),setup(e,t){let{slots:u,attrs:c}=t;const{textColorClasses:I,textColorStyles:m}=Ut(e,"sliderColor"),h=E(()=>e.direction==="horizontal"),i=ne(!1),r=w(),v=w();function f(V){var k,z;let{value:y}=V;if(i.value=y,y){const F=(z=(k=r.value)==null?void 0:k.$el.parentElement)==null?void 0:z.querySelector(".v-tab--selected .v-tab__slider"),N=v.value;if(!F||!N)return;const U=getComputedStyle(F).color,T=F.getBoundingClientRect(),D=N.getBoundingClientRect(),b=h.value?"x":"y",p=h.value?"X":"Y",g=h.value?"right":"bottom",R=h.value?"width":"height",B=T[b],O=D[b],L=B>O?T[g]-D[g]:T[b]-D[b],l=Math.sign(L)>0?h.value?"right":"bottom":Math.sign(L)<0?h.value?"left":"top":"center",a=(Math.abs(L)+(Math.sign(L)<0?T[R]:D[R]))/Math.max(T[R],D[R])||0,$=T[R]/D[R]||0,j=1.5;Dt(N,{backgroundColor:[U,"currentcolor"],transform:[`translate${p}(${L}px) scale${p}(${$})`,`translate${p}(${L/j}px) scale${p}(${(a-1)/j+1})`,"none"],transformOrigin:Array(3).fill(l)},{duration:225,easing:$t})}}return me(()=>{const[V]=M.filterProps(e);return s(M,ge({symbol:Ke,ref:r,class:["v-tab",e.class],style:e.style,tabindex:i.value?0:-1,role:"tab","aria-selected":String(i.value),active:!1},V,c,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":f}),{default:()=>{var y;return[((y=u.default)==null?void 0:y.call(u))??e.text,!e.hideSlider&&s("div",{ref:v,class:["v-tab__slider",I.value],style:m.value},null)]}})}),{}}});function Ne(e){const u=Math.abs(e);return Math.sign(e)*(u/((1/.501-2)*(1-u)+1))}function Be(e){let{selectedElement:t,containerSize:u,contentSize:c,isRtl:I,currentScrollOffset:m,isHorizontal:h}=e;const i=h?t.clientWidth:t.clientHeight,r=h?t.offsetLeft:t.offsetTop,v=I&&h?c-r-i:r,f=u+m,V=i+v,y=i*.4;return v<=m?m=Math.max(v-y,0):f<=V&&(m=Math.min(m-(f-V-y),c-u)),m}function ha(e){let{selectedElement:t,containerSize:u,contentSize:c,isRtl:I,isHorizontal:m}=e;const h=m?t.clientWidth:t.clientHeight,i=m?t.offsetLeft:t.offsetTop,r=I&&m?c-i-h/2-u/2:i+h/2-u/2;return Math.min(c-u,Math.max(0,r))}const Sa=Symbol.for("vuetify:v-slide-group"),Qe=pe({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:Sa},nextIcon:{type:de,default:"$next"},prevIcon:{type:de,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Se(),...we(),...zt({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Ee=ve()({name:"VSlideGroup",props:Qe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:u}=t;const{isRtl:c}=ot(),{mobile:I}=Ge(),m=Nt(e,e.symbol),h=ne(!1),i=ne(0),r=ne(0),v=ne(0),f=E(()=>e.direction==="horizontal"),{resizeRef:V,contentRect:y}=Ue(),{resizeRef:k,contentRect:z}=Ue(),F=E(()=>m.selected.value.length?m.items.value.findIndex(_=>_.id===m.selected.value[0]):-1),N=E(()=>m.selected.value.length?m.items.value.findIndex(_=>_.id===m.selected.value[m.selected.value.length-1]):-1);if(ct){let _=-1;Fe(()=>[m.selected.value,y.value,z.value,f.value],()=>{cancelAnimationFrame(_),_=requestAnimationFrame(()=>{if(y.value&&z.value){const A=f.value?"width":"height";r.value=y.value[A],v.value=z.value[A],h.value=r.value+1<v.value}if(F.value>=0&&k.value){const A=k.value.children[N.value];F.value===0||!h.value?i.value=0:e.centerActive?i.value=ha({selectedElement:A,containerSize:r.value,contentSize:v.value,isRtl:c.value,isHorizontal:f.value}):h.value&&(i.value=Be({selectedElement:A,containerSize:r.value,contentSize:v.value,isRtl:c.value,currentScrollOffset:i.value,isHorizontal:f.value}))}})})}const U=ne(!1);let T=0,D=0;function b(_){const A=f.value?"clientX":"clientY";D=(c.value&&f.value?-1:1)*i.value,T=_.touches[0][A],U.value=!0}function p(_){if(!h.value)return;const A=f.value?"clientX":"clientY",q=c.value&&f.value?-1:1;i.value=q*(D+T-_.touches[0][A])}function g(_){const A=v.value-r.value;i.value<0||!h.value?i.value=0:i.value>=A&&(i.value=A),U.value=!1}function R(){V.value&&(V.value[f.value?"scrollLeft":"scrollTop"]=0)}const B=ne(!1);function O(_){if(B.value=!0,!(!h.value||!k.value)){for(const A of _.composedPath())for(const q of k.value.children)if(q===A){i.value=Be({selectedElement:q,containerSize:r.value,contentSize:v.value,isRtl:c.value,currentScrollOffset:i.value,isHorizontal:f.value});return}}}function L(_){B.value=!1}function l(_){var A;!B.value&&!(_.relatedTarget&&((A=k.value)!=null&&A.contains(_.relatedTarget)))&&a()}function n(_){k.value&&(f.value?_.key==="ArrowRight"?a(c.value?"prev":"next"):_.key==="ArrowLeft"&&a(c.value?"next":"prev"):_.key==="ArrowDown"?a("next"):_.key==="ArrowUp"&&a("prev"),_.key==="Home"?a("first"):_.key==="End"&&a("last"))}function a(_){var A,q,Re,Pe,Oe;if(k.value)if(!_)(A=ut(k.value)[0])==null||A.focus();else if(_==="next"){const ie=(q=k.value.querySelector(":focus"))==null?void 0:q.nextElementSibling;ie?ie.focus():a("first")}else if(_==="prev"){const ie=(Re=k.value.querySelector(":focus"))==null?void 0:Re.previousElementSibling;ie?ie.focus():a("last")}else _==="first"?(Pe=k.value.firstElementChild)==null||Pe.focus():_==="last"&&((Oe=k.value.lastElementChild)==null||Oe.focus())}function $(_){const A=i.value+(_==="prev"?-1:1)*r.value;i.value=dt(A,0,v.value-r.value)}const j=E(()=>{let _=i.value>v.value-r.value?-(v.value-r.value)+Ne(v.value-r.value-i.value):-i.value;i.value<=0&&(_=Ne(-i.value));const A=c.value&&f.value?-1:1;return{transform:`translate${f.value?"X":"Y"}(${A*_}px)`,transition:U.value?"none":"",willChange:U.value?"transform":""}}),P=E(()=>({next:m.next,prev:m.prev,select:m.select,isSelected:m.isSelected})),G=E(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!I.value;case!0:return h.value||Math.abs(i.value)>0;case"mobile":return I.value||h.value||Math.abs(i.value)>0;default:return!I.value&&(h.value||Math.abs(i.value)>0)}}),X=E(()=>Math.abs(i.value)>0),Ze=E(()=>v.value>Math.abs(i.value)+r.value);return me(()=>s(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!f.value,"v-slide-group--has-affixes":G.value,"v-slide-group--is-overflowing":h.value},e.class],style:e.style,tabindex:B.value||m.selected.value.length?-1:0,onFocus:l},{default:()=>{var _,A,q;return[G.value&&s("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!X.value}],onClick:()=>$("prev")},[((_=u.prev)==null?void 0:_.call(u,P.value))??s($e,null,{default:()=>[s(ze,{icon:c.value?e.nextIcon:e.prevIcon},null)]})]),s("div",{key:"container",ref:V,class:"v-slide-group__container",onScroll:R},[s("div",{ref:k,class:"v-slide-group__content",style:j.value,onTouchstartPassive:b,onTouchmovePassive:p,onTouchendPassive:g,onFocusin:O,onFocusout:L,onKeydown:n},[(A=u.default)==null?void 0:A.call(u,P.value)])]),G.value&&s("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!Ze.value}],onClick:()=>$("next")},[((q=u.next)==null?void 0:q.call(u,P.value))??s($e,null,{default:()=>[s(ze,{icon:c.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:m.selected,scrollTo:$,scrollOffset:i,focus:a}}});function Ca(e){return e?e.map(t=>typeof t=="string"?{title:t,value:t}:t):[]}const ya=pe({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Qe({mandatory:"force"}),...Te(),...we()},"VTabs"),_a=ve()({name:"VTabs",props:ya(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:u}=t;const c=rt(e,"modelValue"),I=E(()=>Ca(e.items)),{densityClasses:m}=je(e),{backgroundColorClasses:h,backgroundColorStyles:i}=Bt(ae(e,"bgColor"));return He({VTab:{color:ae(e,"color"),direction:ae(e,"direction"),stacked:ae(e,"stacked"),fixed:ae(e,"fixedTabs"),sliderColor:ae(e,"sliderColor"),hideSlider:ae(e,"hideSlider")}}),me(()=>{const[r]=Ee.filterProps(e);return s(Ee,ge(r,{modelValue:c.value,"onUpdate:modelValue":v=>c.value=v,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},m.value,h.value,e.class],style:[{"--v-tabs-height":vt(e.height)},i.value,e.style],role:"tablist",symbol:Ke}),{default:()=>[u.default?u.default():I.value.map(v=>s(_e,ge(v,{key:v.title}),null))]})}),{}}}),fe=e=>(Ae("data-v-e2c6dad3"),e=e(),xe(),e),ba={class:"container"},ka={class:"column"},Va={class:"margin spread"},Aa={class:"row"},xa=fe(()=>o("i",{class:"center icon-cog-gear"},null,-1)),wa=fe(()=>o("h3",null,"Settings",-1)),Ia={class:"users-container"},Ma=fe(()=>o("i",{class:"icon-users users"},null,-1)),La={class:"button-wrapper"},Ta={class:"tab-container"},Ra={key:0},Pa={class:"basic-flex"},Oa={class:"even-spacing"},Ua={class:"video-container"},Da={class:"video-container"},$a={class:"controls-container"},za=fe(()=>o("i",{class:"center icon-caret-left-md"},null,-1)),Na={class:"row-center"},Ba=fe(()=>o("i",{class:"center icon-caret-right-md"},null,-1)),Ea={key:1,class:"chat-container"},Ha=fe(()=>o("div",{class:"chat-header"},[o("h3",null,"Chat")],-1)),Ga={class:"chat-body"},Fa={class:"chat-footer"},Ya={class:"tab-buttons"},le=2,ja=he({__name:"InCallPortrait",setup(e){const t=be(),u=ke(),c=E(()=>t.state.pinLocal||r.value===1),I=E(()=>{let l=1;return t.state.pinLocal?l=i.value-1:l=Math.ceil(i.value/le),l});Fe(t.state.pinLocal,U);let m=w([]);const h=w(""),i=w(1),r=w(1),v=t.state.localMedia;let f=null,V=null,y=w({});const k=w("");let z=w([]);function F(){r.value*le-1<i.value&&(r.value++,U())}function N(){r.value>1&&(r.value--,U())}function U(){let l=new Array;if(t.state.pinLocal||r.value===1)for(let n in y.value){let a=y.value[n];a.index===r.value&&l.push(a)}else for(let n in y.value){let a=y.value[n];(a.index===r.value*le-le||a.index===r.value*le-1)&&l.push(a)}t.commit("setVideoList",l)}function T(){for(let l in y.value){const n=y.value[l].connection;(n.getState()!==S.ConnectionState.Closed.valueOf()||n.getState()!==S.ConnectionState.Closing)&&n.close(),delete y.value[l]}B(),u.push("/")}function D(){if(k.value.length===0)return;let l=new Date;var n={from:t.state.displayName,timestamp:new Date().getTime(),timestampHourFormat:l.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),timestampDateFormat:l.toLocaleString(),text:k.value};f&&f.sendMessage(JSON.stringify(n)),k.value=""}Ve(async()=>{await b(),t.commit("setLocalMedia",v),t.commit("populateCameraList"),t.commit("populateMicrophoneList"),t.commit("setActiveVideoDevice",v.getVideoSourceInput().getId()),t.commit("setActiveAudioDevice",v.getAudioSourceInput().getId()),t.commit("setVideoMuted",v.getVideoMuted()),t.commit("setAudioMuted",v.getAudioMuted()),f&&f.addOnMessage(function(l,n){var a=JSON.parse(n);console.log(n),z.value.push({user:a.from,message:a.text})})});async function b(){const l=new S.Promise;V=new S.Client(W.gatewayUrl,W.applicationId),V.setUserAlias(t.state.displayName);const n=S.Token.generateClientRegisterToken(W.applicationId,V.getUserId(),V.getDeviceId(),V.getId(),[new S.ChannelClaim(t.state.channelId)],W.sharedSecret);return V.register(n).then(a=>{p(a),l.resolve(null)}).fail(a=>{S.Log.error("Failed to register with Gateway."),l.reject(a)}),l}function p(l){f=l[0];const n=R(t.state.localMedia);t.commit("setUpstreamConnection",n),f&&f.addOnRemoteUpstreamConnectionOpen(a=>g(a,f))}function g(l,n){const a=new S.RemoteMedia,$=new S.AudioStream(a),j=new S.VideoStream(a);if(n){const P=n.createSfuDownstreamConnection(l,$,j);return i.value===1&&t.commit("setVideoList",[{connection:P,media:a,index:i.value,displayName:l.getUserAlias()}]),y.value[P.getId()]={connection:P,media:a,index:i.value++,displayName:l.getUserAlias()},m.value.length===0&&a.getAudioSinkOutputs().then(function(G){m.value=G.map(X=>(X.getId()==="default"&&(h.value=X.getId()),{name:X.getName(),id:X.getId()}))}).fail(function(G){console.error(G)}),P.addOnStateChange(G=>{G.getRemoteClosed()&&(delete y.value[P.getId()],a.destroy(),i.value--)}),P.open(),P}}function R(l){const n=new S.AudioStream(l),a=new S.VideoStream(l);if(!f)return;const $=f.createSfuUpstreamConnection(n,a);return $.addOnStateChange(j=>{S.Log.debug(`Upstream connection is ${new S.ConnectionStateWrapper(j.getState()).toString()}.`)}),$.open(),$}function B(){if(V)return V.unregister().fail(()=>S.Log.error("Unregistration failed."))}const O=w("GALLERY");function L(l){O.value=l.target.innerText}return(l,n)=>(x(),H("div",ba,[o("div",ka,[s(Ce,{src:Ye,class:"logo"}),o("div",Va,[o("div",Aa,[s(Xe,{"close-on-content-click":!1,location:"bottom"},{activator:C(({props:a})=>[s(M,ge(a,{icon:"",class:"icon",flat:""}),{default:C(()=>[xa]),_:2},1040)]),default:C(()=>[s(Je,{class:"settings-menu"},{default:C(()=>[s(We,null,{default:C(()=>[s(ee,null,{default:C(()=>[wa]),_:1}),s(ee,null,{default:C(()=>[s(Z,{label:"Camera",class:"margin input","hide-details":"auto",items:d(t).state.cameraList,"item-title":"name","item-value":"id",modelValue:d(t).state.activeVideoDevice,"onUpdate:modelValue":[n[0]||(n[0]=a=>d(t).state.activeVideoDevice=a),n[1]||(n[1]=a=>d(t).commit("changeCamera"))]},null,8,["items","modelValue"])]),_:1}),s(ee,null,{default:C(()=>[s(Z,{label:"Microphone",class:"margin input","hide-details":"auto",items:d(t).state.microphoneList,"item-title":"name","item-value":"id",modelValue:d(t).state.activeAudioDevice,"onUpdate:modelValue":[n[2]||(n[2]=a=>d(t).state.activeAudioDevice=a),n[3]||(n[3]=a=>d(t).commit("changeMicrophone"))]},null,8,["items","modelValue"])]),_:1}),s(ee,null,{default:C(()=>[s(Z,{label:"Speaker",class:"margin input","hide-details":"auto"})]),_:1})]),_:1})]),_:1})]),_:1}),o("div",Ia,[Ma,J(" "+Q(i.value),1)])]),o("div",La,[s(M,{class:"leave-button",onClick:T},{default:C(()=>[J("Leave")]),_:1})])]),o("div",Ta,[O.value==="GALLERY"?(x(),H("div",Ra,[o("div",Pa,[o("div",Oa,[o("div",Ua,[d(t).state.localMedia&&c.value?(x(),K(re,{key:0,"ask-height":"240px","ask-width":"320px","local-video":d(t).state.localMedia,userName:"Me"},null,8,["local-video"])):se("",!0)]),o("div",Da,[d(t).state.videoList?(x(!0),H(ce,{key:0},ue(d(t).state.videoList,a=>(x(),K(re,{remoteVideo:a.media,index:a.index,userName:a.displayName,connection:a.connection,"ask-height":"240px","ask-width":"320px",maxIndex:le},null,8,["remoteVideo","index","userName","connection"]))),256)):se("",!0)])])]),o("div",$a,[s(M,{class:Y(["margin align-left",r.value===1?"inactive-button":"active-button"]),icon:"",onClick:N},{default:C(()=>[za]),_:1},8,["class"]),o("div",Na,[s(M,{class:"margin active-button",icon:"",onClick:n[4]||(n[4]=a=>d(t).commit("toggleLocalVideoMute"))},{default:C(()=>[o("i",{class:Y(["center",d(t).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1}),s(M,{class:"margin active-button",icon:"",onClick:n[5]||(n[5]=a=>d(t).commit("toggleLocalAudioMute"))},{default:C(()=>[o("i",{class:Y(["center",d(t).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1})]),s(M,{class:Y(["margin active-button align-right",r.value===I.value?"inactive-button":"active-button"]),icon:"",onClick:F},{default:C(()=>[Ba]),_:1},8,["class"])])])):(x(),H("div",Ea,[Ha,o("div",Ga,[(x(!0),H(ce,null,ue(d(z),a=>(x(),H("div",null,[o("div",{class:Y(["chat-message",a.user===d(t).state.displayName?"my-chat":"other-chat"])},Q(a.user)+": "+Q(a.message),3)]))),256))]),o("div",Fa,[s(Ie,{label:"Chat Message",clearable:"",class:"margin chat-input","hide-details":"auto",modelValue:k.value,"onUpdate:modelValue":n[6]||(n[6]=a=>k.value=a)},null,8,["modelValue"]),s(M,{class:"chat-button",onClick:D},{default:C(()=>[J("Send")]),_:1})])]))]),o("div",Ya,[s(_a,{"fixed-tabs":"","selected-class":"activeTab",class:"tabs",onClick:L},{default:C(()=>[s(_e,{value:"gallery"},{default:C(()=>[J("Gallery")]),_:1}),s(_e,{value:"chat"},{default:C(()=>[J("Chat")]),_:1})]),_:1})])])]))}});const Wa=Me(ja,[["__scopeId","data-v-e2c6dad3"]]),Xa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATLSURBVHgBzVrtcdw2EH3U+L/jCkKlgERxA6bVQKQKxLgB0S4goSqQ1EBySgGR3UDCVCC5gYgd+FwBjMclxY8jsCB5N3dvBpwTAQJ8u4vdxVIRDgGZ4fU7RLiAwZn9fVL9LXis2x1uosI1RYR9Q0j8zl9oX96Ff217ZwmVw479ERECx7b9DdFAKIx9619xHd11b+6HSEviH9tiTMcGmTAimaHE2Na2FVa1a8xFOIkb264g5pZCzK+LL7a9bszsBdwLcoJL9G13bR98hWWg8P6An8SVXSd/XjMzJPTGtqQz5lU9zyn/OBqdJjOxvT7YlqO/AUssQbuxE8+opw6JLj6P3EtqgY8QERL0DvHIg/NNSkCTuvT0k+k7x/3PjmdSXsY0kmPeBgwBteFzsaUvVoyAZvojf/SJiDYusAvoc9MTXXn6XQKIeRlqJMHukKsjDP7z9L709G0Q0QJTjPl4o/R/GovYNWhCP3me3SCipQhx4yUmITNn8AuBZvURfriE/JWXIZEQrzQlnWig7bv1MOV4hrjsGG5BVN5sSOQROs4wBbLJtWc0bSSO+9Qk490GEW1C4mKieSVKP0X+l6ef++M3z9OVg+gTkRyqgB8kkSEcl0q/O3aIWSVwm9Vz3jcWEH2+vH05MRk/ZIy2pz55+nzaoFk976tNIiKdW/hBrdxDh6Y541xLtJHCbZpl10EcOQbl0Df+iV3sT2XML0p/MRo72lTfp42e5YwTEbs7h57tpnbR+9HNn5kEeuy4c/RpqX45dNcujaCW1FvoZOhaH0b2TAoNYylJZhoSieMpHqhOhzfdRAgh8zPglFyDGDxH0NRaQppZ9VMSmlNmmsNS6nhG0vxFxYfMcONeIizfKuCPH/0zt+wJan/KybGHacUHkXaO5an+k20/QF46qedLPONpTh8siZVrwDQiDbZHKARMQWhOXi86j0gDIZRAl+gc0HPeukxpiO3VtVpS19CPAz4UVUpvqhJpcI0g8rwYXyZGm2Ks61Y6D0BC5gnhKOs56YZpOh/n1sxeDF6kW0hOnE9lZl0vzBcoOklfSEryGiKMpRWZHqLOy1HyzJ9iTEeJ1uXGnnGU+Dl2ANGIpBMkMde2Y4RE8ggr7AiRUpBrUKBNVTiu+/0iFDSnY+wI1EgOX3IGG4HHDj6ixRThsURLcxaBGqGXiR3955aE//grGmU6n8CP0q6WO4sMC0EiBq6FQ03BL4whnF+dloDZr8sNhrnHzKSY5umYHA4z5cUgEZeqT9SFxGVfYx5S8GPPe7OVfI1EbuCW/r2TzHvDlJ5m4q+u+zV7bEPkyq7x/1LtSECUs4ZPsis78tEuyvIktUApau6Xkf9tPU5z7+06cuYoMRHdyJ5j8zvdXDBrzTpzxxBBhVYpV5hIqJ80hgVHH0q44o7Mn2OasFYQoail3MixYIppZ4yiSj+0GCFHWtYA+G09Rjge7Py3VbHCoaVIWZj2nUD2xfedxUtIOX966t1W13PMO2GW9brdb4ovt3ewmgohlGM7+/Jhf0SI5f8BQXCSD/sl0kCKcvRqWuV+DEyPTg+DCCHaoXsmoTjwKak6Wq92hEPBTSVTZtoMoiEZcqWJxjUfjka6aD/wpJDSazeLGK2yHCaRLpr/rmPzRPpvTn6IoHFFRiQAAAAASUVORK5CYII=",te=e=>(Ae("data-v-a2b8af59"),e=e(),xe(),e),qa={class:"container"},Ja={key:0,class:"tab-container"},Ka={class:"video-container"},Qa={class:"basic-flex"},Za={class:"controls-container"},en=te(()=>o("i",{class:"center icon-caret-left-md"},null,-1)),tn=te(()=>o("i",{class:"center icon-caret-right-md"},null,-1)),an={key:1},nn={class:"chat-container"},sn=te(()=>o("div",{class:"chat-header"},[o("h3",null,"Chat")],-1)),ln={class:"chat-body"},on={class:"basic-flex"},cn={class:"right-column"},un={class:"center user-container"},dn=te(()=>o("i",{class:"icon-users users"},null,-1)),rn=te(()=>o("i",{class:"center icon-cog-gear"},null,-1)),vn=te(()=>o("h3",null,"Settings",-1)),mn=te(()=>o("i",{class:"center icon-chat"},null,-1)),fn=te(()=>o("i",{class:"center icon-video"},null,-1)),oe=2,gn=he({__name:"InCallLandscape",setup(e){const t=be(),u=ke();let c=w([]);const I=w(""),m=w(1),h=t.state.localMedia;let i=null,r=null,v=w({});const f=w("");let V=w([]);const y=w(1),k=E(()=>t.state.pinLocal||y.value===1),z=E(()=>t.state.pinLocal?m.value-1:Math.ceil(m.value/oe));function F(){y.value*oe-1<m.value&&(y.value++,U())}function N(){y.value>1&&(y.value--,U())}function U(){let l=new Array;if(t.state.pinLocal||y.value===1)for(let n in v.value){let a=v.value[n];a.index===y.value&&l.push(a)}else for(let n in v.value){let a=v.value[n];(a.index===y.value*oe-oe||a.index===y.value*oe-1)&&l.push(a)}t.commit("setVideoList",l)}function T(){for(let l in v.value){const n=v.value[l].connection;(n.getState()!==S.ConnectionState.Closed.valueOf()||n.getState()!==S.ConnectionState.Closing)&&n.close(),delete v.value[l]}B(),u.push("/")}function D(){if(f.value.length===0)return;let l=new Date;var n={from:t.state.displayName,timestamp:new Date().getTime(),timestampHourFormat:l.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),timestampDateFormat:l.toLocaleString(),text:f.value};i&&i.sendMessage(JSON.stringify(n)),f.value=""}Ve(async()=>{await b(),t.commit("setLocalMedia",h),t.commit("populateCameraList"),t.commit("populateMicrophoneList"),t.commit("setActiveVideoDevice",h.getVideoSourceInput().getId()),t.commit("setActiveAudioDevice",h.getAudioSourceInput().getId()),t.commit("setVideoMuted",h.getVideoMuted()),t.commit("setAudioMuted",h.getAudioMuted()),i&&i.addOnMessage(function(l,n){var a=JSON.parse(n);console.log(n),V.value.push({user:a.from,message:a.text})})});async function b(){const l=new S.Promise;r=new S.Client(W.gatewayUrl,W.applicationId),r.setUserAlias(t.state.displayName);const n=S.Token.generateClientRegisterToken(W.applicationId,r.getUserId(),r.getDeviceId(),r.getId(),[new S.ChannelClaim(t.state.channelId)],W.sharedSecret);return r.register(n).then(a=>{p(a),l.resolve(null)}).fail(a=>{S.Log.error("Failed to register with Gateway."),l.reject(a)}),l}function p(l){i=l[0];const n=R(t.state.localMedia);t.commit("setUpstreamConnection",n),i&&i.addOnRemoteUpstreamConnectionOpen(a=>g(a,i))}function g(l,n){const a=new S.RemoteMedia,$=new S.AudioStream(a),j=new S.VideoStream(a);if(n){const P=n.createSfuDownstreamConnection(l,$,j);return m.value===1&&t.commit("setVideoList",[{connection:P,media:a,index:m.value,displayName:l.getUserAlias()}]),v.value[P.getId()]={connection:P,media:a,index:m.value++,displayName:l.getUserAlias()},c.value.length===0&&a.getAudioSinkOutputs().then(function(G){c.value=G.map(X=>(X.getId()==="default"&&(I.value=X.getId()),{name:X.getName(),id:X.getId()}))}).fail(function(G){console.error(G)}),P.addOnStateChange(G=>{G.getRemoteClosed()&&(delete v.value[P.getId()],a.destroy(),m.value--)}),P.open(),P}}function R(l){const n=new S.AudioStream(l),a=new S.VideoStream(l);if(!i)return;const $=i.createSfuUpstreamConnection(n,a);return $.addOnStateChange(j=>{S.Log.debug(`Upstream connection is ${new S.ConnectionStateWrapper(j.getState()).toString()}.`)}),$.open(),$}function B(){if(r)return r.unregister().fail(()=>S.Log.error("Unregistration failed."))}const O=w("GALLERY");function L(l){O.value=l}return(l,n)=>(x(),H("div",qa,[o("div",null,[O.value=="GALLERY"?(x(),H("div",Ja,[o("div",Ka,[o("div",null,[d(t).state.localMedia&&k.value?(x(),K(re,{key:0,"ask-height":"265px","ask-width":"280px","local-video":d(t).state.localMedia,userName:"Me"},null,8,["local-video"])):se("",!0)]),o("div",Qa,[d(t).state.videoList?(x(!0),H(ce,{key:0},ue(d(t).state.videoList,a=>(x(),K(re,{remoteVideo:a.media,index:a.index,userName:a.displayName,connection:a.connection,"ask-height":"265px","ask-width":"280px",maxIndex:oe},null,8,["remoteVideo","index","userName","connection"]))),256)):se("",!0)])]),o("div",Za,[s(M,{class:Y(["margin align-left",y.value===1?"inactive-button":"active-button"]),icon:"",onClick:N},{default:C(()=>[en]),_:1},8,["class"]),s(M,{class:"margin active-button",icon:"",onClick:n[0]||(n[0]=a=>d(t).commit("toggleLocalVideoMute"))},{default:C(()=>[o("i",{class:Y(["center",d(t).state.videoMuted?"icon-video-slash":"icon-video"])},null,2)]),_:1}),s(M,{class:"margin active-button",icon:"",onClick:n[1]||(n[1]=a=>d(t).commit("toggleLocalAudioMute"))},{default:C(()=>[o("i",{class:Y(["center",d(t).state.audioMuted?"icon-audio-mic-slash":"icon-audio-mic"])},null,2)]),_:1}),s(M,{class:Y(["margin align-right",y.value===z.value?"inactive-button":"active-button"]),icon:"",onClick:F},{default:C(()=>[tn]),_:1},8,["class"])])])):(x(),H("div",an,[o("div",nn,[sn,o("div",ln,[(x(!0),H(ce,null,ue(d(V),a=>(x(),H("div",null,[o("div",{class:Y(["chat-message",a.user===d(t).state.displayName?"my-chat":"other-chat"])},Q(a.user)+": "+Q(a.message),3)]))),256))]),o("div",on,[s(Ie,{label:"Chat Message",clearable:"",class:"chat-input","hide-details":"auto",modelValue:f.value,"onUpdate:modelValue":n[2]||(n[2]=a=>f.value=a)},null,8,["modelValue"]),s(M,{class:"chat-button",onClick:D},{default:C(()=>[J("Send")]),_:1})])])]))]),o("div",cn,[s(Ce,{src:Xa,class:"logo"}),o("span",un,[dn,J(" "+Q(m.value),1)]),s(Xe,{"close-on-content-click":!1,location:"left"},{activator:C(({props:a})=>[s(M,ge({class:"margin center icon"},a,{icon:"",flat:""}),{default:C(()=>[rn]),_:2},1040)]),default:C(()=>[s(Je,{class:"settings-menu"},{default:C(()=>[s(We,null,{default:C(()=>[s(ee,null,{default:C(()=>[vn]),_:1}),s(ee,null,{default:C(()=>[s(Z,{label:"Camera",class:"margin input","hide-details":"auto",items:d(t).state.cameraList,"item-title":"name","item-value":"id",modelValue:d(t).state.activeVideoDevice,"onUpdate:modelValue":[n[3]||(n[3]=a=>d(t).state.activeVideoDevice=a),n[4]||(n[4]=a=>d(t).commit("changeCamera"))]},null,8,["items","modelValue"])]),_:1}),s(ee,null,{default:C(()=>[s(Z,{label:"Microphone",class:"margin input","hide-details":"auto",items:d(t).state.microphoneList,"item-title":"name","item-value":"id",modelValue:d(t).state.activeAudioDevice,"onUpdate:modelValue":[n[5]||(n[5]=a=>d(t).state.activeAudioDevice=a),n[6]||(n[6]=a=>d(t).commit("changeMicrophone"))]},null,8,["items","modelValue"])]),_:1}),s(ee,null,{default:C(()=>[s(Z,{label:"Speaker",class:"margin input","hide-details":"auto"})]),_:1})]),_:1})]),_:1})]),_:1}),s(M,{icon:"",class:"center icon",flat:"",onClick:n[7]||(n[7]=a=>L("CHAT"))},{default:C(()=>[mn]),_:1}),s(M,{icon:"",class:"center icon",flat:"",onClick:n[8]||(n[8]=a=>L("GALLERY"))},{default:C(()=>[fn]),_:1}),s(M,{class:"center leave-button",onClick:T},{default:C(()=>[J("Leave")]),_:1})])]))}});const pn=Me(gn,[["__scopeId","data-v-a2b8af59"]]),Cn=he({__name:"InCall",setup(e){const{mobile:t}=Ge(),u=w(t&&window.innerHeight>window.innerWidth);return(c,I)=>d(t)?u.value?(x(),K(Wa,{key:1})):(x(),K(pn,{key:2})):(x(),K(ca,{key:0}))}});export{Cn as default};
